<!DOCTYPE html>
<html lang="en-US"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1"><title>pfSense Archives - Stefcho's Tech Blog</title><meta property="og:locale" content="en_US"><meta property="og:type" content="object"><meta property="og:title" content="pfSense Archives - Stefcho's Tech Blog"><meta property="og:url" content="https://blog.stefcho.eu/tag/pfsense/"><meta property="og:site_name" content="Stefcho's Tech Blog"><script type="application/ld+json" class="yoast-schema-graph yoast-schema-graph--main">{
    "@context": "https://schema.org",
    "@graph": [
        {
            "@type": "Organization",
            "@id": "https://blog.stefcho.eu/#organization",
            "name": "",
            "url": "https://blog.stefcho.eu/",
            "sameAs": []
        },
        {
            "@type": "WebSite",
            "@id": "https://blog.stefcho.eu/#website",
            "url": "https://blog.stefcho.eu/",
            "name": "Stefcho's Tech Blog",
            "publisher": {
                "@id": "https://blog.stefcho.eu/#organization"
            },
            "potentialAction": {
                "@type": "SearchAction",
                "target": "https://blog.stefcho.eu/?s={search_term_string}",
                "query-input": "required name=search_term_string"
            }
        },
        {
            "@type": "CollectionPage",
            "@id": "https://blog.stefcho.eu/tag/pfsense/#webpage",
            "url": "https://blog.stefcho.eu/tag/pfsense/",
            "inLanguage": "en-US",
            "name": "pfSense Archives - Stefcho's Tech Blog",
            "isPartOf": {
                "@id": "https://blog.stefcho.eu/#website"
            }
        }
    ]
}</script><link rel="dns-prefetch" href="//fonts.googleapis.com"><link rel="dns-prefetch" href="//s.w.org"><script type="text/javascript" data-cfasync="false">
	var mi_version         = '7.7.1';
	var mi_track_user      = true;
	var mi_no_track_reason = '';
	
	var disableStr = 'ga-disable-UA-11255880-2';

	/* Function to detect opted out users */
	function __gaTrackerIsOptedOut() {
		return document.cookie.indexOf(disableStr + '=true') > -1;
	}

	/* Disable tracking if the opt-out cookie exists. */
	if ( __gaTrackerIsOptedOut() ) {
		window[disableStr] = true;
	}

	/* Opt-out function */
	function __gaTrackerOptout() {
	  document.cookie = disableStr + '=true; expires=Thu, 31 Dec 2099 23:59:59 UTC; path=/';
	  window[disableStr] = true;
	}
	
	if ( mi_track_user ) {
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
			(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
			m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','//www.google-analytics.com/analytics.js','__gaTracker');

		__gaTracker('create', 'UA-11255880-2', 'auto');
		__gaTracker('set', 'forceSSL', true);
		__gaTracker('require', 'displayfeatures');
		__gaTracker('send','pageview');
	} else {
		console.log( "" );
		(function() {
			/* https://developers.google.com/analytics/devguides/collection/analyticsjs/ */
			var noopfn = function() {
				return null;
			};
			var noopnullfn = function() {
				return null;
			};
			var Tracker = function() {
				return null;
			};
			var p = Tracker.prototype;
			p.get = noopfn;
			p.set = noopfn;
			p.send = noopfn;
			var __gaTracker = function() {
				var len = arguments.length;
				if ( len === 0 ) {
					return;
				}
				var f = arguments[len-1];
				if ( typeof f !== 'object' || f === null || typeof f.hitCallback !== 'function' ) {
					console.log( 'Not running function __gaTracker(' + arguments[0] + " ....) because you are not being tracked. " + mi_no_track_reason );
					return;
				}
				try {
					f.hitCallback();
				} catch (ex) {

				}
			};
			__gaTracker.create = function() {
				return new Tracker();
			};
			__gaTracker.getByName = noopnullfn;
			__gaTracker.getAll = function() {
				return [];
			};
			__gaTracker.remove = noopfn;
			window['__gaTracker'] = __gaTracker;
					})();
		}
</script><link rel="stylesheet" id="wp-block-library-css" href="https://blog.stefcho.eu/wp-includes/css/dist/block-library/style.min.css" type="text/css" media="all"><link rel="stylesheet" id="micro-style-css" href="https://blog.stefcho.eu/wp-content/themes/micro/assets/css/master.css" type="text/css" media="all"><link rel="stylesheet" id="primary-font-css" href="https://fonts.googleapis.com/css?family=Roboto+Mono%3A400%2C500&subset=latin%2Ccyrillic%2Cgreek%2Cvietnamese&ver=5.2.2" type="text/css" media="all"><link rel="stylesheet" id="wpgdprc.css-css" href="https://blog.stefcho.eu/wp-content/plugins/wp-gdpr-compliance/assets/css/front.css" type="text/css" media="all"><style id="wpgdprc.css-inline-css" type="text/css">

            div.wpgdprc .wpgdprc-switch .wpgdprc-switch-inner:before { content: 'Yes'; }
            div.wpgdprc .wpgdprc-switch .wpgdprc-switch-inner:after { content: 'No'; }
        
</style><script type="text/javascript">
/* <![CDATA[ */
var monsterinsights_frontend = {"js_events_tracking":"true","download_extensions":"doc,exe,js,pdf,ppt,tgz,zip,xls","inbound_paths":"[]","home_url":"https:\/\/PLACEHOLDER.wpsho","hash_tracking":"false"};
/* ]]> */
</script><script type="text/javascript" src="https://blog.stefcho.eu/wp-content/plugins/google-analytics-for-wordpress/assets/js/frontend.min.js"></script><script type="text/javascript" src="https://blog.stefcho.eu/wp-includes/js/jquery/jquery.js"></script><script type="text/javascript" src="https://blog.stefcho.eu/wp-includes/js/jquery/jquery-migrate.min.js"></script><style data-context="foundation-flickity-css">/*! Flickity v2.0.2
http://flickity.metafizzy.co
---------------------------------------------- */.flickity-enabled{position:relative}.flickity-enabled:focus{outline:0}.flickity-viewport{overflow:hidden;position:relative;height:100%}.flickity-slider{position:absolute;width:100%;height:100%}.flickity-enabled.is-draggable{-webkit-tap-highlight-color:transparent;tap-highlight-color:transparent;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.flickity-enabled.is-draggable .flickity-viewport{cursor:move;cursor:-webkit-grab;cursor:grab}.flickity-enabled.is-draggable .flickity-viewport.is-pointer-down{cursor:-webkit-grabbing;cursor:grabbing}.flickity-prev-next-button{position:absolute;top:50%;width:44px;height:44px;border:none;border-radius:50%;background:#fff;background:hsla(0,0%,100%,.75);cursor:pointer;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.flickity-prev-next-button:hover{background:#fff}.flickity-prev-next-button:focus{outline:0;box-shadow:0 0 0 5px #09f}.flickity-prev-next-button:active{opacity:.6}.flickity-prev-next-button.previous{left:10px}.flickity-prev-next-button.next{right:10px}.flickity-rtl .flickity-prev-next-button.previous{left:auto;right:10px}.flickity-rtl .flickity-prev-next-button.next{right:auto;left:10px}.flickity-prev-next-button:disabled{opacity:.3;cursor:auto}.flickity-prev-next-button svg{position:absolute;left:20%;top:20%;width:60%;height:60%}.flickity-prev-next-button .arrow{fill:#333}.flickity-page-dots{position:absolute;width:100%;bottom:-25px;padding:0;margin:0;list-style:none;text-align:center;line-height:1}.flickity-rtl .flickity-page-dots{direction:rtl}.flickity-page-dots .dot{display:inline-block;width:10px;height:10px;margin:0 8px;background:#333;border-radius:50%;opacity:.25;cursor:pointer}.flickity-page-dots .dot.is-selected{opacity:1}</style><style data-context="foundation-slideout-css">.slideout-menu{position:fixed;left:0;top:0;bottom:0;right:auto;z-index:0;width:256px;overflow-y:auto;-webkit-overflow-scrolling:touch;display:none}.slideout-menu.pushit-right{left:auto;right:0}.slideout-panel{position:relative;z-index:1;will-change:transform}.slideout-open,.slideout-open .slideout-panel,.slideout-open body{overflow:hidden}.slideout-open .slideout-menu{display:block}.pushit{display:none}</style><style type="text/css">
		/* Normal background color and text */
		body, code, kbd, tt, var, pre, input, textarea, select {
			color:#00aa13;
			background-color:#060c08;
		}

		/* Inverted background color and text */
		a:hover,
		.entry .entry-title,
		.comment-form-comment label,
		.form-submit input[type="submit"],
		.widget_calendar caption,
		.comments-area .comments-title,
		.main-navigation.is-extended .sub-menu a:hover,
		.menu-toggle {
			color:#060c08;
			background-color:#00aa13;
		}

		/* Overwrite for links */
		a,
		.main-navigation .menu-item a,
		.main-navigation .sub-menu a:hover,
		button, input  {
			color:#00aa13;
		}

		/* Borders */
		input, button, textarea, select
		.site-footer,
		.homepage-welcome {
			border-color:#00aa13;
		}

		.entry .entry-title a,
		.entry .entry-title a:hover {
			color: #060c08;
		}
	</style><link rel="icon" href="https://blog.stefcho.eu/wp-content/uploads/2018/10/cropped-0-32x32.jpg" sizes="32x32"><link rel="icon" href="https://blog.stefcho.eu/wp-content/uploads/2018/10/cropped-0-192x192.jpg" sizes="192x192"><link rel="apple-touch-icon-precomposed" href="https://blog.stefcho.eu/wp-content/uploads/2018/10/cropped-0-180x180.jpg"><meta name="msapplication-TileImage" content="https://blog.stefcho.eu/wp-content/uploads/2018/10/cropped-0-270x270.jpg"><style>.ios7.web-app-mode.has-fixed header{ background-color: rgba(3,122,221,.88);}</style><style type="text/css" id="wp-custom-css">
			  .entry .entry-content {
    margin: 50px 0; }		</style></head><body class="archive tag tag-pfsense tag-61 hfeed">
<div id="page" class="site">
	<a class="skip-link screen-reader-text" href="#content">Skip to content</a>

	<header id="masthead" class="site-header"><div class="header-image">
			<a href="https://blog.stefcho.eu/" rel="home">
				<img src="/wp-content/uploads/2018/10/0.jpg" height="350" width="1400" alt=""></a>
		</div>
		
		<div class="row">
			<div class="columns small-12">
				<div class="site-branding">
											<p class="site-title"><a href="https://blog.stefcho.eu/" rel="home">Stefcho's Tech Blog</a></p>
											<p class="site-description">Software Development, Cloud, DevOps and PfSense</p>
									</div>

				<nav id="site-navigation" class="main-navigation"><button class="menu-toggle" aria-controls="primary-menu" aria-expanded="false">
						<span class="screen-reader-text">Menu</span>
					</button>
					<div class="menu-primary-container">
						<div id="primary-menu" class="menu"></div>
					</div>
				</nav></div>
		</div>
	</header><div id="content" class="site-content">

	<section class="section-fullwidth section-main"><div class="row">
			<div class="columns small-12 medium-8">
				<div id="primary" class="content-area">
					<main id="main" class="site-main"><header class="page-header"><h1 class="page-title">Tag: pfSense</h1>						</header><article id="post-1277" class="entry post-1277 post type-post status-publish format-standard hentry category-technical tag-aes-ni tag-pfsense tag-qotom"><header class="entry-header"><h2 class="entry-title"><a href="https://blog.stefcho.eu/pfsense-one-last-time/" rel="bookmark">pfSense One Last Time</a></h2>		<div class="entry-meta">
			<span class="posted-on">Posted on <time class="entry-date published" datetime="2019-03-17T12:41:33+02:00">17/03/2019</time> - <time class="updated" datetime="2019-03-17T12:41:35+02:00">17/03/2019</time></span><span class="byline"> by <span class="author vcard"><a class="url fn n" href="https://blog.stefcho.eu/author/darko/">Stefan</a></span></span>		</div>
			</header><div class="entry-content">
		
<p>I’ve built my first pfSense router almost a decade ago. Fun fact is that the device is still working flawlessly, Alix2d13 is a beast. At that time 100 Mbps was more than enough compared to the offerings of the ISPs. Fast forward ten years, my WAN links are above this speed. CPU and RAM combined with the embedded architecture impose heavy limitations on the plugin options.<br><br>Still remember the time when equipped with console cable hooked to the  Alix running pfSense v 1.2.2. Holding tight to my hard copy of <em>pfSense  The Definitive Guide to the Open Source Firewall and Router Distribution</em>  Book. I’ve typed on the terminal. These days are long gone. <br><br>Currently running on a Dual Core Intel CPU with 8 GB RAM and SSD, pfSense is v 2.4.4. The book is freely available online.  It makes very little sense to me writing tutorials on how to do this and that any more. The only exception are some obscure cases that are  rare and sharing them will be mutually beneficial. <br><br>In retrospective PfSense has gone a long way for the past 9 years. The  project changed hands and lost some of its founding father. These changes steered the project in a direction that is not so much to my  liking.  To get a taste please review the following quotes: <br><br><a rel="noreferrer noopener" aria-label="pfSense 2.5 and AES-NI (opens in a new tab)" href="https://www.netgate.com/blog/pfsense-2-5-and-aes-ni.html" target="_blank">pfSense 2.5 and AES-NI</a></p>



<blockquote class="wp-block-quote"><p>pfSense version 2.5 will be based on FreeBSD 12, which should bring route-based IPsec, along with support for our integrated management platform, NRDM (more about this soon), and a number of other features.</p><p>With the increasing ubiquity of computing devices permeating all areas of our lives at work and at home, the need for encryption has become more important than ever. Desktops, laptops, smart phones, tablets, and many other devices all share this need to be able to encrypt sensitive information. Without encryption, everything you send over a network (or even store on a local storage device) is in the open, for anyone to read anytime he wants to read or even change it.</p><p>While we’re not revealing the extent of our plans, we do want to give early notice that, in order to support the increased cryptographic loads that we see as part of pfSense version 2.5, pfSense Community Edition version 2.5 will include a requirement that the CPU supports AES-NI. On ARM-based systems, the additional load from AES operations will be offloaded to on-die cryptographic accelerators, such as the one found on our SG-1000. ARM v8 CPUs include instructions like AES-NI that can be used to increase performance of the AES algorithm on these platforms.<br></p><p>The AES-NI instruction set extensions are used to optimize encryption and decryption algorithms on select Intel and AMD processors. Intel announced AES-NI in 2008 and released supported CPUs late 2010 with the Westmere architecture. AMD announced and shipped AES-NI support in 2010, starting with Bulldozer.</p><p>Please remember these requirements when you are considering components for your pfSense system.</p></blockquote>



<p><a href="https://www.netgate.com/blog/more-on-aes-ni.html" target="_blank" rel="noreferrer noopener" aria-label="More on AES-NI (opens in a new tab)">More on AES-NI</a></p>



<blockquote class="wp-block-quote"><p>There have been some concerns expressed about the requirement for AES-NI (or other offload) with pfSense 2.5, as announced two days ago.</p><p>Some complained that, since they don’t use VPN, they don’t need AES-NI. While I wasn’t quite ready to say more about the “3.0” effort, it is the reason for the new requirement for pfSense 2.5 and beyond.</p><p>With AES you either design, test, and verify a bitslice software implementation, (giving up a lot of performance in the process), leverage hardware offloads, or leave the resulting system open to several known attacks. We have selected the “leverage hardware offloads” path. The other two options are either unthinkable, or involve a lot of effort for diminishing returns.</p><p>So why the requirement?</p><p>Future versions of pfSense have a new management model. We’re leveraging YANG, via RESTCONF.</p><p>The webGUI will be present either on our cloud service or on-device, both talking to the ‘back-end’ (written in ‘C’) on the device via a RESTCONF interface. This is just as I said back in February 2015.</p><p>We’re leveraging AES-GCM inside TLS as the transport layer, because RFC 7525 REQUIRES it, and the RESTCONF standard, RFC 8040, says RFC 7525 is a SHOULD.</p><p>AES-GCM in particular has problems with side-channel attacks on pure software implementations. ChaCha20, which nicely avoids these issues when in software, isn’t an option. This is because: a) it’s not RFC-compliant, and b) there are currently no acceleration offloads for it, and the situation is that there could be thousands, or tens of thousands of pfSense instances hitting a single (clustered) instance of our cloud management platform.</p><p>So the choice is either to design, engineer and release a less-than-strong product, or require AES-NI or other offloads.</p><p>The entire PHP layer is being eliminated in the “3.0” effort, and we’re simply too small to continue to maintain both the current, organically-grown PHP layer (100K lines of PHP in 200 files) and the new, pure JS GUI (client) architected as a single page web application.</p><p>So there is an excellent chance that pfSense 2.5 will use the new webGUI, talking to our RESTCONF back-end.</p><p>As should be obvious by now, this isn’t about VPN.</p></blockquote>



<p><a href="https://www.netgate.com/blog/its-still-free-to-use.html" target="_blank" rel="noreferrer noopener" aria-label="It’s Still Free to Use (opens in a new tab)">It’s Still Free to Use</a></p>



<blockquote class="wp-block-quote"><p>If you’ve been testing 2.4 snapshots and updates, you’ve already seen a lot of new features. You have probably also seen a new pop-up in the webGUI.</p><p>Trademark Policy pop-up<br>While the pop-up is new, the message isn’t.  On January 27, 2017 we posted a blog Announcing a new trademark policy  for pfSense. This pop-up is a simple reminder that ensures everyone sees  and acknowledges the trademark policy. </p></blockquote>



<div class="wp-block-image"><figure class="aligncenter"><img src="https://www.netgate.com/assets/img/blog/2017/pop-up.jpg" alt=""></figure></div>



<blockquote class="wp-block-quote"><p>For our end users and  customers, nothing has changed. pfSense Community Edition (CE) remains a  free and open product available for your personal or business use. This  is true if you buy hardware from us or not. This notice addresses those  who take pfSense CE and sell it, infringing our policy while not giving  back to the project and directly competing with Netgate.</p><p>At  Netgate, we engineer, build, test, and give pfSense software to the  community for free. Accepting the pop-up affirms your agreement and  right to use, but not sell, pfSense software. </p></blockquote>



<p></p>



<p>After reading these articles and looking at my old faithful Alix. It is time to look for alternatives. One possibility is <a href="https://opnsense.org/" target="_blank" rel="noreferrer noopener" aria-label="OPNsense (opens in a new tab)">OPNsense</a></p>



<div class="wp-block-image"><figure class="aligncenter"><img src="https://opnsense.org/wp-content/themes/OPNsense/assets/img/250x50xopnsense.png.pagespeed.ic.T0VFZY72q3.webp" alt=""></figure></div>



<p>These two articles condense a long story, hope you find them informative:<br>I’ll share just a small quotes from them.  </p>



<p><a rel="noreferrer noopener" href="https://trickey.io/posts/opn-vs-pf/" target="_blank">OPN VS. PF</a><br></p>



<blockquote class="wp-block-quote"><p> OPNSense is a fork of PFSense, and PFSense is itself a fork of m0n0wall. </p></blockquote>



<p><br>The story gets even more interesting: <br><a rel="noreferrer noopener" aria-label="Building a BSD home router (pt. 6): pfSense vs. OPNsens (opens in a new tab)" href="https://eerielinux.wordpress.com/2017/06/25/building-a-bsd-home-router-pt-6-pfsense-vs-opnsense/" target="_blank">Building a BSD home router (pt. 6): pfSense vs. OPNsens</a></p>



<blockquote class="wp-block-quote"><p> <br>Once upon a time… in 2003 there was a new firewall OS called m0n0wall. Manuel Kasper had built it on a stripped down version of FreeBSD. There had been small firewalls before, but Kasper’s innovation was to put a Web GUI on top of it so that the firewall’s settings could be controlled from the browser! It did not take long and m0n0wall took the world by storm. However Kasper’s project focused on embedded hardware. So only a while later a fork was created which geared towards more powerful hardware. The fork’s name? You’ve guessed it: pfSense. In 2015 Manuel Kasper officially ended the m0n0wall project (because recent versions of FreeBSD had been grown too big to be easily usable for what he did with it in the past). And guess what he did: He gave <a href="https://opnsense.org/m0n0wall">his official blessing</a> and recommends to migrate to and support OPNsense! </p></blockquote>



<p>So if I want to go with pfSense I need to get a box with CPU supporting these AES-NI instructions. For this either get a branded box or build one on my own. Naturally I’ve chosen the latter.  </p>



<p>In selecting the box I have to thank to the great members of the community forum of pfSense. <br><a rel="noreferrer noopener" aria-label="Alternative to Qotom Q190G4 with AES-NI? (opens in a new tab)" href="https://forum.netgate.com/topic/115489/alternative-to-qotom-q190g4-with-aes-ni" target="_blank">Alternative to Qotom Q190G4 with AES-NI?</a></p>



<p>My choice of box is this quiet beast:</p>



<p><a href="https://www.aliexpress.com/item/QOTOM-4-LAN-Mini-PC-with-Core-i3-4005U-i5-5250U-processor-and-4-Gigabit-NIC/32812678037.html" target="_blank" rel="noreferrer noopener" aria-label="QOTOM 4 LAN Mini PC with Core i3-4005U / i5-5250U processor and 4 Gigabit NIC, support AES-NI, Serial, Fanless Mini PC pfSense (opens in a new tab)">QOTOM 4 LAN Mini PC with Core i3-4005U / i5-5250U processor and 4 Gigabit NIC, support AES-NI, Serial, Fanless Mini PC pfSense</a></p>



<p>Product properties: i5-5250U, 8G RAM, 128G SSD + Q355G4 WIFI $ 350.42 </p>



<figure class="wp-block-image"><img src="https://ae01.alicdn.com/kf/HTB1jItsKH2pK1RjSZFsq6yNlXXaV/QOTOM-Pfsense-Mini-PC-with-Core-i3-i5-i7-processor-and-4-Gigabit-NICs-support-AES.jpg" alt=""></figure><p>The fan less design combined with the SSD makes the operation completely silent. It keeps a steady 50 C temperature, with average CPU usage of 1-4 % and consumes only 7 – 10 % of the memory.  My hopes are that this will serve me for at least the next 10 years. As it is x86 architecture my choice of  OS dramatically widens leaving the door open to experiments with whatever comes to my mind.</p>
	</div>

	<footer class="entry-footer"><span class="cat-links">Posted in <a href="https://blog.stefcho.eu/category/technical/" rel="category tag">Technical</a></span><span class="tags-links">Tagged <a href="https://blog.stefcho.eu/tag/aes-ni/" rel="tag">AES-NI</a>, <a href="https://blog.stefcho.eu/tag/pfsense/" rel="tag">pfSense</a>, <a href="https://blog.stefcho.eu/tag/qotom/" rel="tag">Qotom</a></span>	</footer></article><article id="post-1226" class="entry post-1226 post type-post status-publish format-standard hentry category-technical tag-dual-wan tag-https tag-pfsense"><header class="entry-header"><h2 class="entry-title"><a href="https://blog.stefcho.eu/multi-wan-with-pfsense-https-sites-issue/" rel="bookmark">Multi-WAN with pfSense HTTPs Sites Issue</a></h2>		<div class="entry-meta">
			<span class="posted-on">Posted on <time class="entry-date published" datetime="2019-03-09T13:33:53+02:00">09/03/2019</time> - <time class="updated" datetime="2019-03-09T13:33:55+02:00">09/03/2019</time></span><span class="byline"> by <span class="author vcard"><a class="url fn n" href="https://blog.stefcho.eu/author/darko/">Stefan</a></span></span>		</div>
			</header><div class="entry-content">
		
<p>I’ve been running pfSense in Dual WAN mode for more than a decade. Unfortunately, some sites lately are quite sensitive per user session originating from multiple public IP addresses. The best description of the problem is from the official pfSense documentation:</p>



<blockquote class="wp-block-quote"><p>Some websites store session information including the client IP address, and if a subsequent connection to that site is routed out a different WAN interface using a different public IP address, the website will not function properly. This is becoming more common with banks and other security-minded sites. The suggested means of working around this is to create a failover group and direct traffic destined to these sites to the failover group rather than a load balancing group. Alternately, perform failover for all HTTPS traffic.</p><p>The sticky connections feature of pf is intended to resolve this problem, but it has historically been problematic. It is safe to use, and should alleviate this, but there is also a downside to using the sticky option. When using sticky connections, an association is held between the client IP address and a given gateway, it is not based off of the destination. When the sticky connections option is enabled, any given client would not load balance its connections between multiple WANs, but it would be associated with whichever gateway it happened to use for its first connection. Once all of the client states have expired, the client may exit a different WAN for its next connection, resulting in a new gateway pairing.</p></blockquote>



<p style="text-align:right"><a href="https://docs.netgate.com/pfsense/en/latest/book/multiwan/load-balancing-and-failover.html#problems-with-load-balancing" target="_blank" rel="noreferrer noopener" aria-label="Problems with Load Balancing (opens in a new tab)">Problems with Load Balancing</a></p>



<p><br>After some testing and consideration let’s leave the sticky connections unchecked. As mentioned above they are problematic. </p>



<figure class="wp-block-image"><a href="https://blog.stefcho.eu/wp-content/uploads/2019/03/GUI_Use_sticky_connections.png" target="_blank" rel="noreferrer noopener"><img src="https://blog.stefcho.eu/wp-content/uploads/2019/03/GUI_Use_sticky_connections-1024x206.png" alt="" class="wp-image-1248" srcset="https://blog.stefcho.eu/wp-content/uploads/2019/03/GUI_Use_sticky_connections-1024x206.png 1024w,https://blog.stefcho.eu/wp-content/uploads/2019/03/GUI_Use_sticky_connections-300x60.png 300w,https://blog.stefcho.eu/wp-content/uploads/2019/03/GUI_Use_sticky_connections-768x154.png 768w,https://blog.stefcho.eu/wp-content/uploads/2019/03/GUI_Use_sticky_connections.png 1146w" sizes="(max-width: 1024px) 100vw, 1024px"></a></figure><figure class="wp-block-image"><a href="https://blog.stefcho.eu/wp-content/uploads/2019/03/pfSense_HangOuts_Slide-1024x779.png" target="_blank" rel="noreferrer noopener"><img src="https://blog.stefcho.eu/wp-content/uploads/2019/03/pfSense_HangOuts_Slide-1024x779.png" alt="" class="wp-image-1241"></a></figure><p>Other description of the problem here: </p>



<blockquote class="wp-block-quote"><p>Some websites do not work properly if requests from the LAN are initiated from multiple public IP addresses. Hence load balancing is incompatible with these sites. Common examples are sites that maintain login sessions, most frequently online banking. This is most commonly observed with HTTPS sites so usually HTTPS should not be load balanced. Occasionally it is a problem with HTTP sites that maintain session, but this is rare. </p><p>For sites that do not function with load balancing, add firewall rules to not load balance traffic to these destinations or protocols. </p></blockquote>



<p style="text-align:right"><a href="https://docs.netgate.com/pfsense/en/latest/routing/multi-wan-compatibility.html?web-site-incompatibility-with-changing-ip-addresses#web-site-incompatibility-with-changing-ip-addresses" target="_blank" rel="noreferrer noopener" aria-label="Web site incompatibility with changing IP addresses (opens in a new tab)">Web site incompatibility with changing IP addresses</a></p>



<p><br>To alleviate this issue, you can do the following:<br><br>Here are my two Gateways</p>



<figure class="wp-block-image"><a href="https://blog.stefcho.eu/wp-content/uploads/2019/03/Gateways.png" target="_blank" rel="noreferrer noopener"><img src="https://blog.stefcho.eu/wp-content/uploads/2019/03/Gateways-1024x217.png" alt="" class="wp-image-1247" srcset="https://blog.stefcho.eu/wp-content/uploads/2019/03/Gateways-1024x217.png 1024w,https://blog.stefcho.eu/wp-content/uploads/2019/03/Gateways-300x64.png 300w,https://blog.stefcho.eu/wp-content/uploads/2019/03/Gateways-768x163.png 768w,https://blog.stefcho.eu/wp-content/uploads/2019/03/Gateways.png 1145w" sizes="(max-width: 1024px) 100vw, 1024px"></a><figcaption><br></figcaption></figure><p>Make two Gateway
Groups</p>



<figure class="wp-block-image"><a href="https://blog.stefcho.eu/wp-content/uploads/2019/03/Gateway-Groups.png" target="_blank" rel="noreferrer noopener"><img src="https://blog.stefcho.eu/wp-content/uploads/2019/03/Gateway-Groups-1024x316.png" alt="" class="wp-image-1246" srcset="https://blog.stefcho.eu/wp-content/uploads/2019/03/Gateway-Groups-1024x316.png 1024w,https://blog.stefcho.eu/wp-content/uploads/2019/03/Gateway-Groups-300x93.png 300w,https://blog.stefcho.eu/wp-content/uploads/2019/03/Gateway-Groups-768x237.png 768w,https://blog.stefcho.eu/wp-content/uploads/2019/03/Gateway-Groups.png 1147w" sizes="(max-width: 1024px) 100vw, 1024px"></a></figure><p>One for Load Balancing<br><br>Set for both Gateways Tier 1 </p>



<figure class="wp-block-image"><a href="https://blog.stefcho.eu/wp-content/uploads/2019/03/LoadBalanced-WANs.png" target="_blank" rel="noreferrer noopener"><img src="https://blog.stefcho.eu/wp-content/uploads/2019/03/LoadBalanced-WANs-1024x526.png" alt="" class="wp-image-1249" srcset="https://blog.stefcho.eu/wp-content/uploads/2019/03/LoadBalanced-WANs-1024x526.png 1024w,https://blog.stefcho.eu/wp-content/uploads/2019/03/LoadBalanced-WANs-300x154.png 300w,https://blog.stefcho.eu/wp-content/uploads/2019/03/LoadBalanced-WANs-768x394.png 768w,https://blog.stefcho.eu/wp-content/uploads/2019/03/LoadBalanced-WANs.png 1151w" sizes="(max-width: 1024px) 100vw, 1024px"></a></figure><p>One for Failover<br><br>Set Tire1 for the one and Tier 2 for the second </p>



<figure class="wp-block-image"><a href="https://blog.stefcho.eu/wp-content/uploads/2019/03/FailOver-WANs.png" target="_blank" rel="noreferrer noopener"><img src="https://blog.stefcho.eu/wp-content/uploads/2019/03/FailOver-WANs-1024x528.png" alt="" class="wp-image-1245" srcset="https://blog.stefcho.eu/wp-content/uploads/2019/03/FailOver-WANs-1024x528.png 1024w,https://blog.stefcho.eu/wp-content/uploads/2019/03/FailOver-WANs-300x155.png 300w,https://blog.stefcho.eu/wp-content/uploads/2019/03/FailOver-WANs-768x396.png 768w,https://blog.stefcho.eu/wp-content/uploads/2019/03/FailOver-WANs.png 1143w" sizes="(max-width: 1024px) 100vw, 1024px"></a></figure><p>Go to the LAN Rules</p>



<figure class="wp-block-image"><a href="https://blog.stefcho.eu/wp-content/uploads/2019/03/Rules_LAN.png" target="_blank" rel="noreferrer noopener"><img src="https://blog.stefcho.eu/wp-content/uploads/2019/03/Rules_LAN-1024x336.png" alt="" class="wp-image-1251" srcset="https://blog.stefcho.eu/wp-content/uploads/2019/03/Rules_LAN-1024x336.png 1024w,https://blog.stefcho.eu/wp-content/uploads/2019/03/Rules_LAN-300x99.png 300w,https://blog.stefcho.eu/wp-content/uploads/2019/03/Rules_LAN-768x252.png 768w,https://blog.stefcho.eu/wp-content/uploads/2019/03/Rules_LAN.png 1154w" sizes="(max-width: 1024px) 100vw, 1024px"></a></figure><p>Set the default LAN
rule to use the Load Balancing Gateway Group. </p>



<figure class="wp-block-image"><a href="https://blog.stefcho.eu/wp-content/uploads/2019/03/Rules_LAN_LB.png" target="_blank" rel="noreferrer noopener"><img src="https://blog.stefcho.eu/wp-content/uploads/2019/03/Rules_LAN_LB-1024x904.png" alt="" class="wp-image-1253" srcset="https://blog.stefcho.eu/wp-content/uploads/2019/03/Rules_LAN_LB-1024x904.png 1024w,https://blog.stefcho.eu/wp-content/uploads/2019/03/Rules_LAN_LB-300x265.png 300w,https://blog.stefcho.eu/wp-content/uploads/2019/03/Rules_LAN_LB-768x678.png 768w,https://blog.stefcho.eu/wp-content/uploads/2019/03/Rules_LAN_LB.png 1148w" sizes="(max-width: 1024px) 100vw, 1024px"></a></figure><p>Add new rule that will be valid only for HTTPS connection and set the Gateway to the Fail-over Gateway Group. </p>



<figure class="wp-block-image"><a href="https://blog.stefcho.eu/wp-content/uploads/2019/03/Rules_LAN_FOWAN_HTTPS-1.png" target="_blank" rel="noreferrer noopener"><img src="https://blog.stefcho.eu/wp-content/uploads/2019/03/Rules_LAN_FOWAN_HTTPS-1-967x1024.png" alt="" class="wp-image-1273" srcset="https://blog.stefcho.eu/wp-content/uploads/2019/03/Rules_LAN_FOWAN_HTTPS-1-967x1024.png 967w,https://blog.stefcho.eu/wp-content/uploads/2019/03/Rules_LAN_FOWAN_HTTPS-1-283x300.png 283w,https://blog.stefcho.eu/wp-content/uploads/2019/03/Rules_LAN_FOWAN_HTTPS-1-768x814.png 768w,https://blog.stefcho.eu/wp-content/uploads/2019/03/Rules_LAN_FOWAN_HTTPS-1.png 1147w" sizes="(max-width: 967px) 100vw, 967px"></a></figure><p>This way all HTTPS
connections will pass through the First WAN until it goes down and failover to the
Second. 

The alternative is to make
separate rule for each and every HTTPS site with issues. The rule will be very
similar to the one for HTTPS. The difference will be that Destination address will
be single Public IP. Doing so will load balance all other HTTPS connection that
don’t have this problem.



</p>
	</div>

	<footer class="entry-footer"><span class="cat-links">Posted in <a href="https://blog.stefcho.eu/category/technical/" rel="category tag">Technical</a></span><span class="tags-links">Tagged <a href="https://blog.stefcho.eu/tag/dual-wan/" rel="tag">Dual-WAN</a>, <a href="https://blog.stefcho.eu/tag/https/" rel="tag">HTTPS</a>, <a href="https://blog.stefcho.eu/tag/pfsense/" rel="tag">pfSense</a></span>	</footer></article><article id="post-1051" class="entry post-1051 post type-post status-publish format-standard hentry category-technical tag-pfsense"><header class="entry-header"><h2 class="entry-title"><a href="https://blog.stefcho.eu/pfsense-2-4-4-released/" rel="bookmark">pfSense 2.4.4 Released</a></h2>		<div class="entry-meta">
			<span class="posted-on">Posted on <time class="entry-date published" datetime="2018-10-04T10:25:46+02:00">04/10/2018</time> - <time class="updated" datetime="2018-10-28T22:15:03+02:00">28/10/2018</time></span><span class="byline"> by <span class="author vcard"><a class="url fn n" href="https://blog.stefcho.eu/author/darko/">Stefan</a></span></span>		</div>
			</header><div class="entry-content">
		<p>Hello everyone,</p>
<p>The new version 2.4.4 if finally here. You can check what’s new <a href="https://www.netgate.com/blog/pfsense-2-4-4-release-now-available.html">here.</a></p>
<p> </p>
	</div>

	<footer class="entry-footer"><span class="cat-links">Posted in <a href="https://blog.stefcho.eu/category/technical/" rel="category tag">Technical</a></span><span class="tags-links">Tagged <a href="https://blog.stefcho.eu/tag/pfsense/" rel="tag">pfSense</a></span>	</footer></article><article id="post-1025" class="entry post-1025 post type-post status-publish format-standard has-post-thumbnail hentry category-technical tag-openvpn tag-pfsense"><header class="entry-header"><h2 class="entry-title"><a href="https://blog.stefcho.eu/sharing-port-openvpn-web-server/" rel="bookmark">Sharing a Port with OpenVPN and a Web Server</a></h2>		<div class="entry-meta">
			<span class="posted-on">Posted on <time class="entry-date published" datetime="2016-03-04T08:36:35+02:00">04/03/2016</time> - <time class="updated" datetime="2018-10-28T22:15:03+02:00">28/10/2018</time></span><span class="byline"> by <span class="author vcard"><a class="url fn n" href="https://blog.stefcho.eu/author/darko/">Stefan</a></span></span>		</div>
			</header><div class="entry-content">
		<img width="200" height="150" src="https://blog.stefcho.eu/wp-content/uploads/2016/03/Sharing-a-Port-with-OpenVPN-and-a-Web-Server-02-200x150.png" class="attachment-post-thumbnail size-post-thumbnail wp-post-image" alt=""><p>Sharing a Port with OpenVPN and a Web Server</p>
<p>Routing your entire internet traffic over VPN when away from home is almost a must. Especially when using public WiFi hotspots or hotel internet.</p>
<p>Hello all, long time no see. I have a lot of other engagements lately and can’t reach to our beloved topic of pfSense. The fact that I don’t write new posts does not mean that I have abandoned it. Sometimes you have to put priorities to things in your life that are not as pleasant as other, but are just as much if not more important.</p>
<p>Enough said about that. Let’s get to the topic.</p>
<p>Recently I was visiting Asian country. As you probably know there are some places that some sites are restricted for access. It was a strange experience to not be able to open pages that you usually use every day. On other hand I would prefer to route all traffic over my Internet connection back at home when in a foreign country. Just as a protection.</p>
<p>So for test purposes I’ve setup an OpenVPN instance to check if I’m able to route all my traffic back home.</p>
<p>During my research I’ve came across very interesting article on the pfSense documentation. The article is: “<a href="https://doc.pfsense.org/index.php/Sharing_a_Port_with_OpenVPN_and_a_Web_Server" target="_blank">Sharing a Port with OpenVPN and a Web Server</a>”</p>
<p>It works and the only modification that has to be made to the OpenVPN server configuration are as follows:</p>
<ol><li>Set the protocol to TCP in the General Information section<a href="https://blog.stefcho.eu/wp-content/uploads/2016/03/Sharing-a-Port-with-OpenVPN-and-a-Web-Server-01.png" rel="attachment wp-att-1027"><img class="alignnone size-full wp-image-1027" src="https://blog.stefcho.eu/wp-content/uploads/2016/03/Sharing-a-Port-with-OpenVPN-and-a-Web-Server-01.png" alt="Sharing a Port with OpenVPN and a Web Server 01" width="773" height="131" srcset="https://blog.stefcho.eu/wp-content/uploads/2016/03/Sharing-a-Port-with-OpenVPN-and-a-Web-Server-01.png 773w,https://blog.stefcho.eu/wp-content/uploads/2016/03/Sharing-a-Port-with-OpenVPN-and-a-Web-Server-01-300x51.png 300w,https://blog.stefcho.eu/wp-content/uploads/2016/03/Sharing-a-Port-with-OpenVPN-and-a-Web-Server-01-768x130.png 768w" sizes="(max-width: 773px) 100vw, 773px"></a></li>
<li>Don’t forget to tick in the Tunnel Settings > Redirect Gateway</li>
</ol><p>(Force all client generated traffic through the tunnel.)</p>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2016/03/Sharing-a-Port-with-OpenVPN-and-a-Web-Server-03.png" rel="attachment wp-att-1029"><img class="alignnone size-full wp-image-1029" src="https://blog.stefcho.eu/wp-content/uploads/2016/03/Sharing-a-Port-with-OpenVPN-and-a-Web-Server-03.png" alt="Sharing a Port with OpenVPN and a Web Server 03" width="825" height="49" srcset="https://blog.stefcho.eu/wp-content/uploads/2016/03/Sharing-a-Port-with-OpenVPN-and-a-Web-Server-03.png 825w,https://blog.stefcho.eu/wp-content/uploads/2016/03/Sharing-a-Port-with-OpenVPN-and-a-Web-Server-03-300x18.png 300w,https://blog.stefcho.eu/wp-content/uploads/2016/03/Sharing-a-Port-with-OpenVPN-and-a-Web-Server-03-768x46.png 768w" sizes="(max-width: 825px) 100vw, 825px"></a></p>
<ol start="3"><li>In Advanced configuration section in Advanced field put the following:</li>
</ol><p>port-share localhost 443<a href="https://blog.stefcho.eu/wp-content/uploads/2016/03/Sharing-a-Port-with-OpenVPN-and-a-Web-Server-02.png" rel="attachment wp-att-1026"><img class="alignnone size-full wp-image-1026" src="https://blog.stefcho.eu/wp-content/uploads/2016/03/Sharing-a-Port-with-OpenVPN-and-a-Web-Server-02.png" alt="Sharing a Port with OpenVPN and a Web Server 02" width="761" height="163" srcset="https://blog.stefcho.eu/wp-content/uploads/2016/03/Sharing-a-Port-with-OpenVPN-and-a-Web-Server-02.png 761w,https://blog.stefcho.eu/wp-content/uploads/2016/03/Sharing-a-Port-with-OpenVPN-and-a-Web-Server-02-300x64.png 300w" sizes="(max-width: 761px) 100vw, 761px"></a></p>
<p>The old OpenVPN configuration instructions you can find here:</p>
<h2 class="post-title"><a title="Permanent Link to pfSense 2.0 RC1 configuration of OpenVPN Server for Road Warrior with TLS and User Authentication" href="http://stefcho.azurewebsites.net/pfsense-2-0-rc1-configuration-of-openvpn-server-for-rad-warrior-with-tls-and-user-authentication/" rel="bookmark permalink">pfSense 2.0 RC1 configuration of OpenVPN Server for Road Warrior with TLS and User Authentication</a></h2>
<p>Now you can connect to your pfSense / OpenVPN server on HTTPS and hopefully it would appear much like you are opening a page over SSL.</p>
<p>Have fun and as usual I don’t take any kind of responsibly for the way you use this setup, or any legal actions or consequences for that matter or related to it.</p>
	</div>

	<footer class="entry-footer"><span class="cat-links">Posted in <a href="https://blog.stefcho.eu/category/technical/" rel="category tag">Technical</a></span><span class="tags-links">Tagged <a href="https://blog.stefcho.eu/tag/openvpn/" rel="tag">OpenVPN</a>, <a href="https://blog.stefcho.eu/tag/pfsense/" rel="tag">pfSense</a></span>	</footer></article><article id="post-987" class="entry post-987 post type-post status-publish format-standard hentry category-technical tag-pfsense tag-pfsense-2-2"><header class="entry-header"><h2 class="entry-title"><a href="https://blog.stefcho.eu/pfsense-2-2-released/" rel="bookmark">pfSense 2.2 Released!</a></h2>		<div class="entry-meta">
			<span class="posted-on">Posted on <time class="entry-date published" datetime="2015-01-24T14:45:33+02:00">24/01/2015</time> - <time class="updated" datetime="2018-10-28T22:15:04+02:00">28/10/2018</time></span><span class="byline"> by <span class="author vcard"><a class="url fn n" href="https://blog.stefcho.eu/author/darko/">Stefan</a></span></span>		</div>
			</header><div class="entry-content">
		<p>It’s been a while since I’ve been digging in pfSense. A lot of things had happened. The good news is that currently I’ve got a few projects related to the topic and will make a few posts about them. Next post will be related to upgrading to 2.2 from 2.1.5.</p>
<p>In the meantime you can check what are the new features in this release here:</p>
<p><a href="https://doc.pfsense.org/index.php/2.2_New_Features_and_Changes">2.2 New Features and Changes</a></p>
<p>The official article about the release:</p>
<p><a href="https://blog.pfsense.org/?p=1546">pfSense 2.2-RELEASE Now Available!</a></p>
<p>and of course the <a href="https://doc.pfsense.org/index.php/Upgrade_Guide">Upgrade Guide</a></p>
<p> </p>
<p> </p>
	</div>

	<footer class="entry-footer"><span class="cat-links">Posted in <a href="https://blog.stefcho.eu/category/technical/" rel="category tag">Technical</a></span><span class="tags-links">Tagged <a href="https://blog.stefcho.eu/tag/pfsense/" rel="tag">pfSense</a>, <a href="https://blog.stefcho.eu/tag/pfsense-2-2/" rel="tag">pfSense 2.2</a></span>	</footer></article><article id="post-966" class="entry post-966 post type-post status-publish format-standard hentry category-technical tag-pfsense tag-technical"><header class="entry-header"><h2 class="entry-title"><a href="https://blog.stefcho.eu/pfsense-2-0-release-now-available/" rel="bookmark">pfSense 2.0 Release Now Available!</a></h2>		<div class="entry-meta">
			<span class="posted-on">Posted on <time class="entry-date published" datetime="2011-09-25T15:37:00+02:00">25/09/2011</time> - <time class="updated" datetime="2019-02-18T14:57:41+02:00">18/02/2019</time></span><span class="byline"> by <span class="author vcard"><a class="url fn n" href="https://blog.stefcho.eu/author/darko/">Stefan</a></span></span>		</div>
			</header><div class="entry-content">
		<p>The 2.0 release is finally available.</p>
<p>Here is the news:</p>
<h1><strong><a title="Permanent Link: 2.0 Release Now Available!" href="http://blog.pfsense.org/?p=598" target="_blank">2.0 Release Now Available!</a></strong></h1>
<p>My experience so far is good, I’ve already upgrade some of my machines.</p>
<p>You can take a look at the upgrade process from RC3 to RTM here:</p>
<p> <br><iframe width="640" height="480" src="http://www.youtube.com/embed/SPsOr2VAfwE?rel=0&hd=1" frameborder="0" allowfullscreen=""></iframe><br>
 </p>
<h2>Before performing any kind of upgrade read carefully the <a href="http://doc.pfsense.org/index.php/Upgrade_Guide" target="_blank">Upgrade Guide!!!</a></h2>
<p> </p>
	</div>

	<footer class="entry-footer"><span class="cat-links">Posted in <a href="https://blog.stefcho.eu/category/technical/" rel="category tag">Technical</a></span><span class="tags-links">Tagged <a href="https://blog.stefcho.eu/tag/pfsense/" rel="tag">pfSense</a>, <a href="https://blog.stefcho.eu/tag/technical/" rel="tag">Technical</a></span><span class="comments-link"><a href="https://blog.stefcho.eu/pfsense-2-0-release-now-available/#comments">5 Comments</a></span>	</footer></article><article id="post-956" class="entry post-956 post type-post status-publish format-standard hentry category-technical tag-network tag-openvpn tag-pfsense tag-pfsense-2-0-rc3 tag-technical"><header class="entry-header"><h2 class="entry-title"><a href="https://blog.stefcho.eu/using-your-openvpn-road-warrior-setup-as-a-secure-relay/" rel="bookmark">Using your OpenVPN Road Warrior setup as a Secure Relay</a></h2>		<div class="entry-meta">
			<span class="posted-on">Posted on <time class="entry-date published" datetime="2011-09-07T22:16:49+02:00">07/09/2011</time> - <time class="updated" datetime="2019-02-18T14:57:15+02:00">18/02/2019</time></span><span class="byline"> by <span class="author vcard"><a class="url fn n" href="https://blog.stefcho.eu/author/darko/">Stefan</a></span></span>		</div>
			</header><div class="entry-content">
		<p><strong>Introduction</strong></p>
<p>If you are in a café or another place with free wireless Internet access you are under a security risk. Your traffic can be monitored, captured and analysed. Your sensitive data can be stolen or your laptop infected with malicious application.</p>
<p>To avoid as much as possible of the above we can route all your traffic through the internet connection at home or in your office.</p>
<p><strong>Configuration</strong></p>
<p>As a base configuration you can use <a href="http://stefcho.azurewebsites.net/?p=492" target="_blank">pfSense 2.0 RC1 configuration of OpenVPN Server for Road Warrior with TLS and User Authentication</a></p>
<p>up until the Tunnel Settings section of the OpenVPN Configuration.</p>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2011/09/Using-your-OpenVPN-Road-Warrior-setup-as-a-Secure-Relay-for-the-users-01.png"><img class="alignnone size-full wp-image-957" title="Using your OpenVPN Road Warrior setup as a Secure Relay for the users - 01" src="https://blog.stefcho.eu/wp-content/uploads/2011/09/Using-your-OpenVPN-Road-Warrior-setup-as-a-Secure-Relay-for-the-users-01.png" alt="" width="909" height="678" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/09/Using-your-OpenVPN-Road-Warrior-setup-as-a-Secure-Relay-for-the-users-01.png 909w,https://blog.stefcho.eu/wp-content/uploads/2011/09/Using-your-OpenVPN-Road-Warrior-setup-as-a-Secure-Relay-for-the-users-01-300x223.png 300w,https://blog.stefcho.eu/wp-content/uploads/2011/09/Using-your-OpenVPN-Road-Warrior-setup-as-a-Secure-Relay-for-the-users-01-200x150.png 200w" sizes="(max-width: 909px) 100vw, 909px"></a></p>
<p>There tick the Redirect Gateway.</p>
<p> </p>
<p>Under Client Settings enter DNS Server 1 as the IP address of you LAN interface.</p>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2011/09/Using-your-OpenVPN-Road-Warrior-setup-as-a-Secure-Relay-for-the-users-02.png"><img class="alignnone size-full wp-image-958" title="Using your OpenVPN Road Warrior setup as a Secure Relay for the users - 02" src="https://blog.stefcho.eu/wp-content/uploads/2011/09/Using-your-OpenVPN-Road-Warrior-setup-as-a-Secure-Relay-for-the-users-02.png" alt="" width="909" height="678" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/09/Using-your-OpenVPN-Road-Warrior-setup-as-a-Secure-Relay-for-the-users-02.png 909w,https://blog.stefcho.eu/wp-content/uploads/2011/09/Using-your-OpenVPN-Road-Warrior-setup-as-a-Secure-Relay-for-the-users-02-300x223.png 300w,https://blog.stefcho.eu/wp-content/uploads/2011/09/Using-your-OpenVPN-Road-Warrior-setup-as-a-Secure-Relay-for-the-users-02-200x150.png 200w" sizes="(max-width: 909px) 100vw, 909px"></a></p>
<p><strong>Explanation</strong></p>
<p>By doing so you will redirect all your traffic through the VPN connection and avoid the risks related to the publicly available Internet access hotspots. The addition of DNS server address is needed in order to use you own device to resolve web sites IPs instead of the publicly available DNS server of the hotspot.</p>
<p><strong>Testing</strong></p>
<p>As a test you can trace route (tracert bbc.co.uk for example) a popular internet site with or without established VPN Connection.</p>
<p><strong>Conclusion</strong></p>
<p>At the cost of building just another VPN Server on your device you are gaining a little peace of mind while surfing the net from insecure location.</p>
	</div>

	<footer class="entry-footer"><span class="cat-links">Posted in <a href="https://blog.stefcho.eu/category/technical/" rel="category tag">Technical</a></span><span class="tags-links">Tagged <a href="https://blog.stefcho.eu/tag/network/" rel="tag">Network</a>, <a href="https://blog.stefcho.eu/tag/openvpn/" rel="tag">OpenVPN</a>, <a href="https://blog.stefcho.eu/tag/pfsense/" rel="tag">pfSense</a>, <a href="https://blog.stefcho.eu/tag/pfsense-2-0-rc3/" rel="tag">pfSense 2.0 RC3</a>, <a href="https://blog.stefcho.eu/tag/technical/" rel="tag">Technical</a></span><span class="comments-link"><a href="https://blog.stefcho.eu/using-your-openvpn-road-warrior-setup-as-a-secure-relay/#comments">7 Comments</a></span>	</footer></article><article id="post-930" class="entry post-930 post type-post status-publish format-standard hentry category-technical tag-pfsense tag-pfsense-2-0-rc3"><header class="entry-header"><h2 class="entry-title"><a href="https://blog.stefcho.eu/upgrade-alix-board-with-pfsense-1-2-3-to-pfsense-2-0-rc3/" rel="bookmark">Upgrade Alix board  with pfSense 1.2.3 to pfSense 2.0 RC3</a></h2>		<div class="entry-meta">
			<span class="posted-on">Posted on <time class="entry-date published" datetime="2011-08-20T08:17:55+02:00">20/08/2011</time> - <time class="updated" datetime="2019-02-18T14:57:03+02:00">18/02/2019</time></span><span class="byline"> by <span class="author vcard"><a class="url fn n" href="https://blog.stefcho.eu/author/darko/">Stefan</a></span></span>		</div>
			</header><div class="entry-content">
		<p><strong>Introduction</strong></p>
<p>After having  enough of tests with the RC3 in virtual environment, I decide to upgrade my pfSense 1.2.3 appliance running on Alix2d13. Considering my Dual WAN setup with load balancing and some other rules, I didn’t really want to lose any of my configurations during this process.</p>
<p>If I made in-place upgrade what is my rollback strategy?!</p>
<p>If I performed clean install and just restored configuration backup what are the guaranties that is will work. Of course I can test it in my virtual lab, but there are risks with the physical scenario that I can’t predict using this method. So I needed and alternative.</p>
<p><strong>Scenario</strong></p>
<p>I want to test upgrade my pfSense 1.2.3 to 2.0 RC3. For that purpose I need a reliable rollback plan with no data loss, and minimal operations required. How did I achieve it you can find in the Explanation section.</p>
<p><strong>Setup</strong></p>
<p>The setup is described in this post: <a href="http://stefcho.azurewebsites.net/?p=306" target="_blank">SoHo Firewall Appliance with Alix2d13 and pfSense</a></p>
<p>,noting change there since.</p>
<p><strong>Configuration</strong></p>
<p>First I made a backup of the full configuration of the 1.2.3, you know just in case.</p>
<pre>Then download the image file: <a href="http://mirror.qubenet.net/mirror/pfsense/updates/pfSense-2.0-RC3-4g-i386-20110621-1821-nanobsd-upgrade.img.gz">pfSense-2.0-RC3-4g-i386-20110621-1821-nanobsd-upgrade.img.gz</a></pre>
<p>And extract the image from the archive.</p>
<p>Now as it is described here: <a href="http://m0n0.ch/wall/installation_generic.php" target="_blank">Installation on a standard PC (CF/IDE version)</a></p>
<p>We need the <strong>physdiskwrite</strong> tool to write the image to the Compact Flash (CF). I’ve used the</p>
<p><a href="http://m0n0.ch/wall/physdiskwrite.php" target="_blank">physdiskwrite 0.5.2 + PhysGUI</a></p>
<p>Then I plug in the new CF in the card reader make sure there are no portions on it using the Disk Management Console (Start > Run> diskmgmt.msc), otherwise you will receive error message like the one in the Issue section below.</p>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2011/08/CF.png"><img class="alignnone size-full wp-image-931" title="CF" src="https://blog.stefcho.eu/wp-content/uploads/2011/08/CF.png" alt="" width="674" height="102" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/08/CF.png 674w,https://blog.stefcho.eu/wp-content/uploads/2011/08/CF-300x45.png 300w" sizes="(max-width: 674px) 100vw, 674px"></a><a href="https://blog.stefcho.eu/wp-content/uploads/2011/08/PhysGUI.png"></a></p>
<p>Then start physdiskwrite with PhysGUI, select the CF disk.</p>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2011/08/PhysGUI.png"><img class="alignnone size-full wp-image-936" title="PhysGUI" src="https://blog.stefcho.eu/wp-content/uploads/2011/08/PhysGUI.png" alt="" width="723" height="295" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/08/PhysGUI.png 723w,https://blog.stefcho.eu/wp-content/uploads/2011/08/PhysGUI-300x122.png 300w" sizes="(max-width: 723px) 100vw, 723px"></a></p>
<p>Right click on the disk select Image laden (Load Image), Offnen (Open). Brows to the extracted image and select it.</p>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2011/08/PhysGUI-Load-Image.png"><img class="alignnone size-full wp-image-933" title="PhysGUI - Load Image" src="https://blog.stefcho.eu/wp-content/uploads/2011/08/PhysGUI-Load-Image.png" alt="" width="724" height="299" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/08/PhysGUI-Load-Image.png 724w,https://blog.stefcho.eu/wp-content/uploads/2011/08/PhysGUI-Load-Image-300x123.png 300w" sizes="(max-width: 724px) 100vw, 724px"></a><a href="https://blog.stefcho.eu/wp-content/uploads/2011/08/PhysGUI-Remove-2GB-restriction.png"></a></p>
<p>You will see this warning message window, tick the check box next to <strong>Remove 2GB restriction</strong>, mine is 8 Gigs, if your CF is smaller then don’t.</p>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2011/08/PhysGUI-Remove-2GB-restriction.png"><img class="alignnone size-full wp-image-934" title="PhysGUI - Remove 2GB restriction" src="https://blog.stefcho.eu/wp-content/uploads/2011/08/PhysGUI-Remove-2GB-restriction.png" alt="" width="308" height="168" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/08/PhysGUI-Remove-2GB-restriction.png 308w,https://blog.stefcho.eu/wp-content/uploads/2011/08/PhysGUI-Remove-2GB-restriction-300x163.png 300w" sizes="(max-width: 308px) 100vw, 308px"></a><a href="https://blog.stefcho.eu/wp-content/uploads/2011/08/PhysGUI-Warninng.png"></a></p>
<p>Yet another warning message windows, asking you if you really want to overwrite the disk with the image.</p>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2011/08/PhysGUI-Warninng.png"><img class="alignnone size-full wp-image-935" title="PhysGUI - Warninng" src="https://blog.stefcho.eu/wp-content/uploads/2011/08/PhysGUI-Warninng.png" alt="" width="475" height="184" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/08/PhysGUI-Warninng.png 475w,https://blog.stefcho.eu/wp-content/uploads/2011/08/PhysGUI-Warninng-300x116.png 300w" sizes="(max-width: 475px) 100vw, 475px"></a><a href="https://blog.stefcho.eu/wp-content/uploads/2011/08/Progress.png"></a></p>
<p>No you have about 20 – 30 minutes of waiting, so be patient, do some other stuff.</p>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2011/08/Progress.png"><img class="alignnone size-full wp-image-937" title="Progress" src="https://blog.stefcho.eu/wp-content/uploads/2011/08/Progress.png" alt="" width="677" height="342" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/08/Progress.png 677w,https://blog.stefcho.eu/wp-content/uploads/2011/08/Progress-300x151.png 300w" sizes="(max-width: 677px) 100vw, 677px"></a></p>
<p>We are ready.</p>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2011/08/Done.png"><img class="alignnone size-full wp-image-932" title="Done" src="https://blog.stefcho.eu/wp-content/uploads/2011/08/Done.png" alt="" width="244" height="171"></a></p>
<p> </p>
<p><strong>Explanation</strong></p>
<p>Finally I get it, instead of changing the content of my original Compact Flash, why not get second one and use is for the tests instead? This way I can retain my original configuration and with just a swap of the cards be right back where I started.</p>
<p><strong>Testing</strong></p>
<p>After successful installation I’ve just swap the CFs and configured pfSense 2.0 RC3 using console cable.</p>
<p>Then using the WebGUI restored the backup configuration from the 1.2.3. Now it is time to check the functionality.</p>
<p>The Interface configuration like interfaced configuration was in place but the Load Balancing configuration was gone. Also my OpenVPN configurations were restored but in a non-working state. The firewall rules were applied but with the missing Load Balancer there was little use of them. After about half hour of checks, I decided to roll back to 1.2.3. Swap the CFs again and everything works the old way.</p>
<p><strong>Issues</strong></p>
<p>Writing to the CF card, As stated in <a href="http://m0n0.ch/wall/physdiskwrite.php" target="_blank">Special considerations for Windows Vista/7</a></p>
<blockquote><p>If you get write errors shortly after physdiskwrite has begun writing to the target disk (usually after 65536 bytes), this may be caused by existing partitions on the disk. Use the Disk Management utility (right-click on the “Computer” icon on the desktop and select Manage, then navigate to Computer Management (Local)/Storage) to delete all partitions on the target disk before starting physdiskwrite.</p>
<p>If you are unable to delete all the partitions with the Disk Management utility, try the following procedure:</p>
<p>1.     Open a command window as admin (“cmd”)</p>
<p>2.     Type “diskpart” and hit enter.</p>
<p>3.     Type “list disk” and hit enter to find out the number of your drive.</p>
<p>4.     Type “select disk X” (where you replace X with the number of your drive) and hit enter.</p>
<p>5.     Type “clean” and hit enter.</p></blockquote>
<p> </p>
<p>So I had to clean the disk first but it was a breezy task. Then everything was alright.</p>
<p><strong>Conclusion</strong></p>
<p>Up until the restoration of the configuration backup everything is ok. Now I have to test the restoration in my lab, or better yet reproduce my original configuration there. I ought to think for the second alternative more.</p>
<p>To configure everything in the lab and then just backup and restore the configuration from the same one and the same version sound reasonable to me. Better yet I will know that it works.</p>
<p>I’ll have to test Dual WAN in fail-over configuration, then test recreate my OpenVPN configurations, and test all the rules that I have applied.</p>
	</div>

	<footer class="entry-footer"><span class="cat-links">Posted in <a href="https://blog.stefcho.eu/category/technical/" rel="category tag">Technical</a></span><span class="tags-links">Tagged <a href="https://blog.stefcho.eu/tag/pfsense/" rel="tag">pfSense</a>, <a href="https://blog.stefcho.eu/tag/pfsense-2-0-rc3/" rel="tag">pfSense 2.0 RC3</a></span><span class="comments-link"><a href="https://blog.stefcho.eu/upgrade-alix-board-with-pfsense-1-2-3-to-pfsense-2-0-rc3/#comments">3 Comments</a></span>	</footer></article><article id="post-916" class="entry post-916 post type-post status-publish format-standard hentry category-technical tag-centos tag-ldap tag-openldap tag-openvpn tag-pfsense tag-pfsense-2-0-rc3 tag-technical"><header class="entry-header"><h2 class="entry-title"><a href="https://blog.stefcho.eu/openvpn-on-pfsense-2-0-rc3-with-openldap-authentication-on-centos-5-6/" rel="bookmark">OpenVPN on pfSense 2.0 RC3 with OpenLDAP Authentication on CentOS 5.6</a></h2>		<div class="entry-meta">
			<span class="posted-on">Posted on <time class="entry-date published" datetime="2011-08-13T11:31:34+02:00">13/08/2011</time> - <time class="updated" datetime="2019-02-18T14:56:33+02:00">18/02/2019</time></span><span class="byline"> by <span class="author vcard"><a class="url fn n" href="https://blog.stefcho.eu/author/darko/">Stefan</a></span></span>		</div>
			</header><div class="entry-content">
		<p><strong>Introduction</strong></p>
<p>After writing OpenVPN with LDAP authentication on pfSense 2.0 RC1, a reader of my blog shared some problems with configuring OpenLDAP on CentOS.  So I decide to build such a setup and test.</p>
<p><strong>Scenario</strong></p>
<p>The scenario is as follows, authenticating users requiring access to the OpenVPN server against OpenLDAP service running on CentOS.</p>
<p><strong>Setup</strong></p>
<p>I’ve spent most time in preparing the CentOS server. Initially my decision was to use CentOS 6.0, but after a few failed attempts to configure it and the absence of how to guides for this purpose, I’ve decided to fall back to 5.6.</p>
<p>For this version there is a wonderful how to guide here:</p>
<p><a href="http://drozd.com/2011/04/22/openldap-on-centos-5-6/" target="_blank">OpenLDAP on CentOS 5.6</a></p>
<p><a href="http://drozd.com/2011/04/22/openldap-on-centos-5-6/" target="_blank">Install And Configure OpenLDAP 2.4.25 On CentOS 5.6</a></p>
<p>Following this instructions I’ve managed to setup OpenLDAP very fast.  The only comment that I have is in this section:</p>
<blockquote><p>All data loaded is in <a title="LDAP Data Interchange Format" href="http://en.wikipedia.org/wiki/LDAP_Data_Interchange_Format" target="_blank">LDIF</a> format. Create a file to initialize the LDAP database:</p>
<p># vi ldap-init.ldif</p>
<p>dn: dc=mycompany,dc=com</p>
<p>objectclass: dcObject</p>
<p>objectclass: organization</p>
<p>o: Example</p>
<p>dc: mycompany</p>
<p>dn: cn=Admin,dc=mycompany,dc=com</p>
<p>objectclass: organizationalRole</p>
<p>cn: Admin</p>
<p> </p></blockquote>
<p>you have to have one new row, otherwise the import in the next step fails. So the above should look like:</p>
<blockquote><p># vi ldap-init.ldif</p>
<p>dn: dc=mycompany,dc=com</p>
<p>objectclass: dcObject</p>
<p>objectclass: organization</p>
<p>o: Example</p>
<p>dc: mycompany</p>
<p> </p>
<p>dn: cn=Admin,dc=mycompany,dc=com</p>
<p>objectclass: organizationalRole</p>
<p>cn: Admin</p>
<p> </p></blockquote>
<p> </p>
<p>Next step is to create a few test users.  For that purpose I’ve used :</p>
<p><a href="http://ldapadmin.sourceforge.net/" target="_blank">LDAP Admin</a></p>
<blockquote><p>Ldap Admin is free Win32 administration tool for LDAP directory management. This application lets you browse, search, modify, create and delete objects on LDAP server. It also supports more complex operations such as directory copy and move between remote servers and extends the common edit functions to support specific object types (such as groups and accounts).</p>
<p>You can use it to manage Posix groups and accounts, Samba accounts and it even includes support for Postfix MTA. Ldap Admin is free Open Source software distributed under the GNU General Public License.</p></blockquote>
<p><strong>Configuration</strong></p>
<p>It is time to configure the pfSense. I will skip all the steps described in the previous posts. You can find them here:</p>
<p><a href="http://stefcho.azurewebsites.net/?p=492" target="_blank">pfSense 2.0 RC1 configuration of OpenVPN Server for Road Warrior with TLS and User Authentication</a></p>
<p><a href="http://stefcho.azurewebsites.net/?p=528" target="_blank">OpenVPN with LDAP authentication on pfSense 2.0 RC1</a></p>
<p>Now let’s get straight to System > User Manager and on the Servers leaf.</p>
<p><strong>Hostname or IP address:</strong> this it the address of the CentOS server</p>
<p><strong>Base DN</strong>: this is the domain name</p>
<p><strong>Authentication container</strong>: after insterted the Bind credentials, it was visible, but when I’ve click on the Save button, nothing happen. So I’ve typed it in manually.</p>
<p><strong>Bind Credentials</strong>: enter User DN and Password. , I’ve tested it and with <strong>Use anonymous binds to resolve distinguished names</strong>, it works also.</p>
<p><strong>Group Member Attribute</strong>: you can modify this with the Uid=%s, if you need.</p>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2011/08/Authenticaton-Config.png"><img class="alignnone size-full wp-image-917" title="Authenticaton Config" src="https://blog.stefcho.eu/wp-content/uploads/2011/08/Authenticaton-Config.png" alt="" width="888" height="732" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/08/Authenticaton-Config.png 888w,https://blog.stefcho.eu/wp-content/uploads/2011/08/Authenticaton-Config-300x247.png 300w" sizes="(max-width: 888px) 100vw, 888px"></a></p>
<p><strong>Testing</strong></p>
<p>Just for reference this is my test user.<strong><br></strong></p>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2011/08/LDAP-Admin.png"><img class="alignnone size-full wp-image-918" title="LDAP Admin" src="https://blog.stefcho.eu/wp-content/uploads/2011/08/LDAP-Admin.png" alt="" width="742" height="409" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/08/LDAP-Admin.png 742w,https://blog.stefcho.eu/wp-content/uploads/2011/08/LDAP-Admin-300x165.png 300w" sizes="(max-width: 742px) 100vw, 742px"></a></p>
<p>After preforming the OpenVPN configuration, enter the user name and the password.</p>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2011/08/OpenVPN-Login.png"><img class="alignnone size-full wp-image-920" title="OpenVPN Login" src="https://blog.stefcho.eu/wp-content/uploads/2011/08/OpenVPN-Login.png" alt="" width="577" height="372" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/08/OpenVPN-Login.png 577w,https://blog.stefcho.eu/wp-content/uploads/2011/08/OpenVPN-Login-300x193.png 300w" sizes="(max-width: 577px) 100vw, 577px"></a></p>
<p>If everything is OK, you should be successfully connected and see something similar in the OpenVPN logs:</p>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2011/08/OpenVPN-server-Log.png"><img class="alignnone size-full wp-image-919" title="OpenVPN server Log" src="https://blog.stefcho.eu/wp-content/uploads/2011/08/OpenVPN-server-Log.png" alt="" width="805" height="423" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/08/OpenVPN-server-Log.png 805w,https://blog.stefcho.eu/wp-content/uploads/2011/08/OpenVPN-server-Log-300x157.png 300w" sizes="(max-width: 805px) 100vw, 805px"></a></p>
<p>You can also test the connection using the Diagnostics > Authentication, Select the Authentication Server, in my case the CentOS OpenLDAP connection is named Test. Enter Username and Password, and see the result.</p>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2011/08/Test-Authentication.png"><img class="alignnone size-full wp-image-943" title="Test Authentication" src="https://blog.stefcho.eu/wp-content/uploads/2011/08/Test-Authentication.png" alt="" width="881" height="342" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/08/Test-Authentication.png 881w,https://blog.stefcho.eu/wp-content/uploads/2011/08/Test-Authentication-300x116.png 300w" sizes="(max-width: 881px) 100vw, 881px"></a></p>
<p>If you get error, you can check the Status> System Logs on the System leaf for errors.</p>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2011/08/Test-Authenticaion-Error-Msg.png"><img class="alignnone size-full wp-image-944" title="Test Authenticaion Error Msg" src="https://blog.stefcho.eu/wp-content/uploads/2011/08/Test-Authenticaion-Error-Msg.png" alt="" width="886" height="387" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/08/Test-Authenticaion-Error-Msg.png 886w,https://blog.stefcho.eu/wp-content/uploads/2011/08/Test-Authenticaion-Error-Msg-300x131.png 300w" sizes="(max-width: 886px) 100vw, 886px"></a></p>
<p>I’ve got this error when the CentOS server was turn off.</p>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2011/08/Test-Authenticaion-Error-System-Logs.png"><img class="alignnone size-full wp-image-945" title="Test Authenticaion Error System Logs" src="https://blog.stefcho.eu/wp-content/uploads/2011/08/Test-Authenticaion-Error-System-Logs.png" alt="" width="887" height="262" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/08/Test-Authenticaion-Error-System-Logs.png 887w,https://blog.stefcho.eu/wp-content/uploads/2011/08/Test-Authenticaion-Error-System-Logs-300x88.png 300w" sizes="(max-width: 887px) 100vw, 887px"></a></p>
<p><strong>Issues</strong></p>
<p>The issues that I faced was the problem with selecting the OU in which my users resides. Hope this will be fixed in future versions<strong>. </strong>On the CentOS side the problems were releted with the changes of OpenLDAP in the 6.0 version.<strong><br></strong></p>
<p><strong> Conclusion</strong></p>
<p>That’s it. Thank you for reading.</p>
	</div>

	<footer class="entry-footer"><span class="cat-links">Posted in <a href="https://blog.stefcho.eu/category/technical/" rel="category tag">Technical</a></span><span class="tags-links">Tagged <a href="https://blog.stefcho.eu/tag/centos/" rel="tag">CentOS</a>, <a href="https://blog.stefcho.eu/tag/ldap/" rel="tag">LDAP</a>, <a href="https://blog.stefcho.eu/tag/openldap/" rel="tag">OpenLDAP</a>, <a href="https://blog.stefcho.eu/tag/openvpn/" rel="tag">OpenVPN</a>, <a href="https://blog.stefcho.eu/tag/pfsense/" rel="tag">pfSense</a>, <a href="https://blog.stefcho.eu/tag/pfsense-2-0-rc3/" rel="tag">pfSense 2.0 RC3</a>, <a href="https://blog.stefcho.eu/tag/technical/" rel="tag">Technical</a></span><span class="comments-link"><a href="https://blog.stefcho.eu/openvpn-on-pfsense-2-0-rc3-with-openldap-authentication-on-centos-5-6/#comments">2 Comments</a></span>	</footer></article><nav class="navigation posts-navigation" role="navigation"><h2 class="screen-reader-text">Posts navigation</h2>
		<div class="nav-links"><div class="nav-previous"><a href="https://blog.stefcho.eu/tag/pfsense/page/2/">Older posts</a></div></div>
	</nav></main></div>
			</div>
			<div class="columns small-12 medium-4">
				
<aside id="secondary" class="widget-area" role="complementary"><section id="tag_cloud-3" class="widget widget_tag_cloud"><h2 class="widget-title">Tags</h2><div class="tagcloud"><a href="https://blog.stefcho.eu/tag/adds/" class="tag-cloud-link tag-link-73 tag-link-position-1" style="font-size: 10.082644628099pt;" aria-label="ADDS (2 items)">ADDS</a>
<a href="https://blog.stefcho.eu/tag/aes-ni/" class="tag-cloud-link tag-link-114 tag-link-position-2" style="font-size: 10.082644628099pt;" aria-label="AES-NI (2 items)">AES-NI</a>
<a href="https://blog.stefcho.eu/tag/asterisk/" class="tag-cloud-link tag-link-55 tag-link-position-3" style="font-size: 10.082644628099pt;" aria-label="Asterisk (2 items)">Asterisk</a>
<a href="https://blog.stefcho.eu/tag/asus/" class="tag-cloud-link tag-link-60 tag-link-position-4" style="font-size: 11.471074380165pt;" aria-label="ASUS (3 items)">ASUS</a>
<a href="https://blog.stefcho.eu/tag/azure/" class="tag-cloud-link tag-link-94 tag-link-position-5" style="font-size: 12.628099173554pt;" aria-label="Azure (4 items)">Azure</a>
<a href="https://blog.stefcho.eu/tag/captive-portal/" class="tag-cloud-link tag-link-83 tag-link-position-6" style="font-size: 11.471074380165pt;" aria-label="Captive Portal (3 items)">Captive Portal</a>
<a href="https://blog.stefcho.eu/tag/cell-phone/" class="tag-cloud-link tag-link-64 tag-link-position-7" style="font-size: 8pt;" aria-label="Cell Phone (1 item)">Cell Phone</a>
<a href="https://blog.stefcho.eu/tag/centos/" class="tag-cloud-link tag-link-86 tag-link-position-8" style="font-size: 8pt;" aria-label="CentOS (1 item)">CentOS</a>
<a href="https://blog.stefcho.eu/tag/certification/" class="tag-cloud-link tag-link-105 tag-link-position-9" style="font-size: 10.082644628099pt;" aria-label="Certification (2 items)">Certification</a>
<a href="https://blog.stefcho.eu/tag/creative/" class="tag-cloud-link tag-link-66 tag-link-position-10" style="font-size: 10.082644628099pt;" aria-label="Creative (2 items)">Creative</a>
<a href="https://blog.stefcho.eu/tag/dd-wrt/" class="tag-cloud-link tag-link-57 tag-link-position-11" style="font-size: 14.363636363636pt;" aria-label="DD-WRT (6 items)">DD-WRT</a>
<a href="https://blog.stefcho.eu/tag/dns/" class="tag-cloud-link tag-link-92 tag-link-position-12" style="font-size: 8pt;" aria-label="DNS (1 item)">DNS</a>
<a href="https://blog.stefcho.eu/tag/hyper-v/" class="tag-cloud-link tag-link-67 tag-link-position-13" style="font-size: 12.628099173554pt;" aria-label="Hyper-V (4 items)">Hyper-V</a>
<a href="https://blog.stefcho.eu/tag/ldap/" class="tag-cloud-link tag-link-74 tag-link-position-14" style="font-size: 10.082644628099pt;" aria-label="LDAP (2 items)">LDAP</a>
<a href="https://blog.stefcho.eu/tag/learning/" class="tag-cloud-link tag-link-102 tag-link-position-15" style="font-size: 10.082644628099pt;" aria-label="Learning (2 items)">Learning</a>
<a href="https://blog.stefcho.eu/tag/linksys/" class="tag-cloud-link tag-link-56 tag-link-position-16" style="font-size: 8pt;" aria-label="Linksys (1 item)">Linksys</a>
<a href="https://blog.stefcho.eu/tag/microsoft/" class="tag-cloud-link tag-link-63 tag-link-position-17" style="font-size: 11.471074380165pt;" aria-label="Microsoft (3 items)">Microsoft</a>
<a href="https://blog.stefcho.eu/tag/mikrotik-routerboard-rb250g/" class="tag-cloud-link tag-link-79 tag-link-position-18" style="font-size: 8pt;" aria-label="Mikrotik RouterBoard RB250G (1 item)">Mikrotik RouterBoard RB250G</a>
<a href="https://blog.stefcho.eu/tag/network/" class="tag-cloud-link tag-link-65 tag-link-position-19" style="font-size: 19.107438016529pt;" aria-label="Network (17 items)">Network</a>
<a href="https://blog.stefcho.eu/tag/openldap/" class="tag-cloud-link tag-link-87 tag-link-position-20" style="font-size: 8pt;" aria-label="OpenLDAP (1 item)">OpenLDAP</a>
<a href="https://blog.stefcho.eu/tag/openvpn/" class="tag-cloud-link tag-link-72 tag-link-position-21" style="font-size: 16.561983471074pt;" aria-label="OpenVPN (10 items)">OpenVPN</a>
<a href="https://blog.stefcho.eu/tag/openwrt/" class="tag-cloud-link tag-link-71 tag-link-position-22" style="font-size: 8pt;" aria-label="OpenWrt (1 item)">OpenWrt</a>
<a href="https://blog.stefcho.eu/tag/pfcenter/" class="tag-cloud-link tag-link-85 tag-link-position-23" style="font-size: 8pt;" aria-label="pfCenter (1 item)">pfCenter</a>
<a href="https://blog.stefcho.eu/tag/pfsemse/" class="tag-cloud-link tag-link-95 tag-link-position-24" style="font-size: 8pt;" aria-label="pfSemse (1 item)">pfSemse</a>
<a href="https://blog.stefcho.eu/tag/pfsense/" class="tag-cloud-link tag-link-61 tag-link-position-25" style="font-size: 22pt;" aria-label="pfSense (31 items)">pfSense</a>
<a href="https://blog.stefcho.eu/tag/pfsense-2-0-rc1/" class="tag-cloud-link tag-link-81 tag-link-position-26" style="font-size: 13.553719008264pt;" aria-label="pfSense 2.0 RC1 (5 items)">pfSense 2.0 RC1</a>
<a href="https://blog.stefcho.eu/tag/pfsense-2-0-rc3/" class="tag-cloud-link tag-link-84 tag-link-position-27" style="font-size: 14.363636363636pt;" aria-label="pfSense 2.0 RC3 (6 items)">pfSense 2.0 RC3</a>
<a href="https://blog.stefcho.eu/tag/pfsense-2-2/" class="tag-cloud-link tag-link-90 tag-link-position-28" style="font-size: 11.471074380165pt;" aria-label="pfSense 2.2 (3 items)">pfSense 2.2</a>
<a href="https://blog.stefcho.eu/tag/pki/" class="tag-cloud-link tag-link-77 tag-link-position-29" style="font-size: 10.082644628099pt;" aria-label="PKI (2 items)">PKI</a>
<a href="https://blog.stefcho.eu/tag/radius/" class="tag-cloud-link tag-link-75 tag-link-position-30" style="font-size: 10.082644628099pt;" aria-label="RADIUS (2 items)">RADIUS</a>
<a href="https://blog.stefcho.eu/tag/raspberry-pi/" class="tag-cloud-link tag-link-108 tag-link-position-31" style="font-size: 10.082644628099pt;" aria-label="Raspberry Pi (2 items)">Raspberry Pi</a>
<a href="https://blog.stefcho.eu/tag/routing/" class="tag-cloud-link tag-link-80 tag-link-position-32" style="font-size: 8pt;" aria-label="Routing (1 item)">Routing</a>
<a href="https://blog.stefcho.eu/tag/site-to-site/" class="tag-cloud-link tag-link-76 tag-link-position-33" style="font-size: 11.471074380165pt;" aria-label="Site To Site (3 items)">Site To Site</a>
<a href="https://blog.stefcho.eu/tag/technical/" class="tag-cloud-link tag-link-97 tag-link-position-34" style="font-size: 14.942148760331pt;" aria-label="Technical (7 items)">Technical</a>
<a href="https://blog.stefcho.eu/tag/uncategorized/" class="tag-cloud-link tag-link-96 tag-link-position-35" style="font-size: 8pt;" aria-label="Uncategorized (1 item)">Uncategorized</a>
<a href="https://blog.stefcho.eu/tag/vlan/" class="tag-cloud-link tag-link-78 tag-link-position-36" style="font-size: 8pt;" aria-label="VLAN (1 item)">VLAN</a>
<a href="https://blog.stefcho.eu/tag/vmware/" class="tag-cloud-link tag-link-62 tag-link-position-37" style="font-size: 14.942148760331pt;" aria-label="VMWare (7 items)">VMWare</a>
<a href="https://blog.stefcho.eu/tag/voip/" class="tag-cloud-link tag-link-59 tag-link-position-38" style="font-size: 10.082644628099pt;" aria-label="VoIP (2 items)">VoIP</a>
<a href="https://blog.stefcho.eu/tag/vyatta/" class="tag-cloud-link tag-link-70 tag-link-position-39" style="font-size: 8pt;" aria-label="Vyatta (1 item)">Vyatta</a>
<a href="https://blog.stefcho.eu/tag/web-sites/" class="tag-cloud-link tag-link-93 tag-link-position-40" style="font-size: 8pt;" aria-label="Web Sites (1 item)">Web Sites</a>
<a href="https://blog.stefcho.eu/tag/windows-server-8/" class="tag-cloud-link tag-link-88 tag-link-position-41" style="font-size: 8pt;" aria-label="Windows Server 8 (1 item)">Windows Server 8</a>
<a href="https://blog.stefcho.eu/tag/windows-server-2008-r2/" class="tag-cloud-link tag-link-68 tag-link-position-42" style="font-size: 12.628099173554pt;" aria-label="Windows Server 2008 R2 (4 items)">Windows Server 2008 R2</a>
<a href="https://blog.stefcho.eu/tag/windows-server-2012-r2/" class="tag-cloud-link tag-link-91 tag-link-position-43" style="font-size: 8pt;" aria-label="Windows Server 2012 R2 (1 item)">Windows Server 2012 R2</a>
<a href="https://blog.stefcho.eu/tag/wireless/" class="tag-cloud-link tag-link-82 tag-link-position-44" style="font-size: 8pt;" aria-label="Wireless (1 item)">Wireless</a>
<a href="https://blog.stefcho.eu/tag/workstation-8/" class="tag-cloud-link tag-link-89 tag-link-position-45" style="font-size: 8pt;" aria-label="Workstation 8 (1 item)">Workstation 8</a></div>
</section><section id="archives-3" class="widget widget_archive"><h2 class="widget-title">Archives</h2>		<ul><li><a href="https://blog.stefcho.eu/2019/07/">July 2019</a></li>
	<li><a href="https://blog.stefcho.eu/2019/05/">May 2019</a></li>
	<li><a href="https://blog.stefcho.eu/2019/03/">March 2019</a></li>
	<li><a href="https://blog.stefcho.eu/2019/02/">February 2019</a></li>
	<li><a href="https://blog.stefcho.eu/2018/10/">October 2018</a></li>
	<li><a href="https://blog.stefcho.eu/2018/08/">August 2018</a></li>
	<li><a href="https://blog.stefcho.eu/2016/03/">March 2016</a></li>
	<li><a href="https://blog.stefcho.eu/2015/04/">April 2015</a></li>
	<li><a href="https://blog.stefcho.eu/2015/03/">March 2015</a></li>
	<li><a href="https://blog.stefcho.eu/2015/01/">January 2015</a></li>
	<li><a href="https://blog.stefcho.eu/2012/02/">February 2012</a></li>
	<li><a href="https://blog.stefcho.eu/2011/10/">October 2011</a></li>
	<li><a href="https://blog.stefcho.eu/2011/09/">September 2011</a></li>
	<li><a href="https://blog.stefcho.eu/2011/08/">August 2011</a></li>
	<li><a href="https://blog.stefcho.eu/2011/07/">July 2011</a></li>
	<li><a href="https://blog.stefcho.eu/2011/06/">June 2011</a></li>
	<li><a href="https://blog.stefcho.eu/2011/05/">May 2011</a></li>
	<li><a href="https://blog.stefcho.eu/2011/04/">April 2011</a></li>
	<li><a href="https://blog.stefcho.eu/2011/03/">March 2011</a></li>
	<li><a href="https://blog.stefcho.eu/2011/02/">February 2011</a></li>
	<li><a href="https://blog.stefcho.eu/2010/07/">July 2010</a></li>
		</ul></section><section id="custom_html-3" class="widget_text widget widget_custom_html"><div class="textwidget custom-html-widget"><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><ins class="adsbygoogle" style="display:inline-block;width:160px;height:600px" data-ad-client="ca-pub-3838187216577892" data-ad-slot="5149186217"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script></div></section></aside></div>
		</div>
	</section></div>

	<footer id="colophon" class="site-footer section-fullwidth"><div class="row">
			<div class="columns small-12">
				<div class="site-info">
					<a href="https://wordpress.org/">Proudly powered by WordPress</a>
					<span class="sep"> | </span>
					Theme: micro, developed by <a href="http://devrix.com">DevriX</a>.				</div>
			</div>
		</div>
	</footer></div>

<script type="text/javascript" src="https://blog.stefcho.eu/wp-content/themes/micro/assets/scripts/scripts.min.js"></script><script type="text/javascript">
/* <![CDATA[ */
var wpgdprcData = {"ajaxURL":"https:\/\/blog.stefcho.eu\/wp-admin\/admin-ajax.php","ajaxSecurity":"d07ce61020","isMultisite":"","path":"\/","blogId":""};
/* ]]> */
</script><script type="text/javascript" src="https://blog.stefcho.eu/wp-content/plugins/wp-gdpr-compliance/assets/js/front.js"></script></body></html>
