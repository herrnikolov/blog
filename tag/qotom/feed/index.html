<?xml version="1.0" encoding="UTF-8"?><rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:wfw="http://wellformedweb.org/CommentAPI/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
	>

<channel>
	<title>Qotom &#8211; Stefcho&#039;s Tech Blog</title>
	<atom:link href="https://blog.stefcho.eu/tag/qotom/feed/" rel="self" type="application/rss+xml" />
	<link>http://blog.stefcho.eu/</link>
	<description>Software Development, Cloud, DevOps and PfSense</description>
	<lastBuildDate>Sun, 17 Mar 2019 10:41:35 +0000</lastBuildDate>
	<language>en-US</language>
	<sy:updatePeriod>
	hourly	</sy:updatePeriod>
	<sy:updateFrequency>
	1	</sy:updateFrequency>
	<generator>https://wordpress.org/?v=5.2</generator>

<image>
	<url>https://blog.stefcho.eu/wp-content/uploads/2018/10/cropped-0-32x32.jpg</url>
	<title>Qotom &#8211; Stefcho&#039;s Tech Blog</title>
	<link>http://blog.stefcho.eu/</link>
	<width>32</width>
	<height>32</height>
</image> 
	<item>
		<title>pfSense One Last Time</title>
		<link>https://blog.stefcho.eu/pfsense-one-last-time/</link>
				<pubDate>Sun, 17 Mar 2019 10:41:33 +0000</pubDate>
		<dc:creator><![CDATA[Stefan]]></dc:creator>
				<category><![CDATA[Technical]]></category>
		<category><![CDATA[AES-NI]]></category>
		<category><![CDATA[pfSense]]></category>
		<category><![CDATA[Qotom]]></category>

		<guid isPermaLink="false">https://blog.stefcho.eu/?p=1277</guid>
				<description><![CDATA[<p>I’ve built my first pfSense router almost a decade ago. Fun fact is that the device is still working flawlessly, Alix2d13 is a beast. At that time 100 Mbps was more than enough compared to the offerings of the ISPs. Fast forward ten years, my WAN links are above this speed. CPU and RAM combined [&#8230;]</p>
<p>The post <a rel="nofollow" href="https://blog.stefcho.eu/pfsense-one-last-time/">pfSense One Last Time</a> appeared first on <a rel="nofollow" href="http://blog.stefcho.eu/">Stefcho&#039;s Tech Blog</a>.</p>
]]></description>
								<content:encoded><![CDATA[
<p>I’ve built my first pfSense router almost a decade ago. Fun fact is that the device is still working flawlessly, Alix2d13 is a beast. At that time 100 Mbps was more than enough compared to the offerings of the ISPs. Fast forward ten years, my WAN links are above this speed. CPU and RAM combined with the embedded architecture impose heavy limitations on the plugin options.<br><br>Still remember the time when equipped with console cable hooked to the  Alix running pfSense v 1.2.2. Holding tight to my hard copy of <em>pfSense  The Definitive Guide to the Open Source Firewall and Router Distribution</em>  Book. I’ve typed on the terminal. These days are long gone. <br><br>Currently running on a Dual Core Intel CPU with 8 GB RAM and SSD, pfSense is v 2.4.4. The book is freely available online.  It makes very little sense to me writing tutorials on how to do this and that any more. The only exception are some obscure cases that are  rare and sharing them will be mutually beneficial. <br><br>In retrospective PfSense has gone a long way for the past 9 years. The  project changed hands and lost some of its founding father. These changes steered the project in a direction that is not so much to my  liking.  To get a taste please review the following quotes: <br><br><a rel="noreferrer noopener" aria-label="pfSense 2.5 and AES-NI (opens in a new tab)" href="https://www.netgate.com/blog/pfsense-2-5-and-aes-ni.html" target="_blank">pfSense 2.5 and AES-NI</a></p>



<blockquote class="wp-block-quote"><p>pfSense version 2.5 will be based on FreeBSD 12, which should bring route-based IPsec, along with support for our integrated management platform, NRDM (more about this soon), and a number of other features.</p><p>With the increasing ubiquity of computing devices permeating all areas of our lives at work and at home, the need for encryption has become more important than ever. Desktops, laptops, smart phones, tablets, and many other devices all share this need to be able to encrypt sensitive information. Without encryption, everything you send over a network (or even store on a local storage device) is in the open, for anyone to read anytime he wants to read or even change it.</p><p>While we’re not revealing the extent of our plans, we do want to give early notice that, in order to support the increased cryptographic loads that we see as part of pfSense version 2.5, pfSense Community Edition version 2.5 will include a requirement that the CPU supports AES-NI. On ARM-based systems, the additional load from AES operations will be offloaded to on-die cryptographic accelerators, such as the one found on our SG-1000. ARM v8 CPUs include instructions like AES-NI that can be used to increase performance of the AES algorithm on these platforms.<br></p><p>The AES-NI instruction set extensions are used to optimize encryption and decryption algorithms on select Intel and AMD processors. Intel announced AES-NI in 2008 and released supported CPUs late 2010 with the Westmere architecture. AMD announced and shipped AES-NI support in 2010, starting with Bulldozer.</p><p>Please remember these requirements when you are considering components for your pfSense system.</p></blockquote>



<p><a href="https://www.netgate.com/blog/more-on-aes-ni.html" target="_blank" rel="noreferrer noopener" aria-label="More on AES-NI (opens in a new tab)">More on AES-NI</a></p>



<blockquote class="wp-block-quote"><p>There have been some concerns expressed about the requirement for AES-NI (or other offload) with pfSense 2.5, as announced two days ago.</p><p>Some complained that, since they don’t use VPN, they don’t need AES-NI. While I wasn’t quite ready to say more about the “3.0” effort, it is the reason for the new requirement for pfSense 2.5 and beyond.</p><p>With AES you either design, test, and verify a bitslice software implementation, (giving up a lot of performance in the process), leverage hardware offloads, or leave the resulting system open to several known attacks. We have selected the “leverage hardware offloads” path. The other two options are either unthinkable, or involve a lot of effort for diminishing returns.</p><p>So why the requirement?</p><p>Future versions of pfSense have a new management model. We’re leveraging YANG, via RESTCONF.</p><p>The webGUI will be present either on our cloud service or on-device, both talking to the ‘back-end’ (written in ‘C’) on the device via a RESTCONF interface. This is just as I said back in February 2015.</p><p>We’re leveraging AES-GCM inside TLS as the transport layer, because RFC 7525 REQUIRES it, and the RESTCONF standard, RFC 8040, says RFC 7525 is a SHOULD.</p><p>AES-GCM in particular has problems with side-channel attacks on pure software implementations. ChaCha20, which nicely avoids these issues when in software, isn’t an option. This is because: a) it’s not RFC-compliant, and b) there are currently no acceleration offloads for it, and the situation is that there could be thousands, or tens of thousands of pfSense instances hitting a single (clustered) instance of our cloud management platform.</p><p>So the choice is either to design, engineer and release a less-than-strong product, or require AES-NI or other offloads.</p><p>The entire PHP layer is being eliminated in the “3.0” effort, and we’re simply too small to continue to maintain both the current, organically-grown PHP layer (100K lines of PHP in 200 files) and the new, pure JS GUI (client) architected as a single page web application.</p><p>So there is an excellent chance that pfSense 2.5 will use the new webGUI, talking to our RESTCONF back-end.</p><p>As should be obvious by now, this isn’t about VPN.</p></blockquote>



<p><a href="https://www.netgate.com/blog/its-still-free-to-use.html" target="_blank" rel="noreferrer noopener" aria-label="It’s Still Free to Use (opens in a new tab)">It’s Still Free to Use</a></p>



<blockquote class="wp-block-quote"><p>If you’ve been testing 2.4 snapshots and updates, you’ve already seen a lot of new features. You have probably also seen a new pop-up in the webGUI.</p><p>Trademark Policy pop-up<br>While the pop-up is new, the message isn’t.  On January 27, 2017 we posted a blog Announcing a new trademark policy  for pfSense. This pop-up is a simple reminder that ensures everyone sees  and acknowledges the trademark policy. </p></blockquote>



<div class="wp-block-image"><figure class="aligncenter"><img src="https://www.netgate.com/assets/img/blog/2017/pop-up.jpg" alt=""/></figure></div>



<blockquote class="wp-block-quote"><p>For our end users and  customers, nothing has changed. pfSense Community Edition (CE) remains a  free and open product available for your personal or business use. This  is true if you buy hardware from us or not. This notice addresses those  who take pfSense CE and sell it, infringing our policy while not giving  back to the project and directly competing with Netgate.</p><p>At  Netgate, we engineer, build, test, and give pfSense software to the  community for free. Accepting the pop-up affirms your agreement and  right to use, but not sell, pfSense software. </p></blockquote>



<p></p>



<p>After reading these articles and looking at my old faithful Alix. It is time to look for alternatives. One possibility is <a href="https://opnsense.org/" target="_blank" rel="noreferrer noopener" aria-label="OPNsense (opens in a new tab)">OPNsense</a></p>



<div class="wp-block-image"><figure class="aligncenter"><img src="https://opnsense.org/wp-content/themes/OPNsense/assets/img/250x50xopnsense.png.pagespeed.ic.T0VFZY72q3.webp" alt=""/></figure></div>



<p>These two articles condense a long story, hope you find them informative:<br>I&#8217;ll share just a small quotes from them.  </p>



<p><a rel="noreferrer noopener" href="https://trickey.io/posts/opn-vs-pf/" target="_blank">OPN VS. PF</a><br></p>



<blockquote class="wp-block-quote"><p> OPNSense is a fork of PFSense, and PFSense is itself a fork of m0n0wall. </p></blockquote>



<p><br>The story gets even more interesting: <br><a rel="noreferrer noopener" aria-label="Building a BSD home router (pt. 6): pfSense vs. OPNsens (opens in a new tab)" href="https://eerielinux.wordpress.com/2017/06/25/building-a-bsd-home-router-pt-6-pfsense-vs-opnsense/" target="_blank">Building a BSD home router (pt. 6): pfSense vs. OPNsens</a></p>



<blockquote class="wp-block-quote"><p> <br>Once upon a time… in 2003 there was a new firewall OS called m0n0wall. Manuel Kasper had built it on a stripped down version of FreeBSD. There had been small firewalls before, but Kasper’s innovation was to put a Web GUI on top of it so that the firewall’s settings could be controlled from the browser! It did not take long and m0n0wall took the world by storm. However Kasper’s project focused on embedded hardware. So only a while later a fork was created which geared towards more powerful hardware. The fork’s name? You’ve guessed it: pfSense. In 2015 Manuel Kasper officially ended the m0n0wall project (because recent versions of FreeBSD had been grown too big to be easily usable for what he did with it in the past). And guess what he did: He gave <a href="https://opnsense.org/m0n0wall">his official blessing</a> and recommends to migrate to and support OPNsense! </p></blockquote>



<p>So if I want to go with pfSense I need to get a box with CPU supporting these AES-NI instructions. For this either get a branded box or build one on my own. Naturally I&#8217;ve chosen the latter.  </p>



<p>In selecting the box I have to thank to the great members of the community forum of pfSense. <br><a rel="noreferrer noopener" aria-label="Alternative to Qotom Q190G4 with AES-NI? (opens in a new tab)" href="https://forum.netgate.com/topic/115489/alternative-to-qotom-q190g4-with-aes-ni" target="_blank">Alternative to Qotom Q190G4 with AES-NI?</a></p>



<p>My choice of box is this quiet beast:</p>



<p><a href="https://www.aliexpress.com/item/QOTOM-4-LAN-Mini-PC-with-Core-i3-4005U-i5-5250U-processor-and-4-Gigabit-NIC/32812678037.html" target="_blank" rel="noreferrer noopener" aria-label="QOTOM 4 LAN Mini PC with Core i3-4005U / i5-5250U processor and 4 Gigabit NIC, support AES-NI, Serial, Fanless Mini PC pfSense (opens in a new tab)">QOTOM 4 LAN Mini PC with Core i3-4005U / i5-5250U processor and 4 Gigabit NIC, support AES-NI, Serial, Fanless Mini PC pfSense</a></p>



<p>Product properties: i5-5250U, 8G RAM, 128G SSD + Q355G4 WIFI $ 350.42 </p>



<figure class="wp-block-image"><img src="https://ae01.alicdn.com/kf/HTB1jItsKH2pK1RjSZFsq6yNlXXaV/QOTOM-Pfsense-Mini-PC-with-Core-i3-i5-i7-processor-and-4-Gigabit-NICs-support-AES.jpg" alt=""/></figure>



<p>The fan less design combined with the SSD makes the operation completely silent. It keeps a steady 50 C temperature, with average CPU usage of 1-4 % and consumes only 7 – 10 % of the memory.  My hopes are that this will serve me for at least the next 10 years. As it is x86 architecture my choice of  OS dramatically widens leaving the door open to experiments with whatever comes to my mind.</p>
<p>The post <a rel="nofollow" href="https://blog.stefcho.eu/pfsense-one-last-time/">pfSense One Last Time</a> appeared first on <a rel="nofollow" href="http://blog.stefcho.eu/">Stefcho&#039;s Tech Blog</a>.</p>
]]></content:encoded>
										</item>
	</channel>
</rss>
