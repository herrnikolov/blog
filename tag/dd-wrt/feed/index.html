<?xml version="1.0" encoding="UTF-8"?><rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:wfw="http://wellformedweb.org/CommentAPI/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
	>

<channel>
	<title>DD-WRT &#8211; Stefcho&#039;s Tech Blog</title>
	<atom:link href="https://blog.stefcho.eu/tag/dd-wrt/feed/" rel="self" type="application/rss+xml" />
	<link>http://blog.stefcho.eu/</link>
	<description>Software Development, Cloud, DevOps and PfSense</description>
	<lastBuildDate>Mon, 18 Feb 2019 12:45:51 +0000</lastBuildDate>
	<language>en-US</language>
	<sy:updatePeriod>
	hourly	</sy:updatePeriod>
	<sy:updateFrequency>
	1	</sy:updateFrequency>
	<generator>https://wordpress.org/?v=5.2.1</generator>

<image>
	<url>https://blog.stefcho.eu/wp-content/uploads/2018/10/cropped-0-32x32.jpg</url>
	<title>DD-WRT &#8211; Stefcho&#039;s Tech Blog</title>
	<link>http://blog.stefcho.eu/</link>
	<width>32</width>
	<height>32</height>
</image> 
	<item>
		<title>1 : 1 NAT in pfSense and DD-WRT</title>
		<link>https://blog.stefcho.eu/1-1-nat-in-pfsense-and-dd-wrt/</link>
				<comments>https://blog.stefcho.eu/1-1-nat-in-pfsense-and-dd-wrt/#comments</comments>
				<pubDate>Fri, 08 Apr 2011 19:18:23 +0000</pubDate>
		<dc:creator><![CDATA[Stefan]]></dc:creator>
				<category><![CDATA[Technical]]></category>
		<category><![CDATA[DD-WRT]]></category>
		<category><![CDATA[pfSense]]></category>

		<guid isPermaLink="false">http://stefcho.azurewebsites.net/?p=455</guid>
				<description><![CDATA[<p>Sometimes you need to map internal machine IP to real IP address accessible from the Internet.As on the diagram if someone makes a request to 1.1.1.2, the request is send to 192.168.1.10. On DD-WRT you can use DMZ. This service is pseudo-DMZ, more commonly known outside of the SoHo routes as Exposed host. To set [&#8230;]</p>
<p>The post <a rel="nofollow" href="https://blog.stefcho.eu/1-1-nat-in-pfsense-and-dd-wrt/">1 : 1 NAT in pfSense and DD-WRT</a> appeared first on <a rel="nofollow" href="http://blog.stefcho.eu/">Stefcho&#039;s Tech Blog</a>.</p>
]]></description>
								<content:encoded><![CDATA[<p>Sometimes you need to map internal machine IP to real IP address accessible from the Internet.<a href="https://blog.stefcho.eu/wp-content/uploads/2011/04/1-to-1-NAT-Diagram.png"><img class="aligncenter size-full wp-image-456" title="1 to 1 NAT Diagram" src="https://blog.stefcho.eu/wp-content/uploads/2011/04/1-to-1-NAT-Diagram.png" alt="" width="439" height="217" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/04/1-to-1-NAT-Diagram.png 439w, https://blog.stefcho.eu/wp-content/uploads/2011/04/1-to-1-NAT-Diagram-300x148.png 300w" sizes="(max-width: 439px) 100vw, 439px" /></a>As on the diagram if someone makes a request to 1.1.1.2, the request is send to 192.168.1.10.</p>
<p>On DD-WRT you can use DMZ. This service is pseudo-DMZ, more commonly known outside of the SoHo routes as Exposed host.</p>
<p>To set is up enter the NAT / QoS section, then select the DMZ subsection, and configure your internal IP. For more information read <a href="http://de.wikipedia.org/wiki/Demilitarized_Zone" target="_blank">here</a></p>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2011/04/DD-WRT-DMZ.png"><img class="aligncenter size-large wp-image-457" title="DD-WRT---DMZ" src="https://blog.stefcho.eu/wp-content/uploads/2011/04/DD-WRT-DMZ-1024x367.png" alt="" width="586" height="210" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/04/DD-WRT-DMZ-1024x367.png 1024w, https://blog.stefcho.eu/wp-content/uploads/2011/04/DD-WRT-DMZ-300x107.png 300w, https://blog.stefcho.eu/wp-content/uploads/2011/04/DD-WRT-DMZ.png 1028w" sizes="(max-width: 586px) 100vw, 586px" /></a></p>
<p>Be warned that exposing all port of a machine to the Internet is very insecure, and even worse if the machine does not have some kind of firewall.</p>
<p>In pfSense, the alternative is to use VIP and 1:1 NAT</p>
<p>You can’t do that in 1.2.3, if you have only one WAN IP, if you do an error message appears: &#8220;The WAN IP address may not be used in a 1:1 rule&#8221;. Alternative is to make a port forward, which is much more preferable especially if not all ports are included.</p>
<p>So first you must add your additional WAN IP in the Virtual IP section.</p>
<p>For Type you can choose between Proxy ARP and CARP, detailed explanation why check out <a href="http://doc.pfsense.org/index.php/What_are_Virtual_IP_Addresses%3F" target="_blank">here</a></p>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2011/04/pfSense-VIP-1.2.3.png"><img class="aligncenter size-full wp-image-458" title="pfSense-VIP-1.2.3" src="https://blog.stefcho.eu/wp-content/uploads/2011/04/pfSense-VIP-1.2.3.png" alt="" width="807" height="582" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/04/pfSense-VIP-1.2.3.png 807w, https://blog.stefcho.eu/wp-content/uploads/2011/04/pfSense-VIP-1.2.3-300x216.png 300w" sizes="(max-width: 807px) 100vw, 807px" /></a></p>
<p>Then create a 1 : 1 NAT rule</p>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2011/04/pfSense-NAT-1-to-1-1.2.3.png"><img class="aligncenter size-full wp-image-461" title="pfSense-NAT-1-to-1-1.2.3" src="https://blog.stefcho.eu/wp-content/uploads/2011/04/pfSense-NAT-1-to-1-1.2.3.png" alt="" width="811" height="318" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/04/pfSense-NAT-1-to-1-1.2.3.png 811w, https://blog.stefcho.eu/wp-content/uploads/2011/04/pfSense-NAT-1-to-1-1.2.3-300x117.png 300w" sizes="(max-width: 811px) 100vw, 811px" /></a>Nothing special in the configuration, just enter your internal and external IPs and description for the rule.</p>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2011/04/pfSense-NAT-1-to-1-Details-1.2.3.png"><img class="aligncenter size-full wp-image-462" title="pfSense-NAT-1-to-1-Details-1.2.3" src="https://blog.stefcho.eu/wp-content/uploads/2011/04/pfSense-NAT-1-to-1-Details-1.2.3.png" alt="" width="810" height="413" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/04/pfSense-NAT-1-to-1-Details-1.2.3.png 810w, https://blog.stefcho.eu/wp-content/uploads/2011/04/pfSense-NAT-1-to-1-Details-1.2.3-300x152.png 300w" sizes="(max-width: 810px) 100vw, 810px" /></a></p>
<p>You must make a firewall rule for all this to work, enter the internal LAN IP address as destination.</p>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2011/04/pfSense-Firewall-Rule-1.2.3.png"><img class="aligncenter size-full wp-image-470" title="pfSense-Firewall-Rule-1.2.3" src="https://blog.stefcho.eu/wp-content/uploads/2011/04/pfSense-Firewall-Rule-1.2.3.png" alt="" width="816" height="664" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/04/pfSense-Firewall-Rule-1.2.3.png 816w, https://blog.stefcho.eu/wp-content/uploads/2011/04/pfSense-Firewall-Rule-1.2.3-300x244.png 300w" sizes="(max-width: 816px) 100vw, 816px" /></a></p>
<p>On pfSense 2.0 RC1, except the huge amount of new options the only difference is the new option in the Virtual IP type selection. The IP Alias works fine in this setup. The other good news is that even if you have only one WAN IP address you can use is in such setup. The bad news is that you do use it you can’t use your WAN IP for anything else, all port on the WAN IP are mapped to the machine on the LAN.</p>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2011/04/pfSense-VIP-2.0.png"><img class="aligncenter size-full wp-image-482" title="pfSense-VIP-2.0" src="https://blog.stefcho.eu/wp-content/uploads/2011/04/pfSense-VIP-2.0.png" alt="" width="1012" height="604" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/04/pfSense-VIP-2.0.png 1012w, https://blog.stefcho.eu/wp-content/uploads/2011/04/pfSense-VIP-2.0-300x179.png 300w" sizes="(max-width: 1012px) 100vw, 1012px" /></a></p>
<p>Alright so far this was the case if you have need to publish only one IP, but if you need to do this for multiple machine and have more than one WAN IP address, the procedure is a little different.</p>
<p>On pfSense you just repeat the procedure as many times as you need.</p>
<p>On DD-WRT you can add some iptables rules.</p>
<p>Add these lines to the Startup script:</p>
<blockquote><p>WANIF=`get_wanface`</p>
<p>ifconfig $WANIF:1 10.10.1.10 netmask 255.255.255.0 broadcast 10.10.1.255</p></blockquote>
<p>This adds the new WAN Ip to the Interface</p>
<p>Add these lines to the Firewall script:</p>
<blockquote><p>iptables -t nat -I PREROUTING -d 10.10.1.10 -j DNAT &#8211;to-destination 10.10.9.9</p>
<p>iptables -t nat -I POSTROUTING -s 10.10.9.9 -j -p all SNAT &#8211;to-source 10.10.1.10</p>
<p>iptables -I FORWARD -d 10.10.9.9 -p all &#8211;dport all -j ACCEPT</p></blockquote>
<p>10.10.1.10 – this is the WAN IP address</p>
<p>10.10.9.9 – this is the LAN IP address</p>
<p>Add these lines for as many IP as you have / need. More on the topic <a href="http://www.dd-wrt.com/wiki/index.php/One-to-one_NAT" target="_blank">here</a>.</p>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2011/04/DD-WRT-Scripts.png"><img class="aligncenter size-full wp-image-487" title="DD-WRT---Scripts" src="https://blog.stefcho.eu/wp-content/uploads/2011/04/DD-WRT-Scripts.png" alt="" width="789" height="641" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/04/DD-WRT-Scripts.png 789w, https://blog.stefcho.eu/wp-content/uploads/2011/04/DD-WRT-Scripts-300x243.png 300w" sizes="(max-width: 789px) 100vw, 789px" /></a></p>
<p>In conclusion, this is a very quick and dirty way to publish internal machine to the internet, bear in mind that this host is fully exposed to anybody on the Internet. I personally don’t recommend this way of publishing, but if need arise you can consider this an option. In future posts I will try to present more smart and safe ways to publish some service.</p>
<p>The post <a rel="nofollow" href="https://blog.stefcho.eu/1-1-nat-in-pfsense-and-dd-wrt/">1 : 1 NAT in pfSense and DD-WRT</a> appeared first on <a rel="nofollow" href="http://blog.stefcho.eu/">Stefcho&#039;s Tech Blog</a>.</p>
]]></content:encoded>
							<wfw:commentRss>https://blog.stefcho.eu/1-1-nat-in-pfsense-and-dd-wrt/feed/</wfw:commentRss>
		<slash:comments>5</slash:comments>
							</item>
		<item>
		<title>Running DD-WRT on VMware Workstation 7.1</title>
		<link>https://blog.stefcho.eu/running-dd-wrt-on-vmware-workstation-7-1/</link>
				<pubDate>Sun, 03 Apr 2011 12:19:08 +0000</pubDate>
		<dc:creator><![CDATA[Stefan]]></dc:creator>
				<category><![CDATA[Technical]]></category>
		<category><![CDATA[DD-WRT]]></category>
		<category><![CDATA[Network]]></category>
		<category><![CDATA[VMWare]]></category>

		<guid isPermaLink="false">http://stefcho.azurewebsites.net/?p=450</guid>
				<description><![CDATA[<p>Now that’s a tricky one.&#160; The only official build that could be found is here But it was published in the middle of 2008.&#160; It is a pure v24, no Service Packs, this by itself makes it useless. Guide for installing newer version is not available. After searching the forums, the only usable thread that [&#8230;]</p>
<p>The post <a rel="nofollow" href="https://blog.stefcho.eu/running-dd-wrt-on-vmware-workstation-7-1/">Running DD-WRT on VMware Workstation 7.1</a> appeared first on <a rel="nofollow" href="http://blog.stefcho.eu/">Stefcho&#039;s Tech Blog</a>.</p>
]]></description>
								<content:encoded><![CDATA[<p>Now that’s a tricky one.&nbsp; The only official build that could be found is <a href="ftp://www.dd-wrt.com/v24/X86/public/vmware/DDx86_pure.zip" target="_blank">here</a></p>
<p>But it was published in the middle of 2008.&nbsp; It is a pure v24, no Service Packs, this by itself makes it useless.</p>
<p>Guide for installing newer version is not available.</p>
<p>After searching the forums, the only usable thread that I found is this: <a href="http://www.dd-wrt.com/phpBB2/viewtopic.php?t=9998" target="_blank">VMware ready to use ..</a></p>
<p>Here stalonge share a pre-installed virtual machine ready to use.</p>
<p>My recommendation is to Restore it to Factory Default, and configure it to your preference.</p>
<p>The post <a rel="nofollow" href="https://blog.stefcho.eu/running-dd-wrt-on-vmware-workstation-7-1/">Running DD-WRT on VMware Workstation 7.1</a> appeared first on <a rel="nofollow" href="http://blog.stefcho.eu/">Stefcho&#039;s Tech Blog</a>.</p>
]]></content:encoded>
										</item>
		<item>
		<title>My Network Laboratory</title>
		<link>https://blog.stefcho.eu/my-network-laboratory/</link>
				<comments>https://blog.stefcho.eu/my-network-laboratory/#comments</comments>
				<pubDate>Tue, 29 Mar 2011 17:24:44 +0000</pubDate>
		<dc:creator><![CDATA[Stefan]]></dc:creator>
				<category><![CDATA[Technical]]></category>
		<category><![CDATA[DD-WRT]]></category>
		<category><![CDATA[Network]]></category>
		<category><![CDATA[OpenWrt]]></category>
		<category><![CDATA[pfSense]]></category>
		<category><![CDATA[VMWare]]></category>
		<category><![CDATA[Vyatta]]></category>

		<guid isPermaLink="false">http://stefcho.azurewebsites.net/?p=438</guid>
				<description><![CDATA[<p>The easiest way to learn is by practice. This is especially true in IT. I have to lab out the migration from pfSense 1.2.3 to 2.0 RC1. Furthermore I have a site-to-site VPN setup that must be tested too. I decided to expand my laboratory setup to house not just the two versions of pfSense, [&#8230;]</p>
<p>The post <a rel="nofollow" href="https://blog.stefcho.eu/my-network-laboratory/">My Network Laboratory</a> appeared first on <a rel="nofollow" href="http://blog.stefcho.eu/">Stefcho&#039;s Tech Blog</a>.</p>
]]></description>
								<content:encoded><![CDATA[<p><!--[if !mso]> <mce:style><!
v\:* {behavior:url(#default#VML);}
o\:* {behavior:url(#default#VML);}
w\:* {behavior:url(#default#VML);}
.shape {behavior:url(#default#VML);}
--> <!--[endif]--><!--[if gte mso 9]><xml> <o:OfficeDocumentSettings> <o:RelyOnVML /> <o:AllowPNG /> </o:OfficeDocumentSettings> </xml><![endif]--><!--[if gte mso 9]><xml> <w:WordDocument> <w:View>Normal</w:View> <w:Zoom>0</w:Zoom> <w:TrackMoves /> <w:TrackFormatting /> <w:PunctuationKerning /> <w:ValidateAgainstSchemas /> <w:SaveIfXMLInvalid>false</w:SaveIfXMLInvalid> <w:IgnoreMixedContent>false</w:IgnoreMixedContent> <w:AlwaysShowPlaceholderText>false</w:AlwaysShowPlaceholderText> <w:DoNotPromoteQF /> <w:LidThemeOther>EN-US</w:LidThemeOther> <w:LidThemeAsian>X-NONE</w:LidThemeAsian> <w:LidThemeComplexScript>X-NONE</w:LidThemeComplexScript> <w:Compatibility> <w:BreakWrappedTables /> <w:SnapToGridInCell /> <w:WrapTextWithPunct /> <w:UseAsianBreakRules /> <w:DontGrowAutofit /> <w:SplitPgBreakAndParaMark /> <w:EnableOpenTypeKerning /> <w:DontFlipMirrorIndents /> <w:OverrideTableStyleHps /> </w:Compatibility> <m:mathPr> <m:mathFont m:val="Cambria Math" /> <m:brkBin m:val="before" /> <m:brkBinSub m:val="&#45;-" /> <m:smallFrac m:val="off" /> <m:dispDef /> <m:lMargin m:val="0" /> <m:rMargin m:val="0" /> <m:defJc m:val="centerGroup" /> <m:wrapIndent m:val="1440" /> <m:intLim m:val="subSup" /> <m:naryLim m:val="undOvr" /> </m:mathPr></w:WordDocument> </xml><![endif]--><!--[if gte mso 9]><xml> <w:LatentStyles DefLockedState="false" DefUnhideWhenUsed="true"   DefSemiHidden="true" DefQFormat="false" DefPriority="99"   LatentStyleCount="267"> <w:LsdException Locked="false" Priority="0" SemiHidden="false"    UnhideWhenUsed="false" QFormat="true" Name="Normal" /> <w:LsdException Locked="false" Priority="9" SemiHidden="false"    UnhideWhenUsed="false" QFormat="true" Name="heading 1" /> <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 2" /> <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 3" /> <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 4" /> <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 5" /> <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 6" /> <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 7" /> <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 8" /> <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 9" /> <w:LsdException Locked="false" Priority="39" Name="toc 1" /> <w:LsdException Locked="false" Priority="39" Name="toc 2" /> <w:LsdException Locked="false" Priority="39" Name="toc 3" /> <w:LsdException Locked="false" Priority="39" Name="toc 4" /> <w:LsdException Locked="false" Priority="39" Name="toc 5" /> <w:LsdException Locked="false" Priority="39" Name="toc 6" /> <w:LsdException Locked="false" Priority="39" Name="toc 7" /> <w:LsdException Locked="false" Priority="39" Name="toc 8" /> <w:LsdException Locked="false" Priority="39" Name="toc 9" /> <w:LsdException Locked="false" Priority="35" QFormat="true" Name="caption" /> <w:LsdException Locked="false" Priority="10" SemiHidden="false"    UnhideWhenUsed="false" QFormat="true" Name="Title" /> <w:LsdException Locked="false" Priority="1" Name="Default Paragraph Font" /> <w:LsdException Locked="false" Priority="11" SemiHidden="false"    UnhideWhenUsed="false" QFormat="true" Name="Subtitle" /> <w:LsdException Locked="false" Priority="22" SemiHidden="false"    UnhideWhenUsed="false" QFormat="true" Name="Strong" /> <w:LsdException Locked="false" Priority="20" SemiHidden="false"    UnhideWhenUsed="false" QFormat="true" Name="Emphasis" /> <w:LsdException Locked="false" Priority="59" SemiHidden="false"    UnhideWhenUsed="false" Name="Table Grid" /> <w:LsdException Locked="false" UnhideWhenUsed="false" Name="Placeholder Text" /> <w:LsdException Locked="false" Priority="1" SemiHidden="false"    UnhideWhenUsed="false" QFormat="true" Name="No Spacing" /> <w:LsdException Locked="false" Priority="60" SemiHidden="false"    UnhideWhenUsed="false" Name="Light Shading" /> <w:LsdException Locked="false" Priority="61" SemiHidden="false"    UnhideWhenUsed="false" Name="Light List" /> <w:LsdException Locked="false" Priority="62" SemiHidden="false"    UnhideWhenUsed="false" Name="Light Grid" /> <w:LsdException Locked="false" Priority="63" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium Shading 1" /> <w:LsdException Locked="false" Priority="64" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium Shading 2" /> <w:LsdException Locked="false" Priority="65" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium List 1" /> <w:LsdException Locked="false" Priority="66" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium List 2" /> <w:LsdException Locked="false" Priority="67" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium Grid 1" /> <w:LsdException Locked="false" Priority="68" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium Grid 2" /> <w:LsdException Locked="false" Priority="69" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium Grid 3" /> <w:LsdException Locked="false" Priority="70" SemiHidden="false"    UnhideWhenUsed="false" Name="Dark List" /> <w:LsdException Locked="false" Priority="71" SemiHidden="false"    UnhideWhenUsed="false" Name="Colorful Shading" /> <w:LsdException Locked="false" Priority="72" SemiHidden="false"    UnhideWhenUsed="false" Name="Colorful List" /> <w:LsdException Locked="false" Priority="73" SemiHidden="false"    UnhideWhenUsed="false" Name="Colorful Grid" /> <w:LsdException Locked="false" Priority="60" SemiHidden="false"    UnhideWhenUsed="false" Name="Light Shading Accent 1" /> <w:LsdException Locked="false" Priority="61" SemiHidden="false"    UnhideWhenUsed="false" Name="Light List Accent 1" /> <w:LsdException Locked="false" Priority="62" SemiHidden="false"    UnhideWhenUsed="false" Name="Light Grid Accent 1" /> <w:LsdException Locked="false" Priority="63" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium Shading 1 Accent 1" /> <w:LsdException Locked="false" Priority="64" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium Shading 2 Accent 1" /> <w:LsdException Locked="false" Priority="65" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium List 1 Accent 1" /> <w:LsdException Locked="false" UnhideWhenUsed="false" Name="Revision" /> <w:LsdException Locked="false" Priority="34" SemiHidden="false"    UnhideWhenUsed="false" QFormat="true" Name="List Paragraph" /> <w:LsdException Locked="false" Priority="29" SemiHidden="false"    UnhideWhenUsed="false" QFormat="true" Name="Quote" /> <w:LsdException Locked="false" Priority="30" SemiHidden="false"    UnhideWhenUsed="false" QFormat="true" Name="Intense Quote" /> <w:LsdException Locked="false" Priority="66" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium List 2 Accent 1" /> <w:LsdException Locked="false" Priority="67" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium Grid 1 Accent 1" /> <w:LsdException Locked="false" Priority="68" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium Grid 2 Accent 1" /> <w:LsdException Locked="false" Priority="69" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium Grid 3 Accent 1" /> <w:LsdException Locked="false" Priority="70" SemiHidden="false"    UnhideWhenUsed="false" Name="Dark List Accent 1" /> <w:LsdException Locked="false" Priority="71" SemiHidden="false"    UnhideWhenUsed="false" Name="Colorful Shading Accent 1" /> <w:LsdException Locked="false" Priority="72" SemiHidden="false"    UnhideWhenUsed="false" Name="Colorful List Accent 1" /> <w:LsdException Locked="false" Priority="73" SemiHidden="false"    UnhideWhenUsed="false" Name="Colorful Grid Accent 1" /> <w:LsdException Locked="false" Priority="60" SemiHidden="false"    UnhideWhenUsed="false" Name="Light Shading Accent 2" /> <w:LsdException Locked="false" Priority="61" SemiHidden="false"    UnhideWhenUsed="false" Name="Light List Accent 2" /> <w:LsdException Locked="false" Priority="62" SemiHidden="false"    UnhideWhenUsed="false" Name="Light Grid Accent 2" /> <w:LsdException Locked="false" Priority="63" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium Shading 1 Accent 2" /> <w:LsdException Locked="false" Priority="64" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium Shading 2 Accent 2" /> <w:LsdException Locked="false" Priority="65" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium List 1 Accent 2" /> <w:LsdException Locked="false" Priority="66" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium List 2 Accent 2" /> <w:LsdException Locked="false" Priority="67" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium Grid 1 Accent 2" /> <w:LsdException Locked="false" Priority="68" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium Grid 2 Accent 2" /> <w:LsdException Locked="false" Priority="69" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium Grid 3 Accent 2" /> <w:LsdException Locked="false" Priority="70" SemiHidden="false"    UnhideWhenUsed="false" Name="Dark List Accent 2" /> <w:LsdException Locked="false" Priority="71" SemiHidden="false"    UnhideWhenUsed="false" Name="Colorful Shading Accent 2" /> <w:LsdException Locked="false" Priority="72" SemiHidden="false"    UnhideWhenUsed="false" Name="Colorful List Accent 2" /> <w:LsdException Locked="false" Priority="73" SemiHidden="false"    UnhideWhenUsed="false" Name="Colorful Grid Accent 2" /> <w:LsdException Locked="false" Priority="60" SemiHidden="false"    UnhideWhenUsed="false" Name="Light Shading Accent 3" /> <w:LsdException Locked="false" Priority="61" SemiHidden="false"    UnhideWhenUsed="false" Name="Light List Accent 3" /> <w:LsdException Locked="false" Priority="62" SemiHidden="false"    UnhideWhenUsed="false" Name="Light Grid Accent 3" /> <w:LsdException Locked="false" Priority="63" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium Shading 1 Accent 3" /> <w:LsdException Locked="false" Priority="64" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium Shading 2 Accent 3" /> <w:LsdException Locked="false" Priority="65" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium List 1 Accent 3" /> <w:LsdException Locked="false" Priority="66" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium List 2 Accent 3" /> <w:LsdException Locked="false" Priority="67" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium Grid 1 Accent 3" /> <w:LsdException Locked="false" Priority="68" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium Grid 2 Accent 3" /> <w:LsdException Locked="false" Priority="69" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium Grid 3 Accent 3" /> <w:LsdException Locked="false" Priority="70" SemiHidden="false"    UnhideWhenUsed="false" Name="Dark List Accent 3" /> <w:LsdException Locked="false" Priority="71" SemiHidden="false"    UnhideWhenUsed="false" Name="Colorful Shading Accent 3" /> <w:LsdException Locked="false" Priority="72" SemiHidden="false"    UnhideWhenUsed="false" Name="Colorful List Accent 3" /> <w:LsdException Locked="false" Priority="73" SemiHidden="false"    UnhideWhenUsed="false" Name="Colorful Grid Accent 3" /> <w:LsdException Locked="false" Priority="60" SemiHidden="false"    UnhideWhenUsed="false" Name="Light Shading Accent 4" /> <w:LsdException Locked="false" Priority="61" SemiHidden="false"    UnhideWhenUsed="false" Name="Light List Accent 4" /> <w:LsdException Locked="false" Priority="62" SemiHidden="false"    UnhideWhenUsed="false" Name="Light Grid Accent 4" /> <w:LsdException Locked="false" Priority="63" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium Shading 1 Accent 4" /> <w:LsdException Locked="false" Priority="64" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium Shading 2 Accent 4" /> <w:LsdException Locked="false" Priority="65" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium List 1 Accent 4" /> <w:LsdException Locked="false" Priority="66" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium List 2 Accent 4" /> <w:LsdException Locked="false" Priority="67" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium Grid 1 Accent 4" /> <w:LsdException Locked="false" Priority="68" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium Grid 2 Accent 4" /> <w:LsdException Locked="false" Priority="69" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium Grid 3 Accent 4" /> <w:LsdException Locked="false" Priority="70" SemiHidden="false"    UnhideWhenUsed="false" Name="Dark List Accent 4" /> <w:LsdException Locked="false" Priority="71" SemiHidden="false"    UnhideWhenUsed="false" Name="Colorful Shading Accent 4" /> <w:LsdException Locked="false" Priority="72" SemiHidden="false"    UnhideWhenUsed="false" Name="Colorful List Accent 4" /> <w:LsdException Locked="false" Priority="73" SemiHidden="false"    UnhideWhenUsed="false" Name="Colorful Grid Accent 4" /> <w:LsdException Locked="false" Priority="60" SemiHidden="false"    UnhideWhenUsed="false" Name="Light Shading Accent 5" /> <w:LsdException Locked="false" Priority="61" SemiHidden="false"    UnhideWhenUsed="false" Name="Light List Accent 5" /> <w:LsdException Locked="false" Priority="62" SemiHidden="false"    UnhideWhenUsed="false" Name="Light Grid Accent 5" /> <w:LsdException Locked="false" Priority="63" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium Shading 1 Accent 5" /> <w:LsdException Locked="false" Priority="64" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium Shading 2 Accent 5" /> <w:LsdException Locked="false" Priority="65" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium List 1 Accent 5" /> <w:LsdException Locked="false" Priority="66" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium List 2 Accent 5" /> <w:LsdException Locked="false" Priority="67" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium Grid 1 Accent 5" /> <w:LsdException Locked="false" Priority="68" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium Grid 2 Accent 5" /> <w:LsdException Locked="false" Priority="69" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium Grid 3 Accent 5" /> <w:LsdException Locked="false" Priority="70" SemiHidden="false"    UnhideWhenUsed="false" Name="Dark List Accent 5" /> <w:LsdException Locked="false" Priority="71" SemiHidden="false"    UnhideWhenUsed="false" Name="Colorful Shading Accent 5" /> <w:LsdException Locked="false" Priority="72" SemiHidden="false"    UnhideWhenUsed="false" Name="Colorful List Accent 5" /> <w:LsdException Locked="false" Priority="73" SemiHidden="false"    UnhideWhenUsed="false" Name="Colorful Grid Accent 5" /> <w:LsdException Locked="false" Priority="60" SemiHidden="false"    UnhideWhenUsed="false" Name="Light Shading Accent 6" /> <w:LsdException Locked="false" Priority="61" SemiHidden="false"    UnhideWhenUsed="false" Name="Light List Accent 6" /> <w:LsdException Locked="false" Priority="62" SemiHidden="false"    UnhideWhenUsed="false" Name="Light Grid Accent 6" /> <w:LsdException Locked="false" Priority="63" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium Shading 1 Accent 6" /> <w:LsdException Locked="false" Priority="64" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium Shading 2 Accent 6" /> <w:LsdException Locked="false" Priority="65" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium List 1 Accent 6" /> <w:LsdException Locked="false" Priority="66" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium List 2 Accent 6" /> <w:LsdException Locked="false" Priority="67" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium Grid 1 Accent 6" /> <w:LsdException Locked="false" Priority="68" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium Grid 2 Accent 6" /> <w:LsdException Locked="false" Priority="69" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium Grid 3 Accent 6" /> <w:LsdException Locked="false" Priority="70" SemiHidden="false"    UnhideWhenUsed="false" Name="Dark List Accent 6" /> <w:LsdException Locked="false" Priority="71" SemiHidden="false"    UnhideWhenUsed="false" Name="Colorful Shading Accent 6" /> <w:LsdException Locked="false" Priority="72" SemiHidden="false"    UnhideWhenUsed="false" Name="Colorful List Accent 6" /> <w:LsdException Locked="false" Priority="73" SemiHidden="false"    UnhideWhenUsed="false" Name="Colorful Grid Accent 6" /> <w:LsdException Locked="false" Priority="19" SemiHidden="false"    UnhideWhenUsed="false" QFormat="true" Name="Subtle Emphasis" /> <w:LsdException Locked="false" Priority="21" SemiHidden="false"    UnhideWhenUsed="false" QFormat="true" Name="Intense Emphasis" /> <w:LsdException Locked="false" Priority="31" SemiHidden="false"    UnhideWhenUsed="false" QFormat="true" Name="Subtle Reference" /> <w:LsdException Locked="false" Priority="32" SemiHidden="false"    UnhideWhenUsed="false" QFormat="true" Name="Intense Reference" /> <w:LsdException Locked="false" Priority="33" SemiHidden="false"    UnhideWhenUsed="false" QFormat="true" Name="Book Title" /> <w:LsdException Locked="false" Priority="37" Name="Bibliography" /> <w:LsdException Locked="false" Priority="39" QFormat="true" Name="TOC Heading" /> </w:LatentStyles> </xml><![endif]--><!--[if gte mso 10]> <mce:style><!
/* Style Definitions */
table.MsoNormalTable
{mso-style-name:"Table Normal";
mso-tstyle-rowband-size:0;
mso-tstyle-colband-size:0;
mso-style-noshow:yes;
mso-style-priority:99;
mso-style-parent:"";
mso-padding-alt:0cm 5.4pt 0cm 5.4pt;
mso-para-margin-top:0cm;
mso-para-margin-right:0cm;
mso-para-margin-bottom:10.0pt;
mso-para-margin-left:0cm;
line-height:115%;
mso-pagination:widow-orphan;
font-size:11.0pt;
font-family:"Calibri","sans-serif";
mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;
mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin;
mso-bidi-font-family:"Times New Roman";
mso-bidi-theme-font:minor-bidi;}
--> <!--[endif]--></p>
<p class="MsoNormal"><span lang="EN-GB">The easiest way to learn is by practice. This is especially true in IT. I have to lab out the migration from pfSense 1.2.3 to 2.0 RC1. Furthermore I have a site-to-site VPN setup that must be tested too. </span></p>
<p class="MsoNormal"><span lang="EN-GB">I decided to expand my laboratory setup to house not just the two versions of pfSense, but DD-WRT and OpenWrt also. This will give me a opportunity to expand my test with alternatives. That is not enough, so let’s add two of each as virtual machines. Now we need a router in the middle to move the traffic between different subnets. Using any of the above will be redundant, so after browsing the VMware market for router appliance, as first option came Untangle, but I have already played around with it, and it is not appropriate for my purposes. As reasonable alternative is Vyatta. I had no experience with this appliance, and decide to check it out. </span></p>
<p class="MsoNormal"><span lang="EN-GB">My finale network diagram looks like this:</span></p>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2011/03/Lab-Setup.png"></a><a href="https://blog.stefcho.eu/wp-content/uploads/2011/03/Lab-Setup1.png"><img class="aligncenter size-large wp-image-447" title="Lab Setup" src="https://blog.stefcho.eu/wp-content/uploads/2011/03/Lab-Setup1-1024x761.png" alt="" width="586" height="435" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/03/Lab-Setup1-1024x761.png 1024w, https://blog.stefcho.eu/wp-content/uploads/2011/03/Lab-Setup1-300x223.png 300w, https://blog.stefcho.eu/wp-content/uploads/2011/03/Lab-Setup1.png 1051w" sizes="(max-width: 586px) 100vw, 586px" /></a><br />
<span lang="EN-GB">The Console and Client are a simple Windows XP workstation from which to manage all the routers remotely by SSH and Web Interface.<span> </span></span></p>
<p class="MsoNormal"><span lang="EN-GB"><span> </span>As you can imagine if all the routers WAN addresses were in one sub-net, the Vyatta would be unnecessary, but my decision was based on the need to be able to test load balancing, fail over, and other scenarios in future. </span></p>
<p class="MsoNormal"><span lang="EN-GB">In the following post I will discuss in details the configuration of each type of route. As a brief impression from the installation and configuration starting from the easiest to setup and going to the hardest ones.</span></p>
<p class="MsoNormal"><span lang="EN-GB">PfSense have a Live CD, and is a breeze to install and configure on x86 virtual machine. </span></p>
<p class="MsoNormal"><span lang="EN-GB">Then is the Vyatta, also available on Live CD that can be installed on virtual machine. For the configuration I have used the shell, only later to discover that there is a web interface that is somewhat helpful. </span></p>
<p class="MsoNormal"><span lang="EN-GB">DD-WRT is hard to get on x86 virtual machine. I have opt out to find ready-made virtual machine and only to restore it to default configuration, and then to configure it to my preferences.</span></p>
<p class="MsoNormal"><span lang="EN-GB">OpenWrt is even harder. On the forums the recommended way is to compile it for this architecture, and then install it. There is a wonderful tutorial <a href="http://www.youtube.com/watch?v=cL81DQk4WL8" target="_blank">here </a>how to set it up on virtual box, but it does not work on VMware workstation. My guess is if you reconfigure the hard disk portions it will work. But yet again, my decision was to use ready-made virtual machine with the latest version, and configure it to my likings.</span></p>
<p class="MsoNormal">&nbsp;</p>
<p class="MsoNormal"><span lang="EN-GB"><br />
</span></p>
<div id="_mcePaste" class="mcePaste" style="position: absolute; left: -10000px; top: 0px; width: 1px; height: 1px; overflow: hidden;">
<p><!--[if !mso]> <mce:style><!  v\:* {behavior:url(#default#VML);} o\:* {behavior:url(#default#VML);} w\:* {behavior:url(#default#VML);} .shape {behavior:url(#default#VML);} --> <!--[endif]--><!--[if gte mso 9]><xml> <o:OfficeDocumentSettings> <o:RelyOnVML /> <o:AllowPNG /> </o:OfficeDocumentSettings> </xml><![endif]--><!--[if gte mso 9]><xml> <w:WordDocument> <w:View>Normal</w:View> <w:Zoom>0</w:Zoom> <w:TrackMoves /> <w:TrackFormatting /> <w:PunctuationKerning /> <w:ValidateAgainstSchemas /> <w:SaveIfXMLInvalid>false</w:SaveIfXMLInvalid> <w:IgnoreMixedContent>false</w:IgnoreMixedContent> <w:AlwaysShowPlaceholderText>false</w:AlwaysShowPlaceholderText> <w:DoNotPromoteQF /> <w:LidThemeOther>EN-US</w:LidThemeOther> <w:LidThemeAsian>X-NONE</w:LidThemeAsian> <w:LidThemeComplexScript>X-NONE</w:LidThemeComplexScript> <w:Compatibility> <w:BreakWrappedTables /> <w:SnapToGridInCell /> <w:WrapTextWithPunct /> <w:UseAsianBreakRules /> <w:DontGrowAutofit /> <w:SplitPgBreakAndParaMark /> <w:EnableOpenTypeKerning /> <w:DontFlipMirrorIndents /> <w:OverrideTableStyleHps /> </w:Compatibility> <m:mathPr> <m:mathFont m:val="Cambria Math" /> <m:brkBin m:val="before" /> <m:brkBinSub m:val="&#45;-" /> <m:smallFrac m:val="off" /> <m:dispDef /> <m:lMargin m:val="0" /> <m:rMargin m:val="0" /> <m:defJc m:val="centerGroup" /> <m:wrapIndent m:val="1440" /> <m:intLim m:val="subSup" /> <m:naryLim m:val="undOvr" /> </m:mathPr></w:WordDocument> </xml><![endif]--><!--[if gte mso 9]><xml> <w:LatentStyles DefLockedState="false" DefUnhideWhenUsed="true"   DefSemiHidden="true" DefQFormat="false" DefPriority="99"   LatentStyleCount="267"> <w:LsdException Locked="false" Priority="0" SemiHidden="false"    UnhideWhenUsed="false" QFormat="true" Name="Normal" /> <w:LsdException Locked="false" Priority="9" SemiHidden="false"    UnhideWhenUsed="false" QFormat="true" Name="heading 1" /> <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 2" /> <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 3" /> <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 4" /> <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 5" /> <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 6" /> <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 7" /> <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 8" /> <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 9" /> <w:LsdException Locked="false" Priority="39" Name="toc 1" /> <w:LsdException Locked="false" Priority="39" Name="toc 2" /> <w:LsdException Locked="false" Priority="39" Name="toc 3" /> <w:LsdException Locked="false" Priority="39" Name="toc 4" /> <w:LsdException Locked="false" Priority="39" Name="toc 5" /> <w:LsdException Locked="false" Priority="39" Name="toc 6" /> <w:LsdException Locked="false" Priority="39" Name="toc 7" /> <w:LsdException Locked="false" Priority="39" Name="toc 8" /> <w:LsdException Locked="false" Priority="39" Name="toc 9" /> <w:LsdException Locked="false" Priority="35" QFormat="true" Name="caption" /> <w:LsdException Locked="false" Priority="10" SemiHidden="false"    UnhideWhenUsed="false" QFormat="true" Name="Title" /> <w:LsdException Locked="false" Priority="1" Name="Default Paragraph Font" /> <w:LsdException Locked="false" Priority="11" SemiHidden="false"    UnhideWhenUsed="false" QFormat="true" Name="Subtitle" /> <w:LsdException Locked="false" Priority="22" SemiHidden="false"    UnhideWhenUsed="false" QFormat="true" Name="Strong" /> <w:LsdException Locked="false" Priority="20" SemiHidden="false"    UnhideWhenUsed="false" QFormat="true" Name="Emphasis" /> <w:LsdException Locked="false" Priority="59" SemiHidden="false"    UnhideWhenUsed="false" Name="Table Grid" /> <w:LsdException Locked="false" UnhideWhenUsed="false" Name="Placeholder Text" /> <w:LsdException Locked="false" Priority="1" SemiHidden="false"    UnhideWhenUsed="false" QFormat="true" Name="No Spacing" /> <w:LsdException Locked="false" Priority="60" SemiHidden="false"    UnhideWhenUsed="false" Name="Light Shading" /> <w:LsdException Locked="false" Priority="61" SemiHidden="false"    UnhideWhenUsed="false" Name="Light List" /> <w:LsdException Locked="false" Priority="62" SemiHidden="false"    UnhideWhenUsed="false" Name="Light Grid" /> <w:LsdException Locked="false" Priority="63" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium Shading 1" /> <w:LsdException Locked="false" Priority="64" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium Shading 2" /> <w:LsdException Locked="false" Priority="65" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium List 1" /> <w:LsdException Locked="false" Priority="66" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium List 2" /> <w:LsdException Locked="false" Priority="67" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium Grid 1" /> <w:LsdException Locked="false" Priority="68" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium Grid 2" /> <w:LsdException Locked="false" Priority="69" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium Grid 3" /> <w:LsdException Locked="false" Priority="70" SemiHidden="false"    UnhideWhenUsed="false" Name="Dark List" /> <w:LsdException Locked="false" Priority="71" SemiHidden="false"    UnhideWhenUsed="false" Name="Colorful Shading" /> <w:LsdException Locked="false" Priority="72" SemiHidden="false"    UnhideWhenUsed="false" Name="Colorful List" /> <w:LsdException Locked="false" Priority="73" SemiHidden="false"    UnhideWhenUsed="false" Name="Colorful Grid" /> <w:LsdException Locked="false" Priority="60" SemiHidden="false"    UnhideWhenUsed="false" Name="Light Shading Accent 1" /> <w:LsdException Locked="false" Priority="61" SemiHidden="false"    UnhideWhenUsed="false" Name="Light List Accent 1" /> <w:LsdException Locked="false" Priority="62" SemiHidden="false"    UnhideWhenUsed="false" Name="Light Grid Accent 1" /> <w:LsdException Locked="false" Priority="63" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium Shading 1 Accent 1" /> <w:LsdException Locked="false" Priority="64" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium Shading 2 Accent 1" /> <w:LsdException Locked="false" Priority="65" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium List 1 Accent 1" /> <w:LsdException Locked="false" UnhideWhenUsed="false" Name="Revision" /> <w:LsdException Locked="false" Priority="34" SemiHidden="false"    UnhideWhenUsed="false" QFormat="true" Name="List Paragraph" /> <w:LsdException Locked="false" Priority="29" SemiHidden="false"    UnhideWhenUsed="false" QFormat="true" Name="Quote" /> <w:LsdException Locked="false" Priority="30" SemiHidden="false"    UnhideWhenUsed="false" QFormat="true" Name="Intense Quote" /> <w:LsdException Locked="false" Priority="66" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium List 2 Accent 1" /> <w:LsdException Locked="false" Priority="67" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium Grid 1 Accent 1" /> <w:LsdException Locked="false" Priority="68" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium Grid 2 Accent 1" /> <w:LsdException Locked="false" Priority="69" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium Grid 3 Accent 1" /> <w:LsdException Locked="false" Priority="70" SemiHidden="false"    UnhideWhenUsed="false" Name="Dark List Accent 1" /> <w:LsdException Locked="false" Priority="71" SemiHidden="false"    UnhideWhenUsed="false" Name="Colorful Shading Accent 1" /> <w:LsdException Locked="false" Priority="72" SemiHidden="false"    UnhideWhenUsed="false" Name="Colorful List Accent 1" /> <w:LsdException Locked="false" Priority="73" SemiHidden="false"    UnhideWhenUsed="false" Name="Colorful Grid Accent 1" /> <w:LsdException Locked="false" Priority="60" SemiHidden="false"    UnhideWhenUsed="false" Name="Light Shading Accent 2" /> <w:LsdException Locked="false" Priority="61" SemiHidden="false"    UnhideWhenUsed="false" Name="Light List Accent 2" /> <w:LsdException Locked="false" Priority="62" SemiHidden="false"    UnhideWhenUsed="false" Name="Light Grid Accent 2" /> <w:LsdException Locked="false" Priority="63" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium Shading 1 Accent 2" /> <w:LsdException Locked="false" Priority="64" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium Shading 2 Accent 2" /> <w:LsdException Locked="false" Priority="65" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium List 1 Accent 2" /> <w:LsdException Locked="false" Priority="66" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium List 2 Accent 2" /> <w:LsdException Locked="false" Priority="67" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium Grid 1 Accent 2" /> <w:LsdException Locked="false" Priority="68" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium Grid 2 Accent 2" /> <w:LsdException Locked="false" Priority="69" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium Grid 3 Accent 2" /> <w:LsdException Locked="false" Priority="70" SemiHidden="false"    UnhideWhenUsed="false" Name="Dark List Accent 2" /> <w:LsdException Locked="false" Priority="71" SemiHidden="false"    UnhideWhenUsed="false" Name="Colorful Shading Accent 2" /> <w:LsdException Locked="false" Priority="72" SemiHidden="false"    UnhideWhenUsed="false" Name="Colorful List Accent 2" /> <w:LsdException Locked="false" Priority="73" SemiHidden="false"    UnhideWhenUsed="false" Name="Colorful Grid Accent 2" /> <w:LsdException Locked="false" Priority="60" SemiHidden="false"    UnhideWhenUsed="false" Name="Light Shading Accent 3" /> <w:LsdException Locked="false" Priority="61" SemiHidden="false"    UnhideWhenUsed="false" Name="Light List Accent 3" /> <w:LsdException Locked="false" Priority="62" SemiHidden="false"    UnhideWhenUsed="false" Name="Light Grid Accent 3" /> <w:LsdException Locked="false" Priority="63" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium Shading 1 Accent 3" /> <w:LsdException Locked="false" Priority="64" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium Shading 2 Accent 3" /> <w:LsdException Locked="false" Priority="65" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium List 1 Accent 3" /> <w:LsdException Locked="false" Priority="66" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium List 2 Accent 3" /> <w:LsdException Locked="false" Priority="67" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium Grid 1 Accent 3" /> <w:LsdException Locked="false" Priority="68" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium Grid 2 Accent 3" /> <w:LsdException Locked="false" Priority="69" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium Grid 3 Accent 3" /> <w:LsdException Locked="false" Priority="70" SemiHidden="false"    UnhideWhenUsed="false" Name="Dark List Accent 3" /> <w:LsdException Locked="false" Priority="71" SemiHidden="false"    UnhideWhenUsed="false" Name="Colorful Shading Accent 3" /> <w:LsdException Locked="false" Priority="72" SemiHidden="false"    UnhideWhenUsed="false" Name="Colorful List Accent 3" /> <w:LsdException Locked="false" Priority="73" SemiHidden="false"    UnhideWhenUsed="false" Name="Colorful Grid Accent 3" /> <w:LsdException Locked="false" Priority="60" SemiHidden="false"    UnhideWhenUsed="false" Name="Light Shading Accent 4" /> <w:LsdException Locked="false" Priority="61" SemiHidden="false"    UnhideWhenUsed="false" Name="Light List Accent 4" /> <w:LsdException Locked="false" Priority="62" SemiHidden="false"    UnhideWhenUsed="false" Name="Light Grid Accent 4" /> <w:LsdException Locked="false" Priority="63" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium Shading 1 Accent 4" /> <w:LsdException Locked="false" Priority="64" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium Shading 2 Accent 4" /> <w:LsdException Locked="false" Priority="65" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium List 1 Accent 4" /> <w:LsdException Locked="false" Priority="66" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium List 2 Accent 4" /> <w:LsdException Locked="false" Priority="67" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium Grid 1 Accent 4" /> <w:LsdException Locked="false" Priority="68" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium Grid 2 Accent 4" /> <w:LsdException Locked="false" Priority="69" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium Grid 3 Accent 4" /> <w:LsdException Locked="false" Priority="70" SemiHidden="false"    UnhideWhenUsed="false" Name="Dark List Accent 4" /> <w:LsdException Locked="false" Priority="71" SemiHidden="false"    UnhideWhenUsed="false" Name="Colorful Shading Accent 4" /> <w:LsdException Locked="false" Priority="72" SemiHidden="false"    UnhideWhenUsed="false" Name="Colorful List Accent 4" /> <w:LsdException Locked="false" Priority="73" SemiHidden="false"    UnhideWhenUsed="false" Name="Colorful Grid Accent 4" /> <w:LsdException Locked="false" Priority="60" SemiHidden="false"    UnhideWhenUsed="false" Name="Light Shading Accent 5" /> <w:LsdException Locked="false" Priority="61" SemiHidden="false"    UnhideWhenUsed="false" Name="Light List Accent 5" /> <w:LsdException Locked="false" Priority="62" SemiHidden="false"    UnhideWhenUsed="false" Name="Light Grid Accent 5" /> <w:LsdException Locked="false" Priority="63" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium Shading 1 Accent 5" /> <w:LsdException Locked="false" Priority="64" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium Shading 2 Accent 5" /> <w:LsdException Locked="false" Priority="65" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium List 1 Accent 5" /> <w:LsdException Locked="false" Priority="66" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium List 2 Accent 5" /> <w:LsdException Locked="false" Priority="67" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium Grid 1 Accent 5" /> <w:LsdException Locked="false" Priority="68" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium Grid 2 Accent 5" /> <w:LsdException Locked="false" Priority="69" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium Grid 3 Accent 5" /> <w:LsdException Locked="false" Priority="70" SemiHidden="false"    UnhideWhenUsed="false" Name="Dark List Accent 5" /> <w:LsdException Locked="false" Priority="71" SemiHidden="false"    UnhideWhenUsed="false" Name="Colorful Shading Accent 5" /> <w:LsdException Locked="false" Priority="72" SemiHidden="false"    UnhideWhenUsed="false" Name="Colorful List Accent 5" /> <w:LsdException Locked="false" Priority="73" SemiHidden="false"    UnhideWhenUsed="false" Name="Colorful Grid Accent 5" /> <w:LsdException Locked="false" Priority="60" SemiHidden="false"    UnhideWhenUsed="false" Name="Light Shading Accent 6" /> <w:LsdException Locked="false" Priority="61" SemiHidden="false"    UnhideWhenUsed="false" Name="Light List Accent 6" /> <w:LsdException Locked="false" Priority="62" SemiHidden="false"    UnhideWhenUsed="false" Name="Light Grid Accent 6" /> <w:LsdException Locked="false" Priority="63" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium Shading 1 Accent 6" /> <w:LsdException Locked="false" Priority="64" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium Shading 2 Accent 6" /> <w:LsdException Locked="false" Priority="65" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium List 1 Accent 6" /> <w:LsdException Locked="false" Priority="66" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium List 2 Accent 6" /> <w:LsdException Locked="false" Priority="67" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium Grid 1 Accent 6" /> <w:LsdException Locked="false" Priority="68" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium Grid 2 Accent 6" /> <w:LsdException Locked="false" Priority="69" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium Grid 3 Accent 6" /> <w:LsdException Locked="false" Priority="70" SemiHidden="false"    UnhideWhenUsed="false" Name="Dark List Accent 6" /> <w:LsdException Locked="false" Priority="71" SemiHidden="false"    UnhideWhenUsed="false" Name="Colorful Shading Accent 6" /> <w:LsdException Locked="false" Priority="72" SemiHidden="false"    UnhideWhenUsed="false" Name="Colorful List Accent 6" /> <w:LsdException Locked="false" Priority="73" SemiHidden="false"    UnhideWhenUsed="false" Name="Colorful Grid Accent 6" /> <w:LsdException Locked="false" Priority="19" SemiHidden="false"    UnhideWhenUsed="false" QFormat="true" Name="Subtle Emphasis" /> <w:LsdException Locked="false" Priority="21" SemiHidden="false"    UnhideWhenUsed="false" QFormat="true" Name="Intense Emphasis" /> <w:LsdException Locked="false" Priority="31" SemiHidden="false"    UnhideWhenUsed="false" QFormat="true" Name="Subtle Reference" /> <w:LsdException Locked="false" Priority="32" SemiHidden="false"    UnhideWhenUsed="false" QFormat="true" Name="Intense Reference" /> <w:LsdException Locked="false" Priority="33" SemiHidden="false"    UnhideWhenUsed="false" QFormat="true" Name="Book Title" /> <w:LsdException Locked="false" Priority="37" Name="Bibliography" /> <w:LsdException Locked="false" Priority="39" QFormat="true" Name="TOC Heading" /> </w:LatentStyles> </xml><![endif]--><!--[if gte mso 10]> <mce:style><!   /* Style Definitions */  table.MsoNormalTable 	{mso-style-name:"Table Normal"; 	mso-tstyle-rowband-size:0; 	mso-tstyle-colband-size:0; 	mso-style-noshow:yes; 	mso-style-priority:99; 	mso-style-parent:""; 	mso-padding-alt:0cm 5.4pt 0cm 5.4pt; 	mso-para-margin-top:0cm; 	mso-para-margin-right:0cm; 	mso-para-margin-bottom:10.0pt; 	mso-para-margin-left:0cm; 	line-height:115%; 	mso-pagination:widow-orphan; 	font-size:11.0pt; 	font-family:"Calibri","sans-serif"; 	mso-ascii-font-family:Calibri; 	mso-ascii-theme-font:minor-latin; 	mso-hansi-font-family:Calibri; 	mso-hansi-theme-font:minor-latin; 	mso-bidi-font-family:"Times New Roman"; 	mso-bidi-theme-font:minor-bidi;} --> <!--[endif]--></p>
<p class="MsoNormal"><span lang="EN-GB">The easiest way to learn is by practice. This is especially true in IT. So now I have to lab out the migration from pfSense 1.2.3 to 2.0 RC1. Furthermore I have a site-to-site VPN setup that must be tested too. </span></p>
<p class="MsoNormal"><span lang="EN-GB"> </span></p>
<p class="MsoNormal"><span lang="EN-GB">I decided to expand my laboratory setup to house not just the two versions of pfSense, but DD-WRT and OpenWrt also. That is not enough, so let’s add two of each as virtual machines. Now we need a router in the middle to move the traffic between different subnets. Using any of the above will be redundant, so after browsing the VMware market for router appliance, as first option came Untangle, but I have already played around with it, and it is not appropriate for my purposes. As alternative to Untangle, Vyatta pop up from the result. I had no experience with this appliance, and decide to check it out. </span></p>
<p class="MsoNormal"><span lang="EN-GB">My finale network diagram is like this:</span></p>
<p class="MsoNormal"><span lang="EN-GB"> </span></p>
<p class="MsoNormal"><span lang="EN-GB">The console and Client are a simple Windows XP workstation from which to manage all the routers remotely by SSH and Web Interface.<span> </span></span></p>
<p class="MsoNormal"><span lang="EN-GB"><span> </span>As you can imagine if all the routers WAN addresses were in one subnet, the Vyatta would be unnecessary, but my decision was based on the need to be able to test load balancing, failover, and other scenarios in future. </span></p>
<p class="MsoNormal"><span lang="EN-GB"> </span></p>
<p class="MsoNormal"><span lang="EN-GB">In the following post I will discuss in details the configuration of each type of route. Now let’s go from the fore a brief impression from the installation and configuration starting from the easiest to setup and going to the hardest ones.</span></p>
<p class="MsoNormal"><span lang="EN-GB">PfSense have a live cd, and is a breeze to install and configure on x86 virtual machine. The only interesting this here is how to publish the web interface and the SSH on the WAN.</span></p>
<p class="MsoNormal"><span lang="EN-GB">Then is the Vyatta, also available on live cd that can be installed on virtual machine. For the configuration I have used the shell, only later to discover that there is a web interface that is somewhat helpful. </span></p>
<p class="MsoNormal"><span lang="EN-GB">DD-WRT is hard to get on x86 virtual machine. I have opt out to find ready-made virtual machine and only to restore it to default configuration, and then to configure it to my preferences.</span></p>
<p><!--[if !mso]> <mce:style><!
v\:* {behavior:url(#default#VML);}
o\:* {behavior:url(#default#VML);}
w\:* {behavior:url(#default#VML);}
.shape {behavior:url(#default#VML);}
--> <!--[endif]--><!--[if gte mso 9]><xml> <o:OfficeDocumentSettings> <o:RelyOnVML /> <o:AllowPNG /> </o:OfficeDocumentSettings> </xml><![endif]--><!--[if gte mso 9]><xml> <w:WordDocument> <w:View>Normal</w:View> <w:Zoom>0</w:Zoom> <w:TrackMoves /> <w:TrackFormatting /> <w:PunctuationKerning /> <w:ValidateAgainstSchemas /> <w:SaveIfXMLInvalid>false</w:SaveIfXMLInvalid> <w:IgnoreMixedContent>false</w:IgnoreMixedContent> <w:AlwaysShowPlaceholderText>false</w:AlwaysShowPlaceholderText> <w:DoNotPromoteQF /> <w:LidThemeOther>EN-US</w:LidThemeOther> <w:LidThemeAsian>X-NONE</w:LidThemeAsian> <w:LidThemeComplexScript>X-NONE</w:LidThemeComplexScript> <w:Compatibility> <w:BreakWrappedTables /> <w:SnapToGridInCell /> <w:WrapTextWithPunct /> <w:UseAsianBreakRules /> <w:DontGrowAutofit /> <w:SplitPgBreakAndParaMark /> <w:EnableOpenTypeKerning /> <w:DontFlipMirrorIndents /> <w:OverrideTableStyleHps /> </w:Compatibility> <m:mathPr> <m:mathFont m:val="Cambria Math" /> <m:brkBin m:val="before" /> <m:brkBinSub m:val="&#45;-" /> <m:smallFrac m:val="off" /> <m:dispDef /> <m:lMargin m:val="0" /> <m:rMargin m:val="0" /> <m:defJc m:val="centerGroup" /> <m:wrapIndent m:val="1440" /> <m:intLim m:val="subSup" /> <m:naryLim m:val="undOvr" /> </m:mathPr></w:WordDocument> </xml><![endif]--><!--[if gte mso 9]><xml> <w:LatentStyles DefLockedState="false" DefUnhideWhenUsed="true"   DefSemiHidden="true" DefQFormat="false" DefPriority="99"   LatentStyleCount="267"> <w:LsdException Locked="false" Priority="0" SemiHidden="false"    UnhideWhenUsed="false" QFormat="true" Name="Normal" /> <w:LsdException Locked="false" Priority="9" SemiHidden="false"    UnhideWhenUsed="false" QFormat="true" Name="heading 1" /> <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 2" /> <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 3" /> <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 4" /> <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 5" /> <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 6" /> <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 7" /> <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 8" /> <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 9" /> <w:LsdException Locked="false" Priority="39" Name="toc 1" /> <w:LsdException Locked="false" Priority="39" Name="toc 2" /> <w:LsdException Locked="false" Priority="39" Name="toc 3" /> <w:LsdException Locked="false" Priority="39" Name="toc 4" /> <w:LsdException Locked="false" Priority="39" Name="toc 5" /> <w:LsdException Locked="false" Priority="39" Name="toc 6" /> <w:LsdException Locked="false" Priority="39" Name="toc 7" /> <w:LsdException Locked="false" Priority="39" Name="toc 8" /> <w:LsdException Locked="false" Priority="39" Name="toc 9" /> <w:LsdException Locked="false" Priority="35" QFormat="true" Name="caption" /> <w:LsdException Locked="false" Priority="10" SemiHidden="false"    UnhideWhenUsed="false" QFormat="true" Name="Title" /> <w:LsdException Locked="false" Priority="1" Name="Default Paragraph Font" /> <w:LsdException Locked="false" Priority="11" SemiHidden="false"    UnhideWhenUsed="false" QFormat="true" Name="Subtitle" /> <w:LsdException Locked="false" Priority="22" SemiHidden="false"    UnhideWhenUsed="false" QFormat="true" Name="Strong" /> <w:LsdException Locked="false" Priority="20" SemiHidden="false"    UnhideWhenUsed="false" QFormat="true" Name="Emphasis" /> <w:LsdException Locked="false" Priority="59" SemiHidden="false"    UnhideWhenUsed="false" Name="Table Grid" /> <w:LsdException Locked="false" UnhideWhenUsed="false" Name="Placeholder Text" /> <w:LsdException Locked="false" Priority="1" SemiHidden="false"    UnhideWhenUsed="false" QFormat="true" Name="No Spacing" /> <w:LsdException Locked="false" Priority="60" SemiHidden="false"    UnhideWhenUsed="false" Name="Light Shading" /> <w:LsdException Locked="false" Priority="61" SemiHidden="false"    UnhideWhenUsed="false" Name="Light List" /> <w:LsdException Locked="false" Priority="62" SemiHidden="false"    UnhideWhenUsed="false" Name="Light Grid" /> <w:LsdException Locked="false" Priority="63" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium Shading 1" /> <w:LsdException Locked="false" Priority="64" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium Shading 2" /> <w:LsdException Locked="false" Priority="65" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium List 1" /> <w:LsdException Locked="false" Priority="66" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium List 2" /> <w:LsdException Locked="false" Priority="67" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium Grid 1" /> <w:LsdException Locked="false" Priority="68" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium Grid 2" /> <w:LsdException Locked="false" Priority="69" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium Grid 3" /> <w:LsdException Locked="false" Priority="70" SemiHidden="false"    UnhideWhenUsed="false" Name="Dark List" /> <w:LsdException Locked="false" Priority="71" SemiHidden="false"    UnhideWhenUsed="false" Name="Colorful Shading" /> <w:LsdException Locked="false" Priority="72" SemiHidden="false"    UnhideWhenUsed="false" Name="Colorful List" /> <w:LsdException Locked="false" Priority="73" SemiHidden="false"    UnhideWhenUsed="false" Name="Colorful Grid" /> <w:LsdException Locked="false" Priority="60" SemiHidden="false"    UnhideWhenUsed="false" Name="Light Shading Accent 1" /> <w:LsdException Locked="false" Priority="61" SemiHidden="false"    UnhideWhenUsed="false" Name="Light List Accent 1" /> <w:LsdException Locked="false" Priority="62" SemiHidden="false"    UnhideWhenUsed="false" Name="Light Grid Accent 1" /> <w:LsdException Locked="false" Priority="63" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium Shading 1 Accent 1" /> <w:LsdException Locked="false" Priority="64" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium Shading 2 Accent 1" /> <w:LsdException Locked="false" Priority="65" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium List 1 Accent 1" /> <w:LsdException Locked="false" UnhideWhenUsed="false" Name="Revision" /> <w:LsdException Locked="false" Priority="34" SemiHidden="false"    UnhideWhenUsed="false" QFormat="true" Name="List Paragraph" /> <w:LsdException Locked="false" Priority="29" SemiHidden="false"    UnhideWhenUsed="false" QFormat="true" Name="Quote" /> <w:LsdException Locked="false" Priority="30" SemiHidden="false"    UnhideWhenUsed="false" QFormat="true" Name="Intense Quote" /> <w:LsdException Locked="false" Priority="66" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium List 2 Accent 1" /> <w:LsdException Locked="false" Priority="67" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium Grid 1 Accent 1" /> <w:LsdException Locked="false" Priority="68" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium Grid 2 Accent 1" /> <w:LsdException Locked="false" Priority="69" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium Grid 3 Accent 1" /> <w:LsdException Locked="false" Priority="70" SemiHidden="false"    UnhideWhenUsed="false" Name="Dark List Accent 1" /> <w:LsdException Locked="false" Priority="71" SemiHidden="false"    UnhideWhenUsed="false" Name="Colorful Shading Accent 1" /> <w:LsdException Locked="false" Priority="72" SemiHidden="false"    UnhideWhenUsed="false" Name="Colorful List Accent 1" /> <w:LsdException Locked="false" Priority="73" SemiHidden="false"    UnhideWhenUsed="false" Name="Colorful Grid Accent 1" /> <w:LsdException Locked="false" Priority="60" SemiHidden="false"    UnhideWhenUsed="false" Name="Light Shading Accent 2" /> <w:LsdException Locked="false" Priority="61" SemiHidden="false"    UnhideWhenUsed="false" Name="Light List Accent 2" /> <w:LsdException Locked="false" Priority="62" SemiHidden="false"    UnhideWhenUsed="false" Name="Light Grid Accent 2" /> <w:LsdException Locked="false" Priority="63" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium Shading 1 Accent 2" /> <w:LsdException Locked="false" Priority="64" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium Shading 2 Accent 2" /> <w:LsdException Locked="false" Priority="65" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium List 1 Accent 2" /> <w:LsdException Locked="false" Priority="66" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium List 2 Accent 2" /> <w:LsdException Locked="false" Priority="67" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium Grid 1 Accent 2" /> <w:LsdException Locked="false" Priority="68" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium Grid 2 Accent 2" /> <w:LsdException Locked="false" Priority="69" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium Grid 3 Accent 2" /> <w:LsdException Locked="false" Priority="70" SemiHidden="false"    UnhideWhenUsed="false" Name="Dark List Accent 2" /> <w:LsdException Locked="false" Priority="71" SemiHidden="false"    UnhideWhenUsed="false" Name="Colorful Shading Accent 2" /> <w:LsdException Locked="false" Priority="72" SemiHidden="false"    UnhideWhenUsed="false" Name="Colorful List Accent 2" /> <w:LsdException Locked="false" Priority="73" SemiHidden="false"    UnhideWhenUsed="false" Name="Colorful Grid Accent 2" /> <w:LsdException Locked="false" Priority="60" SemiHidden="false"    UnhideWhenUsed="false" Name="Light Shading Accent 3" /> <w:LsdException Locked="false" Priority="61" SemiHidden="false"    UnhideWhenUsed="false" Name="Light List Accent 3" /> <w:LsdException Locked="false" Priority="62" SemiHidden="false"    UnhideWhenUsed="false" Name="Light Grid Accent 3" /> <w:LsdException Locked="false" Priority="63" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium Shading 1 Accent 3" /> <w:LsdException Locked="false" Priority="64" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium Shading 2 Accent 3" /> <w:LsdException Locked="false" Priority="65" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium List 1 Accent 3" /> <w:LsdException Locked="false" Priority="66" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium List 2 Accent 3" /> <w:LsdException Locked="false" Priority="67" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium Grid 1 Accent 3" /> <w:LsdException Locked="false" Priority="68" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium Grid 2 Accent 3" /> <w:LsdException Locked="false" Priority="69" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium Grid 3 Accent 3" /> <w:LsdException Locked="false" Priority="70" SemiHidden="false"    UnhideWhenUsed="false" Name="Dark List Accent 3" /> <w:LsdException Locked="false" Priority="71" SemiHidden="false"    UnhideWhenUsed="false" Name="Colorful Shading Accent 3" /> <w:LsdException Locked="false" Priority="72" SemiHidden="false"    UnhideWhenUsed="false" Name="Colorful List Accent 3" /> <w:LsdException Locked="false" Priority="73" SemiHidden="false"    UnhideWhenUsed="false" Name="Colorful Grid Accent 3" /> <w:LsdException Locked="false" Priority="60" SemiHidden="false"    UnhideWhenUsed="false" Name="Light Shading Accent 4" /> <w:LsdException Locked="false" Priority="61" SemiHidden="false"    UnhideWhenUsed="false" Name="Light List Accent 4" /> <w:LsdException Locked="false" Priority="62" SemiHidden="false"    UnhideWhenUsed="false" Name="Light Grid Accent 4" /> <w:LsdException Locked="false" Priority="63" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium Shading 1 Accent 4" /> <w:LsdException Locked="false" Priority="64" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium Shading 2 Accent 4" /> <w:LsdException Locked="false" Priority="65" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium List 1 Accent 4" /> <w:LsdException Locked="false" Priority="66" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium List 2 Accent 4" /> <w:LsdException Locked="false" Priority="67" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium Grid 1 Accent 4" /> <w:LsdException Locked="false" Priority="68" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium Grid 2 Accent 4" /> <w:LsdException Locked="false" Priority="69" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium Grid 3 Accent 4" /> <w:LsdException Locked="false" Priority="70" SemiHidden="false"    UnhideWhenUsed="false" Name="Dark List Accent 4" /> <w:LsdException Locked="false" Priority="71" SemiHidden="false"    UnhideWhenUsed="false" Name="Colorful Shading Accent 4" /> <w:LsdException Locked="false" Priority="72" SemiHidden="false"    UnhideWhenUsed="false" Name="Colorful List Accent 4" /> <w:LsdException Locked="false" Priority="73" SemiHidden="false"    UnhideWhenUsed="false" Name="Colorful Grid Accent 4" /> <w:LsdException Locked="false" Priority="60" SemiHidden="false"    UnhideWhenUsed="false" Name="Light Shading Accent 5" /> <w:LsdException Locked="false" Priority="61" SemiHidden="false"    UnhideWhenUsed="false" Name="Light List Accent 5" /> <w:LsdException Locked="false" Priority="62" SemiHidden="false"    UnhideWhenUsed="false" Name="Light Grid Accent 5" /> <w:LsdException Locked="false" Priority="63" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium Shading 1 Accent 5" /> <w:LsdException Locked="false" Priority="64" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium Shading 2 Accent 5" /> <w:LsdException Locked="false" Priority="65" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium List 1 Accent 5" /> <w:LsdException Locked="false" Priority="66" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium List 2 Accent 5" /> <w:LsdException Locked="false" Priority="67" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium Grid 1 Accent 5" /> <w:LsdException Locked="false" Priority="68" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium Grid 2 Accent 5" /> <w:LsdException Locked="false" Priority="69" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium Grid 3 Accent 5" /> <w:LsdException Locked="false" Priority="70" SemiHidden="false"    UnhideWhenUsed="false" Name="Dark List Accent 5" /> <w:LsdException Locked="false" Priority="71" SemiHidden="false"    UnhideWhenUsed="false" Name="Colorful Shading Accent 5" /> <w:LsdException Locked="false" Priority="72" SemiHidden="false"    UnhideWhenUsed="false" Name="Colorful List Accent 5" /> <w:LsdException Locked="false" Priority="73" SemiHidden="false"    UnhideWhenUsed="false" Name="Colorful Grid Accent 5" /> <w:LsdException Locked="false" Priority="60" SemiHidden="false"    UnhideWhenUsed="false" Name="Light Shading Accent 6" /> <w:LsdException Locked="false" Priority="61" SemiHidden="false"    UnhideWhenUsed="false" Name="Light List Accent 6" /> <w:LsdException Locked="false" Priority="62" SemiHidden="false"    UnhideWhenUsed="false" Name="Light Grid Accent 6" /> <w:LsdException Locked="false" Priority="63" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium Shading 1 Accent 6" /> <w:LsdException Locked="false" Priority="64" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium Shading 2 Accent 6" /> <w:LsdException Locked="false" Priority="65" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium List 1 Accent 6" /> <w:LsdException Locked="false" Priority="66" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium List 2 Accent 6" /> <w:LsdException Locked="false" Priority="67" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium Grid 1 Accent 6" /> <w:LsdException Locked="false" Priority="68" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium Grid 2 Accent 6" /> <w:LsdException Locked="false" Priority="69" SemiHidden="false"    UnhideWhenUsed="false" Name="Medium Grid 3 Accent 6" /> <w:LsdException Locked="false" Priority="70" SemiHidden="false"    UnhideWhenUsed="false" Name="Dark List Accent 6" /> <w:LsdException Locked="false" Priority="71" SemiHidden="false"    UnhideWhenUsed="false" Name="Colorful Shading Accent 6" /> <w:LsdException Locked="false" Priority="72" SemiHidden="false"    UnhideWhenUsed="false" Name="Colorful List Accent 6" /> <w:LsdException Locked="false" Priority="73" SemiHidden="false"    UnhideWhenUsed="false" Name="Colorful Grid Accent 6" /> <w:LsdException Locked="false" Priority="19" SemiHidden="false"    UnhideWhenUsed="false" QFormat="true" Name="Subtle Emphasis" /> <w:LsdException Locked="false" Priority="21" SemiHidden="false"    UnhideWhenUsed="false" QFormat="true" Name="Intense Emphasis" /> <w:LsdException Locked="false" Priority="31" SemiHidden="false"    UnhideWhenUsed="false" QFormat="true" Name="Subtle Reference" /> <w:LsdException Locked="false" Priority="32" SemiHidden="false"    UnhideWhenUsed="false" QFormat="true" Name="Intense Reference" /> <w:LsdException Locked="false" Priority="33" SemiHidden="false"    UnhideWhenUsed="false" QFormat="true" Name="Book Title" /> <w:LsdException Locked="false" Priority="37" Name="Bibliography" /> <w:LsdException Locked="false" Priority="39" QFormat="true" Name="TOC Heading" /> </w:LatentStyles> </xml><![endif]--><!--[if gte mso 10]> <mce:style><!
/* Style Definitions */
table.MsoNormalTable
{mso-style-name:"Table Normal";
mso-tstyle-rowband-size:0;
mso-tstyle-colband-size:0;
mso-style-noshow:yes;
mso-style-priority:99;
mso-style-parent:"";
mso-padding-alt:0cm 5.4pt 0cm 5.4pt;
mso-para-margin-top:0cm;
mso-para-margin-right:0cm;
mso-para-margin-bottom:10.0pt;
mso-para-margin-left:0cm;
line-height:115%;
mso-pagination:widow-orphan;
font-size:11.0pt;
font-family:"Calibri","sans-serif";
mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;
mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin;
mso-bidi-font-family:"Times New Roman";
mso-bidi-theme-font:minor-bidi;}
--> <!--[endif]--></p>
<p class="MsoNormal"><span lang="EN-GB">The easiest way to learn is by practice. This is especially true in IT. I have to lab out the migration from pfSense 1.2.3 to 2.0 RC1. Furthermore I have a site-to-site VPN setup that must be tested too. </span></p>
<p class="MsoNormal"><span lang="EN-GB">I decided to expand my laboratory setup to house not just the two versions of pfSense, but DD-WRT and OpenWrt also. This will give me a opportunity to expand my test with alternatives. That is not enough, so let’s add two of each as virtual machines. Now we need a router in the middle to move the traffic between different subnets. Using any of the above will be redundant, so after browsing the VMware market for router appliance, as first option came Untangle, but I have already played around with it, and it is not appropriate for my purposes. As reasonable alternative is Vyatta. I had no experience with this appliance, and decide to check it out. </span></p>
<p class="MsoNormal"><span lang="EN-GB">My finale network diagram looks like this:</span></p>
<p class="MsoNormal"><span lang="EN-GB"> </span></p>
<p class="MsoNormal"><span lang="EN-GB">The Console and Client are a simple Windows XP workstation from which to manage all the routers remotely by SSH and Web Interface.<span> </span></span></p>
<p class="MsoNormal"><span lang="EN-GB"><span> </span>As you can imagine if all the routers WAN addresses were in one subnet, the Vyatta would be unnecessary, but my decision was based on the need to be able to test load balancing, failover, and other scenarios in future. </span></p>
<p class="MsoNormal"><span lang="EN-GB">In the following post I will discuss in details the configuration of each type of route. As a brief impression from the installation and configuration starting from the easiest to setup and going to the hardest ones.</span></p>
<p class="MsoNormal"><span lang="EN-GB">PfSense have a live cd, and is a breeze to install and configure on x86 virtual machine. </span></p>
<p class="MsoNormal"><span lang="EN-GB">Then is the Vyatta, also available on live cd that can be installed on virtual machine. For the configuration I have used the shell, only later to discover that there is a web interface that is somewhat helpful. </span></p>
<p class="MsoNormal"><span lang="EN-GB">DD-WRT is hard to get on x86 virtual machine. I have opt out to find ready-made virtual machine and only to restore it to default configuration, and then to configure it to my preferences.</span></p>
<p class="MsoNormal"><span lang="EN-GB">OpenWrt is even harder. On the forums the recommended way is to compile it for this architecture, and then install it. There is a wonderful tutorial here how to set it up on virtual box, but it does not work on VMware workstation. My guess is if you reconfigure the hard disk portions it will work. But yet again, my decision was to use ready-made virtual machine with the latest version, and configure it to my likings.</span></p>
<p class="MsoNormal"><span lang="EN-GB">OpenWrt is even harder. On the forums the recommended way is to compile it for this architecture, and then install it. There is a wonderful tutorial here how to set it up on virtual box, but it does not work on VMware workstation. My guess is if you reconfigure the hard disk portions it will work. But yet again, my decision was to use ready-made virtual machine with the latest version, and configure it to my likings.</span></p>
<p class="MsoNormal"><span lang="EN-GB"> </span></p>
<p class="MsoNormal"><span lang="EN-GB"> </span></p>
</div>
<p>The post <a rel="nofollow" href="https://blog.stefcho.eu/my-network-laboratory/">My Network Laboratory</a> appeared first on <a rel="nofollow" href="http://blog.stefcho.eu/">Stefcho&#039;s Tech Blog</a>.</p>
]]></content:encoded>
							<wfw:commentRss>https://blog.stefcho.eu/my-network-laboratory/feed/</wfw:commentRss>
		<slash:comments>2</slash:comments>
							</item>
		<item>
		<title>Asus RT-N16 supported with DD-WRT 100 pages thread</title>
		<link>https://blog.stefcho.eu/asus-rt-n16-supported-with-dd-wrt-100-pages-thread/</link>
				<comments>https://blog.stefcho.eu/asus-rt-n16-supported-with-dd-wrt-100-pages-thread/#comments</comments>
				<pubDate>Thu, 10 Mar 2011 18:28:53 +0000</pubDate>
		<dc:creator><![CDATA[Stefan]]></dc:creator>
				<category><![CDATA[Technical]]></category>
		<category><![CDATA[ASUS]]></category>
		<category><![CDATA[DD-WRT]]></category>

		<guid isPermaLink="false">http://stefcho.azurewebsites.net/?p=378</guid>
				<description><![CDATA[<p>One of the major sources of information about this model, and the supportability of different features was this topic. Asus RT-N16 now supported http://www.dd-wrt.com/phpBB2/viewtopic.php?t=61570&#38;postdays=0&#38;postorder=asc&#38;start=0 Unfortunately as the last post states: Murrkf: This thread is way too long to be practical. Outdated info is mixed with new info and few will read all 100 pages. So [&#8230;]</p>
<p>The post <a rel="nofollow" href="https://blog.stefcho.eu/asus-rt-n16-supported-with-dd-wrt-100-pages-thread/">Asus RT-N16 supported with DD-WRT 100 pages thread</a> appeared first on <a rel="nofollow" href="http://blog.stefcho.eu/">Stefcho&#039;s Tech Blog</a>.</p>
]]></description>
								<content:encoded><![CDATA[<p>One of the major sources of information about this model, and the supportability of different features was this topic.</p>
<p>Asus RT-N16 now supported</p>
<p><a href="http://www.dd-wrt.com/phpBB2/viewtopic.php?t=61570&amp;postdays=0&amp;postorder=asc&amp;start=0">http://www.dd-wrt.com/phpBB2/viewtopic.php?t=61570&amp;postdays=0&amp;postorder=asc&amp;start=0</a></p>
<p>Unfortunately as the last post states:</p>
<p>Murrkf: This thread is way too long to be practical. Outdated info is mixed with new info and few will read all 100 pages.</p>
<p>So you can,</p>
<p>SEE SUMMARY OF THIS THREAD AND CONTINUE DISCUSSION HERE:<br />
<a href="http://www.dd-wrt.com/phpBB2/viewtopic.php?t=88118" target="_blank">http://www.dd-wrt.com/phpBB2/viewtopic.php?t=88118</a></p>
<p>The post <a rel="nofollow" href="https://blog.stefcho.eu/asus-rt-n16-supported-with-dd-wrt-100-pages-thread/">Asus RT-N16 supported with DD-WRT 100 pages thread</a> appeared first on <a rel="nofollow" href="http://blog.stefcho.eu/">Stefcho&#039;s Tech Blog</a>.</p>
]]></content:encoded>
							<wfw:commentRss>https://blog.stefcho.eu/asus-rt-n16-supported-with-dd-wrt-100-pages-thread/feed/</wfw:commentRss>
		<slash:comments>4</slash:comments>
							</item>
		<item>
		<title>Upgrading DD-WRT Firmware on Asus RT-N16 with Optware Asterisk 1.4</title>
		<link>https://blog.stefcho.eu/upgrading-dd-wrt-firmware-on-asus-rt-n16-with-optware-asterisk-1-4/</link>
				<comments>https://blog.stefcho.eu/upgrading-dd-wrt-firmware-on-asus-rt-n16-with-optware-asterisk-1-4/#comments</comments>
				<pubDate>Tue, 22 Feb 2011 18:12:24 +0000</pubDate>
		<dc:creator><![CDATA[Stefan]]></dc:creator>
				<category><![CDATA[Technical]]></category>
		<category><![CDATA[Asterisk]]></category>
		<category><![CDATA[ASUS]]></category>
		<category><![CDATA[DD-WRT]]></category>
		<category><![CDATA[VoIP]]></category>

		<guid isPermaLink="false">http://stefcho.azurewebsites.net/?p=371</guid>
				<description><![CDATA[<p>As you remember before almost a year, I’ve setup a SoHo PBX on my router. Now it is time to upgrade the firmware. Usually I perform update on monthly bases. But after such extensible configuration for the PBX, and couple of month stable work, no changes were required. Good place to start is this topic: [&#8230;]</p>
<p>The post <a rel="nofollow" href="https://blog.stefcho.eu/upgrading-dd-wrt-firmware-on-asus-rt-n16-with-optware-asterisk-1-4/">Upgrading DD-WRT Firmware on Asus RT-N16 with Optware Asterisk 1.4</a> appeared first on <a rel="nofollow" href="http://blog.stefcho.eu/">Stefcho&#039;s Tech Blog</a>.</p>
]]></description>
								<content:encoded><![CDATA[<p>As you remember before almost a year, I’ve setup a SoHo PBX on my router. Now it is time to upgrade the firmware. Usually I perform update on monthly bases. But after such extensible configuration for the PBX, and couple of month stable work, no changes were required.</p>
<p>Good place to start is this topic: <a href="https://secure.dd-wrt.com/phpBB2/viewtopic.php?t=52043" target="_blank">Firmware Recommendations &#8211; Still 14929 &#8211; 02/17/11</a></p>
<p>There are K26 firmware recommendations are for 15230, but I decide to use slightly newer build &#8220;dd-wrt.v24-15508_NEWD-2_K2.6_big.bin&#8221;<br />
But then it hit me, if I have to do all the configuration to enable Optware and Asterisk again, this would cost me hours of configuration.</p>
<p>After searching through the Wiki pages and the forum, found some relevant information:<br />
“<br />
/opt backup<br />
Now we have prepared /opt for adding more packages. We can also create backup of the whole /opt tree in case of router upgrade, to give preinstalled /opt to a friend or just safety backup. We will create such backup with<br />
~ # tar czf /tmp/opt-backup.tar.gz /opt<br />
Destination for /tmp/opt-backup.tar.gz should be large enough! Beware that /tmp is RAM. Destination should be disk or remote smbfs partition. Extracting /opt backup could be:<br />
cd /<br />
rm -rf opt/*<br />
tar xvzf /tmp/opt-backup.tar.gz<br />
If /opt space is tight and no packages requiring libstdc++ will be used (like Amule) then removing this large shared library is recommended<br />
~ # rm /opt/lib/libstdc\*<br />
will remove<br />
/opt/lib/libstdc++.so         /opt/lib/libstdc++.so.6       /opt/lib/libstdc++.so.6.0.8<br />
ipkg-opt downloads packages into /opt directory and erases them after installing. If you have enough free RAM and /jffs only then adding &#8211;tmp-dir /tmp is recommended instead of default /opt<br />
”</p>
<p>source: <a href="http://www.dd-wrt.com/wiki/index.php/Optware" target="_blank">http://www.dd-wrt.com/wiki/index.php/Optware</a></p>
<p>and something more meaningful:</p>
<p>“ gobbledigook<br />
DD-WRT User<br />
Joined: 06 Apr 2009<br />
Posts: 376<br />
Posted: Tue Jul 20, 2010 10:55 pm    Post subject:<br />
if optware is installed to an external drive (usb) then when settings are reset all you need to do is enable usb support in services, and select the mount point as /opt/ apply and reboot<br />
”<br />
Check out the whole topic here: <a href="http://www.dd-wrt.com/phpBB2/viewtopic.php?p=464506" target="_blank">http://www.dd-wrt.com/phpBB2/viewtopic.php?p=464506</a></p>
<p>After reading this I’ve gain some confidence, and decide to upgrade.</p>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2011/02/update_firmware.png"><img class="aligncenter size-medium wp-image-372" title="update_firmware_dd-wrt" src="https://blog.stefcho.eu/wp-content/uploads/2011/02/update_firmware-300x165.png" alt="update_firmware_dd-wrt" width="300" height="165" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/02/update_firmware-300x165.png 300w, https://blog.stefcho.eu/wp-content/uploads/2011/02/update_firmware.png 837w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>And it was a success, no additional configuration was needed, Asterisk was up and running straight after the upgrade of the firmware.</p>
<div id="_mcePaste" style="position: absolute; left: -10000px; top: 754px; width: 1px; height: 1px; overflow: hidden;">
<h2>Straight</h2>
</div>
<p>The post <a rel="nofollow" href="https://blog.stefcho.eu/upgrading-dd-wrt-firmware-on-asus-rt-n16-with-optware-asterisk-1-4/">Upgrading DD-WRT Firmware on Asus RT-N16 with Optware Asterisk 1.4</a> appeared first on <a rel="nofollow" href="http://blog.stefcho.eu/">Stefcho&#039;s Tech Blog</a>.</p>
]]></content:encoded>
							<wfw:commentRss>https://blog.stefcho.eu/upgrading-dd-wrt-firmware-on-asus-rt-n16-with-optware-asterisk-1-4/feed/</wfw:commentRss>
		<slash:comments>1</slash:comments>
							</item>
		<item>
		<title>SoHo PBX with DD-WRT and Asterisk 1.4</title>
		<link>https://blog.stefcho.eu/soho-pbx-with-dd-wrt-and-asterisk-1-4/</link>
				<comments>https://blog.stefcho.eu/soho-pbx-with-dd-wrt-and-asterisk-1-4/#comments</comments>
				<pubDate>Sat, 24 Jul 2010 08:14:43 +0000</pubDate>
		<dc:creator><![CDATA[Stefan]]></dc:creator>
				<category><![CDATA[Technical]]></category>
		<category><![CDATA[Asterisk]]></category>
		<category><![CDATA[ASUS]]></category>
		<category><![CDATA[DD-WRT]]></category>
		<category><![CDATA[Linksys]]></category>
		<category><![CDATA[VoIP]]></category>

		<guid isPermaLink="false">http://stefcho.azurewebsites.net/?p=288</guid>
				<description><![CDATA[<p>Здравейте, от известно време изследвам една тема, а именно как да си направим телефонна централа за дома и малкия офис. Първо си поиграх със Asterisk 1.4/1.6 на виртуална машина със soft phones. Имах желание да изпробвам и с hard phones, въпроса беше коя марка и модел да избера. Тук на помощ дойде един от най [&#8230;]</p>
<p>The post <a rel="nofollow" href="https://blog.stefcho.eu/soho-pbx-with-dd-wrt-and-asterisk-1-4/">SoHo PBX with DD-WRT and Asterisk 1.4</a> appeared first on <a rel="nofollow" href="http://blog.stefcho.eu/">Stefcho&#039;s Tech Blog</a>.</p>
]]></description>
								<content:encoded><![CDATA[<p>Здравейте, от известно време изследвам една тема, а именно как да си направим телефонна централа за дома и малкия офис.</p>
<p>Първо си поиграх със Asterisk 1.4/1.6 на виртуална машина със soft phones.</p>
<p>Имах желание да изпробвам и с hard phones, въпроса беше коя марка и модел да избера. Тук на помощ дойде един от най &#8211; добрите сайтове, поне според мен за информация относно VoIP <a href="http://www.voip-info.org" target="_blank" rel="noopener">http://www.voip-info.org</a>/. След продължително търсене на подходящи телефони съвместими с Asterisk, избрах Linksys SPA 941. Избрах го защото, не са ми необходими цветен екран, видеокамера, power over Ethernet, wireless и повече от 1, 2 линии.</p>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2010/07/SPA941_lrg.jpg"><img class="size-medium wp-image-292" title="SPA941" src="https://blog.stefcho.eu/wp-content/uploads/2010/07/SPA941_lrg-292x300.jpg" alt="" width="292" height="300" srcset="https://blog.stefcho.eu/wp-content/uploads/2010/07/SPA941_lrg-292x300.jpg 292w, https://blog.stefcho.eu/wp-content/uploads/2010/07/SPA941_lrg.jpg 330w" sizes="(max-width: 292px) 100vw, 292px" /></a></p>
<p>Тук може да видите повече информация за него: <a href="http://www.voip-info.org/wiki/view/SPA-941" target="_blank" rel="noopener">http://www.voip-info.org/wiki/view/SPA-941</a></p>
<p>За да добиете представа какви алтернативи има вижте новата гама на Cisco, тук има едно прилично ревю:</p>
<p><a href="http://www.asterisktutorials.com/first-look-at-the-cisco-spa500-phones/" target="_blank" rel="noopener">http://www.asterisktutorials.com/first-look-at-the-cisco-spa500-phones/</a></p>
<p>В един момент ми попадна брошура на JAR, и какво да видя в нея SPA 921/941 на доста приятни цени. Не се сдържах и си взех два. Все още са в каталога им като цената на 941 вече е 200 лева.</p>
<p>С помощ на този видео tutorial ги свързах с Asterisk-a за 10 минути.</p>
<p><a href="http://www.asterisktutorials.com/linksys-spa941942-sip-phones/" target="_blank" rel="noopener">http://www.asterisktutorials.com/linksys-spa941942-sip-phones/</a></p>
<p>Впоследствие ги flash-нах до последната версия на firmware-a, която в момента е 5.1.8. Става лесно и и бързо.</p>
<p><a href="http://www.cisco.com/en/US/products/ps10038/index.html" target="_blank" rel="noopener">http://www.cisco.com/en/US/products/ps10038/index.html</a></p>
<p>От няколко години използвам OpenWRT и DD-WRT чудесни дистрибуции побираща се на безжични рутери. И двете предлагат уникални функции които са недостъпни от stock firmware-a на който и да е безжичен рутер.</p>
<p>На един етап започнаха да се появяват версии включващи и Asterisk. Реших да пробвам как ще се държи ако сложа и телефонната централа на устройство. Като се има предвид ползите от такава играчка, без движещи се части, &nbsp;без шум и ниска консумация на електричество.</p>
<p>Разбира се тук е момента да спомена че е добре да се провери за съвместимост на модела със въпросната дистрибуция.</p>
<p>Ето тук за DD-WRT:</p>
<p><a href="http://www.dd-wrt.com/wiki/index.php/Supported_Devices" target="_blank" rel="noopener">http://www.dd-wrt.com/wiki/index.php/Supported_Devices</a></p>
<p>и тук за OpenWRT</p>
<p><a href="http://wiki.openwrt.org/toh/start" target="_blank" rel="noopener">http://wiki.openwrt.org/toh/start</a></p>
<p>Като се замисля последните няколко безжични рутери които са ми попадали в ръцете не са издържали повече от 5 минути със stock firmware.</p>
<p>Като критерии за оценка на устройство може да се вземе Flash Memory. Това е памет на която се инсталира операционната система.&nbsp; Тоест ако имате 4 MB не можете да сложите такава която изисква 8 MB, примерно. Правилото на Мечо Пух &#8220;Колкото повече, Толкова Повече&#8221; тук е валидно с пълна сила. Поради факта че ползвам големите build-ове на dd-wrt изискващи поне 8 MB си харесах Asus RT-N16. Той е със 128MB RAM, 32 MB Flash Memory, &nbsp;a процесор му е на 480 MHz. Освен това има 2 USB 2.0 порта на които може да включи флашка, външен диск или принтер.</p>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2010/07/rt_n16_209.jpg"><img class="alignnone size-medium wp-image-294" title="RT-N16" src="https://blog.stefcho.eu/wp-content/uploads/2010/07/rt_n16_209-300x225.jpg" alt="" width="300" height="225" srcset="https://blog.stefcho.eu/wp-content/uploads/2010/07/rt_n16_209-300x225.jpg 300w, https://blog.stefcho.eu/wp-content/uploads/2010/07/rt_n16_209.jpg 600w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>Незнам защо но този модел не се предлагаше в България доста време, въпреки че е излязъл още преди една &#8211; две години. Както и да е, от преди месец &#8211; два се предлага в Мост. Цената му е около 270 лева.</p>
<p>Последния hardware който ми беше необходим е един USB Flash Drive, или както ги наричаме флаш-ки. На него сложих Optware, за повече информация : <a href="http://en.wikipedia.org/wiki/Optware" target="_blank" rel="noopener">http://en.wikipedia.org/wiki/Optware</a></p>
<p>Не можах да си намеря PQI Cool Drive U338 Pro която има доста прилични скорости и се задоволих с една PQI Cool Drive U339H, Titanium 4 GB за около 25 лева. Забелязвате ли как вече не пишат скоростите на read/write на флашките?</p>
<p>И така да видим разходите до тук:</p>
<p>Asus RT-N16 &#8211; 270 лв.</p>
<p>Linksys SPA 941 x2 &#8211; 350 лв.</p>
<p>PQI U339H, Titanium 4GB &#8211; 25 лв.</p>
<p>Общо: 645 лв.</p>
<p>Преди да пристъпя към инсталация и конфигурация прочетох тази тема във форума:</p>
<p><a href="http://www.dd-wrt.com/phpBB2/viewtopic.php?t=43787&amp;postdays=0&amp;postorder=asc&amp;start=0" target="_blank" rel="noopener">http://www.dd-wrt.com/phpBB2/viewtopic.php?t=43787&amp;postdays=0&amp;postorder=asc&amp;start=0</a></p>
<p>GUI-то описано там не сработи и за мен, за това реших да рискувам с asterisk-gui, вместо него.</p>
<p>Да преминем към инсталацията:</p>
<p>Свалих последната налична версия от www.dd-wrt.com: dd-wrt.v24-14471_NEWD-2_K2.6_big.bin, вече има по &#8211; нови.</p>
<p>След това следвах този guide за да инсталирам и Optware:</p>
<p><a href="http://www.dd-wrt.com/phpBB2/viewtopic.php?t=43787&amp;postdays=0&amp;postorder=asc&amp;start=0" target="_blank" rel="noopener">http://www.dd-wrt.com/wiki/index.php/Optware%2C_the_Right_Way</a></p>
<p>и вече имам и този пакет</p>
<p>asterisk14 &#8211; 1.4.22.1-1 &#8211; Asterisk is an Open Source PBX and telephony toolkit.</p>
<p>След което добавих всички пакети със звуци използвайки ipkg-opt:</p>
<p>asterisk14-core-sounds-en-alaw &#8211; 1.4.8-1 &#8211; asterisk-core-sounds-en-alaw</p>
<p>asterisk14-core-sounds-en-g729 &#8211; 1.4.8-1 &#8211; asterisk-core-sounds-en-g729</p>
<p>asterisk14-core-sounds-en-gsm &#8211; 1.4.8-1 &#8211; asterisk-core-sounds-en-gsm</p>
<p>asterisk14-core-sounds-en-ulaw &#8211; 1.4.8-1 &#8211; asterisk-core-sounds-en-ulaw</p>
<p>asterisk14-extra-sounds-en-alaw &#8211; 1.4.7-1 &#8211; asterisk-extra-sounds-en-alaw</p>
<p>asterisk14-extra-sounds-en-g729 &#8211; 1.4.7-1 &#8211; asterisk-extra-sounds-en-g729</p>
<p>asterisk14-extra-sounds-en-gsm &#8211; 1.4.7-1 &#8211; asterisk-extra-sounds-en-gsm</p>
<p>asterisk14-extra-sounds-en-ulaw &#8211; 1.4.7-1 &#8211; asterisk-extra-sounds-en-ulaw</p>
<p>asterisk14-moh-freeplay-alaw &#8211; 0.0.0-1 &#8211; asterisk-moh-freeplay-alaw</p>
<p>asterisk14-moh-freeplay-g729 &#8211; 0.0.0-1 &#8211; asterisk-moh-freeplay-g729</p>
<p>asterisk14-moh-freeplay-gsm &#8211; 0.0.0-1 &#8211; asterisk-moh-freeplay-gsm</p>
<p>asterisk14-moh-freeplay-ulaw &#8211; 0.0.0-1 &#8211; asterisk-moh-freeplay-ulaw</p>
<p>и накрая добавих и GUI-то:</p>
<p>asterisk-gui &#8211; 2.0svn-r4045-1 &#8211; Asterisk-GUI is a framework for the creation of graphical interfaces for configuring</p>
<p>За да конфигурирам GUI-то използвах това упътване:</p>
<p><a href="http://www.asteriskguru.com/tutorials/asterisk_gui.html" target="_blank" rel="noopener">http://www.asteriskguru.com/tutorials/asterisk_gui.html</a></p>
<p>След като настроих Asterisk-a по мой вкус, вече имам няколко soft phone-a и двата SPA 941 свързани и работещи.</p>
<p>Това което ми липсваше на този момент е връзка със останалия свят.</p>
<p>Много добра тема по въпроса може да намерите тук:</p>
<p><a href="http://www.kaldata.com/forums/index.php?showtopic=6681&amp;st=0" target="_blank" rel="noopener">http://www.kaldata.com/forums/index.php?showtopic=6681&amp;st=0</a></p>
<p>ето и няколко упътвания:</p>
<p><a href="http://akrozia.org/?tag=asterisk" target="_blank" rel="noopener">http://akrozia.org/?tag=asterisk</a></p>
<p><a href="http://ygeorgiev.net/archives/56" target="_blank" rel="noopener">http://ygeorgiev.net/archives/56</a></p>
<p><a href="http://forum.spectrumnet.bg/showthread.php?t=2573" target="_blank" rel="noopener">http://forum.spectrumnet.bg/showthread.php?t=2573</a></p>
<p>Накрая се насочих към BGOpen.</p>
<p>Регистрирах се, захраних сметката си с известна сума. И вече имам телефонен номер ала +3592490ХХХХ.</p>
<p>Прегледах няколко интересни статии по въпроса:</p>
<p><a href="http://ygeorgiev.net/archives/56" target="_blank" rel="noopener">http://ygeorgiev.net/archives/56</a></p>
<p><a href="http://forum.spectrumnet.bg/showthread.php?t=2573" target="_blank" rel="noopener">http://forum.spectrumnet.bg/showthread.php?t=2573</a></p>
<p>Сега е необходимо да научим Asterisk-a за този номер, и как да го ползва.</p>
<p>Първо отиваме в Trunks, VOIP Trunks и избираме + New SIP/IAX Trunk</p>
<p>Избираме тип-а – SIP</p>
<p>Така и не успях да го подкарам с IAX, ако някой го е подкарал и има впечатления нека ги сподели.</p>
<p>За Hostname: sip.bgopen.net</p>
<p>Username / Password – каквито сте избрали при регистрация в bgopen.</p>
<p>Codecs: <a href="http://www.bgopen.net/information.html#%D0%9A%D0%B0%D0%BA%D0%B2%D0%B8_%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B8_%D1%81%D0%B0_%D0%BD%D0%B5%D0%BE%D0%B1%D1%85%D0%BE%D0%B4%D0%B8%D0%BC%D0%B8_%D0%B7%D0%B0_%D0%B2%D0%BA%D0%BB%D1%8E%D1%87%D0%B2%D0%B0%D0%BD%D0%B5_%D0%BD%D0%B0_%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D0%BD%D0%BE_SIP_%D1%83%D1%81%D1%82%D1%80%D0%BE%D0%B9%D1%81%D1%82%D0%B2%D0%BE_%D0%B8%D0%BB%D0%B8_%D1%81%D0%BE%D1%84%D1%82%D1%83%D0%B5%D1%80%D0%B5%D0%BD_%D1%82%D0%B5%D0%BB%D0%B5%D1%84%D0%BE%D0%BD_%D0%BA%D1%8A%D0%BC_%D0%BC%D1%80%D0%B5%D0%B6%D0%B0%D1%82%D0%B0_%D0%BD%D0%B0_BGOPEN.NET" target="_blank" rel="noopener">според FAQ-a на BGOpen </a></p>
<p>Можем да ползваме G.729, G.723.1, GSM, iLBC (поне един от изброените)</p>
<p>За CallerID и Enable Remote MWI не съм сигурен, за това ги оставих празни.</p>
<p>След това отидох в Outgoing Calling Rule, и създадох нов като Pattern: _9. – тоест всички номера които имат 9 от пред се насочват към създадения преди малко Trunk.</p>
<p>Избрах името което съм дал на Trunk-a в полето Use Trunk</p>
<p>Strip – 1 тоест да маха 9-тката при набиране на вън.</p>
<p>Редактирах DialPlan-a си да включва и Outgoing Calling Rule-a</p>
<p>Сега вече мога да набирам не само слушалките директно свързани към Asterisk, но и каквито ми хрумне навън. Единствено трябва да сложа една 9-ка пред номера.</p>
<p>Дойде време да могат и мен да ме търсят по новия ми номер +3592490ХХХХ.</p>
<p>За целта отидох в Incoming Calling Rules, създадох ново, като избрах</p>
<p>Trunk – който създадох по – горе</p>
<p>Time Interval – None</p>
<p>Pattern: _X. – да препраща всички номера към</p>
<p>Destination: Тук мога да избера номер или voice mail на някоя от слушалките. За тестове избрах един номер, но аз не искам това, а Voice Menus за да си създам IVR.</p>
<p>Вече имате входящи и изходящи обаждания и гласова поща.</p>
<p>Да нагласим Voice Menus</p>
<p>Създадох ново, избрах му name и extension</p>
<p>Тук трябва да се добавят Actions, действия които ще се извършват едно след друго.</p>
<p>Ето и моите:</p>
<p>Answer the call – все пак трябва да вдигнем на човека</p>
<p>Set(TIMEOUT(digit)=5) &#8211; колко време чакаме преди да спрем да чакаме за бутон</p>
<p>Set(TIMEOUT(response)=20) – колко време да чакаме за натискане на бутон</p>
<p>Play record/X &amp; Listen for KeyPress events – пускаме на човека записано съобщение с инструкции коя цифра с кого ще го свърже, ако бъде натисната</p>
<p>Play record/Silance &amp; Listen for KeyPress events – наложи се да направя втори запис, със тишина, за да дам време на обаждащия се да натисне някоя цифра, иначе веднага след приключването на предишния запис затваряше линията.</p>
<p>Hangup call – затваряме линията ако не е натисната цифра.</p>
<p>Тук имах див проблем с extension-a. В option има секция Extensions preferences в която за Voice Menus са заделени номера от 7000 до 7500. Проблема ми беше че ако избера в този диапазон не можех да набера номера, а ако се опитам да избера извън него не ми позволява. За това се наложи да го разширя до 8000 и сработи.</p>
<p>След това в Incoming Calling Rule само Destination полето се насочва към Voice Menu-то Extension-a който създадох.</p>
<p>Вече ако някой се обади на номера ми +3592490ХХХХ ще го посрещне записано съобщение което ще го информира кой номер да натисне за да се свърже с мен. Ако ме няма ще бъде насочен към гласовата ми поща, за да остави съобщение.</p>
<p>Какво следва</p>
<p>Когато намеря време и пари за това ми се иска да свържа и <a href="http://en.wikipedia.org/wiki/Plain_old_telephone_service" target="_blank" rel="noopener">POTS </a>към Asterisk-a. Тоест и</p>
<p>стария ми домашен телефонен номер от БТК да влезе в играта.</p>
<p>За целта ще ми е необходимо някакво устройство което да направи връзката.</p>
<p>Това устройство много ми харесва: CISCO SPA3102 2-Port Router with 1 FXO + 1 FXS</p>
<p><a href="http://www.voip-info.org/wiki/view/Linksys-Cisco+3102" target="_blank" rel="noopener">http://www.voip-info.org/wiki/view/Linksys-Cisco+3102</a></p>
<p>То може да свърши тази работа за мен.</p>
<p>Ето малко локална информация за него:</p>
<p><a href="http://hardwarebg.com/forum/showthread.php?p=1780708" target="_blank" rel="noopener">http://hardwarebg.com/forum/showthread.php?p=1780708</a></p>
<p><a href="http://www.comelsoft.com/product.php?mf=cisco&amp;lang=bul" target="_blank" rel="noopener">http://www.comelsoft.com/product.php?mf=cisco&amp;lang=bul</a></p>
<p>Създаване на Phone Book, тоест входящите обаждания да се идентифицират по Caller ID, и да се изписва Име и номер на търсещия, не само номера му.</p>
<p>Последното нещо което трябва да пробва е да получавам факсове, по принцип услугата е активиране по подразбиране от bgopen, но никога да сега не съм я ползвал и незнам точно как работи. Както и ми е интересно какви възможности за изпращане на факсове имам.</p>
<p>Надявам се темата да ви е била полезна.</p>
<p>The post <a rel="nofollow" href="https://blog.stefcho.eu/soho-pbx-with-dd-wrt-and-asterisk-1-4/">SoHo PBX with DD-WRT and Asterisk 1.4</a> appeared first on <a rel="nofollow" href="http://blog.stefcho.eu/">Stefcho&#039;s Tech Blog</a>.</p>
]]></content:encoded>
							<wfw:commentRss>https://blog.stefcho.eu/soho-pbx-with-dd-wrt-and-asterisk-1-4/feed/</wfw:commentRss>
		<slash:comments>3</slash:comments>
							</item>
	</channel>
</rss>
