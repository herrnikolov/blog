<!DOCTYPE html>
<html lang="en-US" prefix="og: http://ogp.me/ns#"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1"><title>Asterisk Archives - Stefcho's Tech Blog</title><meta property="og:locale" content="en_US"><meta property="og:type" content="object"><meta property="og:title" content="Asterisk Archives - Stefcho's Tech Blog"><meta property="og:url" content="https://blog.stefcho.eu/tag/asterisk/"><meta property="og:site_name" content="Stefcho's Tech Blog"><link rel="dns-prefetch" href="//fonts.googleapis.com"><link rel="dns-prefetch" href="//s.w.org"><script type="text/javascript" data-cfasync="false">
	var mi_version         = '7.4.2';
	var mi_track_user      = true;
	var mi_no_track_reason = '';
	
	var disableStr = 'ga-disable-UA-11255880-2';

	/* Function to detect opted out users */
	function __gaTrackerIsOptedOut() {
		return document.cookie.indexOf(disableStr + '=true') > -1;
	}

	/* Disable tracking if the opt-out cookie exists. */
	if ( __gaTrackerIsOptedOut() ) {
		window[disableStr] = true;
	}

	/* Opt-out function */
	function __gaTrackerOptout() {
	  document.cookie = disableStr + '=true; expires=Thu, 31 Dec 2099 23:59:59 UTC; path=/';
	  window[disableStr] = true;
	}
	
	if ( mi_track_user ) {
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
			(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
			m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','//www.google-analytics.com/analytics.js','__gaTracker');

		__gaTracker('create', 'UA-11255880-2', 'auto');
		__gaTracker('set', 'forceSSL', true);
		__gaTracker('require', 'displayfeatures');
		__gaTracker('require', 'linkid', 'linkid.js');
		__gaTracker('send','pageview');
	} else {
		console.log( "" );
		(function() {
			/* https://developers.google.com/analytics/devguides/collection/analyticsjs/ */
			var noopfn = function() {
				return null;
			};
			var noopnullfn = function() {
				return null;
			};
			var Tracker = function() {
				return null;
			};
			var p = Tracker.prototype;
			p.get = noopfn;
			p.set = noopfn;
			p.send = noopfn;
			var __gaTracker = function() {
				var len = arguments.length;
				if ( len === 0 ) {
					return;
				}
				var f = arguments[len-1];
				if ( typeof f !== 'object' || f === null || typeof f.hitCallback !== 'function' ) {
					console.log( 'Not running function __gaTracker(' + arguments[0] + " ....) because you are not being tracked. " + mi_no_track_reason );
					return;
				}
				try {
					f.hitCallback();
				} catch (ex) {

				}
			};
			__gaTracker.create = function() {
				return new Tracker();
			};
			__gaTracker.getByName = noopnullfn;
			__gaTracker.getAll = function() {
				return [];
			};
			__gaTracker.remove = noopfn;
			window['__gaTracker'] = __gaTracker;
					})();
		}
</script><link rel="stylesheet" id="wp-block-library-css" href="https://blog.stefcho.eu/wp-includes/css/dist/block-library/style.min.css" type="text/css" media="all"><link rel="stylesheet" id="micro-style-css" href="https://blog.stefcho.eu/wp-content/themes/micro/assets/css/master.css" type="text/css" media="all"><link rel="stylesheet" id="primary-font-css" href="https://fonts.googleapis.com/css?family=Roboto+Mono%3A400%2C500&subset=latin%2Ccyrillic%2Cgreek%2Cvietnamese&ver=5.1.1" type="text/css" media="all"><link rel="stylesheet" id="wpgdprc.css-css" href="https://blog.stefcho.eu/wp-content/plugins/wp-gdpr-compliance/assets/css/front.css" type="text/css" media="all"><style id="wpgdprc.css-inline-css" type="text/css">

            div.wpgdprc .wpgdprc-switch .wpgdprc-switch-inner:before { content: 'Yes'; }
            div.wpgdprc .wpgdprc-switch .wpgdprc-switch-inner:after { content: 'No'; }
        
</style><script type="text/javascript">
/* <![CDATA[ */
var monsterinsights_frontend = {"js_events_tracking":"true","download_extensions":"doc,exe,js,pdf,ppt,tgz,zip,xls","inbound_paths":"[]","home_url":"https:\/\/PLACEHOLDER.wpsho","hash_tracking":"false"};
/* ]]> */
</script><script type="text/javascript" src="https://blog.stefcho.eu/wp-content/plugins/google-analytics-for-wordpress/assets/js/frontend.min.js"></script><script type="text/javascript" src="https://blog.stefcho.eu/wp-includes/js/jquery/jquery.js"></script><script type="text/javascript" src="https://blog.stefcho.eu/wp-includes/js/jquery/jquery-migrate.min.js"></script><style data-context="foundation-flickity-css">/*! Flickity v2.0.2
http://flickity.metafizzy.co
---------------------------------------------- */.flickity-enabled{position:relative}.flickity-enabled:focus{outline:0}.flickity-viewport{overflow:hidden;position:relative;height:100%}.flickity-slider{position:absolute;width:100%;height:100%}.flickity-enabled.is-draggable{-webkit-tap-highlight-color:transparent;tap-highlight-color:transparent;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.flickity-enabled.is-draggable .flickity-viewport{cursor:move;cursor:-webkit-grab;cursor:grab}.flickity-enabled.is-draggable .flickity-viewport.is-pointer-down{cursor:-webkit-grabbing;cursor:grabbing}.flickity-prev-next-button{position:absolute;top:50%;width:44px;height:44px;border:none;border-radius:50%;background:#fff;background:hsla(0,0%,100%,.75);cursor:pointer;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.flickity-prev-next-button:hover{background:#fff}.flickity-prev-next-button:focus{outline:0;box-shadow:0 0 0 5px #09f}.flickity-prev-next-button:active{opacity:.6}.flickity-prev-next-button.previous{left:10px}.flickity-prev-next-button.next{right:10px}.flickity-rtl .flickity-prev-next-button.previous{left:auto;right:10px}.flickity-rtl .flickity-prev-next-button.next{right:auto;left:10px}.flickity-prev-next-button:disabled{opacity:.3;cursor:auto}.flickity-prev-next-button svg{position:absolute;left:20%;top:20%;width:60%;height:60%}.flickity-prev-next-button .arrow{fill:#333}.flickity-page-dots{position:absolute;width:100%;bottom:-25px;padding:0;margin:0;list-style:none;text-align:center;line-height:1}.flickity-rtl .flickity-page-dots{direction:rtl}.flickity-page-dots .dot{display:inline-block;width:10px;height:10px;margin:0 8px;background:#333;border-radius:50%;opacity:.25;cursor:pointer}.flickity-page-dots .dot.is-selected{opacity:1}</style><style data-context="foundation-slideout-css">.slideout-menu{position:fixed;left:0;top:0;bottom:0;right:auto;z-index:0;width:256px;overflow-y:auto;-webkit-overflow-scrolling:touch;display:none}.slideout-menu.pushit-right{left:auto;right:0}.slideout-panel{position:relative;z-index:1;will-change:transform}.slideout-open,.slideout-open .slideout-panel,.slideout-open body{overflow:hidden}.slideout-open .slideout-menu{display:block}.pushit{display:none}</style><style type="text/css">
		/* Normal background color and text */
		body, code, kbd, tt, var, pre, input, textarea, select {
			color:#00aa13;
			background-color:#060c08;
		}

		/* Inverted background color and text */
		a:hover,
		.entry .entry-title,
		.comment-form-comment label,
		.form-submit input[type="submit"],
		.widget_calendar caption,
		.comments-area .comments-title,
		.main-navigation.is-extended .sub-menu a:hover,
		.menu-toggle {
			color:#060c08;
			background-color:#00aa13;
		}

		/* Overwrite for links */
		a,
		.main-navigation .menu-item a,
		.main-navigation .sub-menu a:hover,
		button, input  {
			color:#00aa13;
		}

		/* Borders */
		input, button, textarea, select
		.site-footer,
		.homepage-welcome {
			border-color:#00aa13;
		}

		.entry .entry-title a,
		.entry .entry-title a:hover {
			color: #060c08;
		}
	</style><link rel="icon" href="https://blog.stefcho.eu/wp-content/uploads/2018/10/cropped-0-32x32.jpg" sizes="32x32"><link rel="icon" href="https://blog.stefcho.eu/wp-content/uploads/2018/10/cropped-0-192x192.jpg" sizes="192x192"><link rel="apple-touch-icon-precomposed" href="https://blog.stefcho.eu/wp-content/uploads/2018/10/cropped-0-180x180.jpg"><meta name="msapplication-TileImage" content="https://blog.stefcho.eu/wp-content/uploads/2018/10/cropped-0-270x270.jpg"><style>.ios7.web-app-mode.has-fixed header{ background-color: rgba(3,122,221,.88);}</style><style type="text/css" id="wp-custom-css">
			  .entry .entry-content {
    margin: 50px 0; }		</style></head><body class="archive tag tag-asterisk tag-55 hfeed">
<div id="page" class="site">
	<a class="skip-link screen-reader-text" href="#content">Skip to content</a>

	<header id="masthead" class="site-header"><div class="header-image">
			<a href="https://blog.stefcho.eu/" rel="home">
				<img src="/wp-content/uploads/2018/10/0.jpg" height="350" width="1400" alt=""></a>
		</div>
		
		<div class="row">
			<div class="columns small-12">
				<div class="site-branding">
											<p class="site-title"><a href="https://blog.stefcho.eu/" rel="home">Stefcho's Tech Blog</a></p>
											<p class="site-description">Software Development, Cloud, DevOps and PfSense</p>
									</div>

				<nav id="site-navigation" class="main-navigation"><button class="menu-toggle" aria-controls="primary-menu" aria-expanded="false">
						<span class="screen-reader-text">Menu</span>
					</button>
					<div class="menu-primary-container">
						<div id="primary-menu" class="menu"></div>
					</div>
				</nav></div>
		</div>
	</header><div id="content" class="site-content">

	<section class="section-fullwidth section-main"><div class="row">
			<div class="columns small-12 medium-8">
				<div id="primary" class="content-area">
					<main id="main" class="site-main"><header class="page-header"><h1 class="page-title">Tag: Asterisk</h1>						</header><article id="post-371" class="entry post-371 post type-post status-publish format-standard hentry category-technical tag-asterisk tag-asus tag-dd-wrt tag-voip"><header class="entry-header"><h2 class="entry-title"><a href="https://blog.stefcho.eu/upgrading-dd-wrt-firmware-on-asus-rt-n16-with-optware-asterisk-1-4/" rel="bookmark">Upgrading DD-WRT Firmware on Asus RT-N16 with Optware Asterisk 1.4</a></h2>		<div class="entry-meta">
			<span class="posted-on">Posted on <time class="entry-date published" datetime="2011-02-22T20:12:24+02:00">22/02/2011</time> - <time class="updated" datetime="2019-02-18T14:40:15+02:00">18/02/2019</time></span><span class="byline"> by <span class="author vcard"><a class="url fn n" href="https://blog.stefcho.eu/author/darko/">Stefan</a></span></span>		</div>
			</header><div class="entry-content">
		<p>As you remember before almost a year, I’ve setup a SoHo PBX on my router. Now it is time to upgrade the firmware. Usually I perform update on monthly bases. But after such extensible configuration for the PBX, and couple of month stable work, no changes were required.</p>
<p>Good place to start is this topic: <a href="https://secure.dd-wrt.com/phpBB2/viewtopic.php?t=52043" target="_blank">Firmware Recommendations – Still 14929 – 02/17/11</a></p>
<p>There are K26 firmware recommendations are for 15230, but I decide to use slightly newer build “dd-wrt.v24-15508_NEWD-2_K2.6_big.bin”<br>
But then it hit me, if I have to do all the configuration to enable Optware and Asterisk again, this would cost me hours of configuration.</p>
<p>After searching through the Wiki pages and the forum, found some relevant information:<br>
“<br>
/opt backup<br>
Now we have prepared /opt for adding more packages. We can also create backup of the whole /opt tree in case of router upgrade, to give preinstalled /opt to a friend or just safety backup. We will create such backup with<br>
~ # tar czf /tmp/opt-backup.tar.gz /opt<br>
Destination for /tmp/opt-backup.tar.gz should be large enough! Beware that /tmp is RAM. Destination should be disk or remote smbfs partition. Extracting /opt backup could be:<br>
cd /<br>
rm -rf opt/*<br>
tar xvzf /tmp/opt-backup.tar.gz<br>
If /opt space is tight and no packages requiring libstdc++ will be used (like Amule) then removing this large shared library is recommended<br>
~ # rm /opt/lib/libstdc\*<br>
will remove<br>
/opt/lib/libstdc++.so         /opt/lib/libstdc++.so.6       /opt/lib/libstdc++.so.6.0.8<br>
ipkg-opt downloads packages into /opt directory and erases them after installing. If you have enough free RAM and /jffs only then adding –tmp-dir /tmp is recommended instead of default /opt<br>
”</p>
<p>source: <a href="http://www.dd-wrt.com/wiki/index.php/Optware" target="_blank">http://www.dd-wrt.com/wiki/index.php/Optware</a></p>
<p>and something more meaningful:</p>
<p>“ gobbledigook<br>
DD-WRT User<br>
Joined: 06 Apr 2009<br>
Posts: 376<br>
Posted: Tue Jul 20, 2010 10:55 pm    Post subject:<br>
if optware is installed to an external drive (usb) then when settings are reset all you need to do is enable usb support in services, and select the mount point as /opt/ apply and reboot<br>
”<br>
Check out the whole topic here: <a href="http://www.dd-wrt.com/phpBB2/viewtopic.php?p=464506" target="_blank">http://www.dd-wrt.com/phpBB2/viewtopic.php?p=464506</a></p>
<p>After reading this I’ve gain some confidence, and decide to upgrade.</p>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2011/02/update_firmware.png"><img class="aligncenter size-medium wp-image-372" title="update_firmware_dd-wrt" src="https://blog.stefcho.eu/wp-content/uploads/2011/02/update_firmware-300x165.png" alt="update_firmware_dd-wrt" width="300" height="165" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/02/update_firmware-300x165.png 300w,https://blog.stefcho.eu/wp-content/uploads/2011/02/update_firmware.png 837w" sizes="(max-width: 300px) 100vw, 300px"></a></p>
<p>And it was a success, no additional configuration was needed, Asterisk was up and running straight after the upgrade of the firmware.</p>
<div id="_mcePaste" style="position: absolute; left: -10000px; top: 754px; width: 1px; height: 1px; overflow: hidden;">
<h2>Straight</h2>
</div>
	</div>

	<footer class="entry-footer"><span class="cat-links">Posted in <a href="https://blog.stefcho.eu/category/technical/" rel="category tag">Technical</a></span><span class="tags-links">Tagged <a href="https://blog.stefcho.eu/tag/asterisk/" rel="tag">Asterisk</a>, <a href="https://blog.stefcho.eu/tag/asus/" rel="tag">ASUS</a>, <a href="https://blog.stefcho.eu/tag/dd-wrt/" rel="tag">DD-WRT</a>, <a href="https://blog.stefcho.eu/tag/voip/" rel="tag">VoIP</a></span><span class="comments-link"><a href="https://blog.stefcho.eu/upgrading-dd-wrt-firmware-on-asus-rt-n16-with-optware-asterisk-1-4/#comments">1 Comment</a></span>	</footer></article><article id="post-288" class="entry post-288 post type-post status-publish format-standard hentry category-technical tag-asterisk tag-asus tag-dd-wrt tag-linksys tag-technical tag-voip"><header class="entry-header"><h2 class="entry-title"><a href="https://blog.stefcho.eu/soho-pbx-with-dd-wrt-and-asterisk-1-4/" rel="bookmark">SoHo PBX with DD-WRT and Asterisk 1.4</a></h2>		<div class="entry-meta">
			<span class="posted-on">Posted on <time class="entry-date published" datetime="2010-07-24T10:14:43+02:00">24/07/2010</time> - <time class="updated" datetime="2019-02-18T14:31:45+02:00">18/02/2019</time></span><span class="byline"> by <span class="author vcard"><a class="url fn n" href="https://blog.stefcho.eu/author/darko/">Stefan</a></span></span>		</div>
			</header><div class="entry-content">
		<p>Здравейте, от известно време изследвам една тема, а именно как да си направим телефонна централа за дома и малкия офис.</p>
<p>Първо си поиграх със Asterisk 1.4/1.6 на виртуална машина със soft phones.</p>
<p>Имах желание да изпробвам и с hard phones, въпроса беше коя марка и модел да избера. Тук на помощ дойде един от най – добрите сайтове, поне според мен за информация относно VoIP <a href="http://www.voip-info.org" target="_blank" rel="noopener">http://www.voip-info.org</a>/. След продължително търсене на подходящи телефони съвместими с Asterisk, избрах Linksys SPA 941. Избрах го защото, не са ми необходими цветен екран, видеокамера, power over Ethernet, wireless и повече от 1, 2 линии.</p>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2010/07/SPA941_lrg.jpg"><img class="size-medium wp-image-292" title="SPA941" src="https://blog.stefcho.eu/wp-content/uploads/2010/07/SPA941_lrg-292x300.jpg" alt="" width="292" height="300" srcset="https://blog.stefcho.eu/wp-content/uploads/2010/07/SPA941_lrg-292x300.jpg 292w,https://blog.stefcho.eu/wp-content/uploads/2010/07/SPA941_lrg.jpg 330w" sizes="(max-width: 292px) 100vw, 292px"></a></p>
<p>Тук може да видите повече информация за него: <a href="http://www.voip-info.org/wiki/view/SPA-941" target="_blank" rel="noopener">http://www.voip-info.org/wiki/view/SPA-941</a></p>
<p>За да добиете представа какви алтернативи има вижте новата гама на Cisco, тук има едно прилично ревю:</p>
<p><a href="http://www.asterisktutorials.com/first-look-at-the-cisco-spa500-phones/" target="_blank" rel="noopener">http://www.asterisktutorials.com/first-look-at-the-cisco-spa500-phones/</a></p>
<p>В един момент ми попадна брошура на JAR, и какво да видя в нея SPA 921/941 на доста приятни цени. Не се сдържах и си взех два. Все още са в каталога им като цената на 941 вече е 200 лева.</p>
<p>С помощ на този видео tutorial ги свързах с Asterisk-a за 10 минути.</p>
<p><a href="http://www.asterisktutorials.com/linksys-spa941942-sip-phones/" target="_blank" rel="noopener">http://www.asterisktutorials.com/linksys-spa941942-sip-phones/</a></p>
<p>Впоследствие ги flash-нах до последната версия на firmware-a, която в момента е 5.1.8. Става лесно и и бързо.</p>
<p><a href="http://www.cisco.com/en/US/products/ps10038/index.html" target="_blank" rel="noopener">http://www.cisco.com/en/US/products/ps10038/index.html</a></p>
<p>От няколко години използвам OpenWRT и DD-WRT чудесни дистрибуции побираща се на безжични рутери. И двете предлагат уникални функции които са недостъпни от stock firmware-a на който и да е безжичен рутер.</p>
<p>На един етап започнаха да се появяват версии включващи и Asterisk. Реших да пробвам как ще се държи ако сложа и телефонната централа на устройство. Като се има предвид ползите от такава играчка, без движещи се части,  без шум и ниска консумация на електричество.</p>
<p>Разбира се тук е момента да спомена че е добре да се провери за съвместимост на модела със въпросната дистрибуция.</p>
<p>Ето тук за DD-WRT:</p>
<p><a href="http://www.dd-wrt.com/wiki/index.php/Supported_Devices" target="_blank" rel="noopener">http://www.dd-wrt.com/wiki/index.php/Supported_Devices</a></p>
<p>и тук за OpenWRT</p>
<p><a href="http://wiki.openwrt.org/toh/start" target="_blank" rel="noopener">http://wiki.openwrt.org/toh/start</a></p>
<p>Като се замисля последните няколко безжични рутери които са ми попадали в ръцете не са издържали повече от 5 минути със stock firmware.</p>
<p>Като критерии за оценка на устройство може да се вземе Flash Memory. Това е памет на която се инсталира операционната система.  Тоест ако имате 4 MB не можете да сложите такава която изисква 8 MB, примерно. Правилото на Мечо Пух “Колкото повече, Толкова Повече” тук е валидно с пълна сила. Поради факта че ползвам големите build-ове на dd-wrt изискващи поне 8 MB си харесах Asus RT-N16. Той е със 128MB RAM, 32 MB Flash Memory,  a процесор му е на 480 MHz. Освен това има 2 USB 2.0 порта на които може да включи флашка, външен диск или принтер.</p>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2010/07/rt_n16_209.jpg"><img class="alignnone size-medium wp-image-294" title="RT-N16" src="https://blog.stefcho.eu/wp-content/uploads/2010/07/rt_n16_209-300x225.jpg" alt="" width="300" height="225" srcset="https://blog.stefcho.eu/wp-content/uploads/2010/07/rt_n16_209-300x225.jpg 300w,https://blog.stefcho.eu/wp-content/uploads/2010/07/rt_n16_209.jpg 600w" sizes="(max-width: 300px) 100vw, 300px"></a></p>
<p>Незнам защо но този модел не се предлагаше в България доста време, въпреки че е излязъл още преди една – две години. Както и да е, от преди месец – два се предлага в Мост. Цената му е около 270 лева.</p>
<p>Последния hardware който ми беше необходим е един USB Flash Drive, или както ги наричаме флаш-ки. На него сложих Optware, за повече информация : <a href="http://en.wikipedia.org/wiki/Optware" target="_blank" rel="noopener">http://en.wikipedia.org/wiki/Optware</a></p>
<p>Не можах да си намеря PQI Cool Drive U338 Pro която има доста прилични скорости и се задоволих с една PQI Cool Drive U339H, Titanium 4 GB за около 25 лева. Забелязвате ли как вече не пишат скоростите на read/write на флашките?</p>
<p>И така да видим разходите до тук:</p>
<p>Asus RT-N16 – 270 лв.</p>
<p>Linksys SPA 941 x2 – 350 лв.</p>
<p>PQI U339H, Titanium 4GB – 25 лв.</p>
<p>Общо: 645 лв.</p>
<p>Преди да пристъпя към инсталация и конфигурация прочетох тази тема във форума:</p>
<p><a href="http://www.dd-wrt.com/phpBB2/viewtopic.php?t=43787&postdays=0&postorder=asc&start=0" target="_blank" rel="noopener">http://www.dd-wrt.com/phpBB2/viewtopic.php?t=43787&postdays=0&postorder=asc&start=0</a></p>
<p>GUI-то описано там не сработи и за мен, за това реших да рискувам с asterisk-gui, вместо него.</p>
<p>Да преминем към инсталацията:</p>
<p>Свалих последната налична версия от www.dd-wrt.com: dd-wrt.v24-14471_NEWD-2_K2.6_big.bin, вече има по – нови.</p>
<p>След това следвах този guide за да инсталирам и Optware:</p>
<p><a href="http://www.dd-wrt.com/phpBB2/viewtopic.php?t=43787&postdays=0&postorder=asc&start=0" target="_blank" rel="noopener">http://www.dd-wrt.com/wiki/index.php/Optware%2C_the_Right_Way</a></p>
<p>и вече имам и този пакет</p>
<p>asterisk14 – 1.4.22.1-1 – Asterisk is an Open Source PBX and telephony toolkit.</p>
<p>След което добавих всички пакети със звуци използвайки ipkg-opt:</p>
<p>asterisk14-core-sounds-en-alaw – 1.4.8-1 – asterisk-core-sounds-en-alaw</p>
<p>asterisk14-core-sounds-en-g729 – 1.4.8-1 – asterisk-core-sounds-en-g729</p>
<p>asterisk14-core-sounds-en-gsm – 1.4.8-1 – asterisk-core-sounds-en-gsm</p>
<p>asterisk14-core-sounds-en-ulaw – 1.4.8-1 – asterisk-core-sounds-en-ulaw</p>
<p>asterisk14-extra-sounds-en-alaw – 1.4.7-1 – asterisk-extra-sounds-en-alaw</p>
<p>asterisk14-extra-sounds-en-g729 – 1.4.7-1 – asterisk-extra-sounds-en-g729</p>
<p>asterisk14-extra-sounds-en-gsm – 1.4.7-1 – asterisk-extra-sounds-en-gsm</p>
<p>asterisk14-extra-sounds-en-ulaw – 1.4.7-1 – asterisk-extra-sounds-en-ulaw</p>
<p>asterisk14-moh-freeplay-alaw – 0.0.0-1 – asterisk-moh-freeplay-alaw</p>
<p>asterisk14-moh-freeplay-g729 – 0.0.0-1 – asterisk-moh-freeplay-g729</p>
<p>asterisk14-moh-freeplay-gsm – 0.0.0-1 – asterisk-moh-freeplay-gsm</p>
<p>asterisk14-moh-freeplay-ulaw – 0.0.0-1 – asterisk-moh-freeplay-ulaw</p>
<p>и накрая добавих и GUI-то:</p>
<p>asterisk-gui – 2.0svn-r4045-1 – Asterisk-GUI is a framework for the creation of graphical interfaces for configuring</p>
<p>За да конфигурирам GUI-то използвах това упътване:</p>
<p><a href="http://www.asteriskguru.com/tutorials/asterisk_gui.html" target="_blank" rel="noopener">http://www.asteriskguru.com/tutorials/asterisk_gui.html</a></p>
<p>След като настроих Asterisk-a по мой вкус, вече имам няколко soft phone-a и двата SPA 941 свързани и работещи.</p>
<p>Това което ми липсваше на този момент е връзка със останалия свят.</p>
<p>Много добра тема по въпроса може да намерите тук:</p>
<p><a href="http://www.kaldata.com/forums/index.php?showtopic=6681&st=0" target="_blank" rel="noopener">http://www.kaldata.com/forums/index.php?showtopic=6681&st=0</a></p>
<p>ето и няколко упътвания:</p>
<p><a href="http://akrozia.org/?tag=asterisk" target="_blank" rel="noopener">http://akrozia.org/?tag=asterisk</a></p>
<p><a href="http://ygeorgiev.net/archives/56" target="_blank" rel="noopener">http://ygeorgiev.net/archives/56</a></p>
<p><a href="http://forum.spectrumnet.bg/showthread.php?t=2573" target="_blank" rel="noopener">http://forum.spectrumnet.bg/showthread.php?t=2573</a></p>
<p>Накрая се насочих към BGOpen.</p>
<p>Регистрирах се, захраних сметката си с известна сума. И вече имам телефонен номер ала +3592490ХХХХ.</p>
<p>Прегледах няколко интересни статии по въпроса:</p>
<p><a href="http://ygeorgiev.net/archives/56" target="_blank" rel="noopener">http://ygeorgiev.net/archives/56</a></p>
<p><a href="http://forum.spectrumnet.bg/showthread.php?t=2573" target="_blank" rel="noopener">http://forum.spectrumnet.bg/showthread.php?t=2573</a></p>
<p>Сега е необходимо да научим Asterisk-a за този номер, и как да го ползва.</p>
<p>Първо отиваме в Trunks, VOIP Trunks и избираме + New SIP/IAX Trunk</p>
<p>Избираме тип-а – SIP</p>
<p>Така и не успях да го подкарам с IAX, ако някой го е подкарал и има впечатления нека ги сподели.</p>
<p>За Hostname: sip.bgopen.net</p>
<p>Username / Password – каквито сте избрали при регистрация в bgopen.</p>
<p>Codecs: <a href="http://www.bgopen.net/information.html#%D0%9A%D0%B0%D0%BA%D0%B2%D0%B8_%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B8_%D1%81%D0%B0_%D0%BD%D0%B5%D0%BE%D0%B1%D1%85%D0%BE%D0%B4%D0%B8%D0%BC%D0%B8_%D0%B7%D0%B0_%D0%B2%D0%BA%D0%BB%D1%8E%D1%87%D0%B2%D0%B0%D0%BD%D0%B5_%D0%BD%D0%B0_%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D0%BD%D0%BE_SIP_%D1%83%D1%81%D1%82%D1%80%D0%BE%D0%B9%D1%81%D1%82%D0%B2%D0%BE_%D0%B8%D0%BB%D0%B8_%D1%81%D0%BE%D1%84%D1%82%D1%83%D0%B5%D1%80%D0%B5%D0%BD_%D1%82%D0%B5%D0%BB%D0%B5%D1%84%D0%BE%D0%BD_%D0%BA%D1%8A%D0%BC_%D0%BC%D1%80%D0%B5%D0%B6%D0%B0%D1%82%D0%B0_%D0%BD%D0%B0_BGOPEN.NET" target="_blank" rel="noopener">според FAQ-a на BGOpen </a></p>
<p>Можем да ползваме G.729, G.723.1, GSM, iLBC (поне един от изброените)</p>
<p>За CallerID и Enable Remote MWI не съм сигурен, за това ги оставих празни.</p>
<p>След това отидох в Outgoing Calling Rule, и създадох нов като Pattern: _9. – тоест всички номера които имат 9 от пред се насочват към създадения преди малко Trunk.</p>
<p>Избрах името което съм дал на Trunk-a в полето Use Trunk</p>
<p>Strip – 1 тоест да маха 9-тката при набиране на вън.</p>
<p>Редактирах DialPlan-a си да включва и Outgoing Calling Rule-a</p>
<p>Сега вече мога да набирам не само слушалките директно свързани към Asterisk, но и каквито ми хрумне навън. Единствено трябва да сложа една 9-ка пред номера.</p>
<p>Дойде време да могат и мен да ме търсят по новия ми номер +3592490ХХХХ.</p>
<p>За целта отидох в Incoming Calling Rules, създадох ново, като избрах</p>
<p>Trunk – който създадох по – горе</p>
<p>Time Interval – None</p>
<p>Pattern: _X. – да препраща всички номера към</p>
<p>Destination: Тук мога да избера номер или voice mail на някоя от слушалките. За тестове избрах един номер, но аз не искам това, а Voice Menus за да си създам IVR.</p>
<p>Вече имате входящи и изходящи обаждания и гласова поща.</p>
<p>Да нагласим Voice Menus</p>
<p>Създадох ново, избрах му name и extension</p>
<p>Тук трябва да се добавят Actions, действия които ще се извършват едно след друго.</p>
<p>Ето и моите:</p>
<p>Answer the call – все пак трябва да вдигнем на човека</p>
<p>Set(TIMEOUT(digit)=5) – колко време чакаме преди да спрем да чакаме за бутон</p>
<p>Set(TIMEOUT(response)=20) – колко време да чакаме за натискане на бутон</p>
<p>Play record/X & Listen for KeyPress events – пускаме на човека записано съобщение с инструкции коя цифра с кого ще го свърже, ако бъде натисната</p>
<p>Play record/Silance & Listen for KeyPress events – наложи се да направя втори запис, със тишина, за да дам време на обаждащия се да натисне някоя цифра, иначе веднага след приключването на предишния запис затваряше линията.</p>
<p>Hangup call – затваряме линията ако не е натисната цифра.</p>
<p>Тук имах див проблем с extension-a. В option има секция Extensions preferences в която за Voice Menus са заделени номера от 7000 до 7500. Проблема ми беше че ако избера в този диапазон не можех да набера номера, а ако се опитам да избера извън него не ми позволява. За това се наложи да го разширя до 8000 и сработи.</p>
<p>След това в Incoming Calling Rule само Destination полето се насочва към Voice Menu-то Extension-a който създадох.</p>
<p>Вече ако някой се обади на номера ми +3592490ХХХХ ще го посрещне записано съобщение което ще го информира кой номер да натисне за да се свърже с мен. Ако ме няма ще бъде насочен към гласовата ми поща, за да остави съобщение.</p>
<p>Какво следва</p>
<p>Когато намеря време и пари за това ми се иска да свържа и <a href="http://en.wikipedia.org/wiki/Plain_old_telephone_service" target="_blank" rel="noopener">POTS </a>към Asterisk-a. Тоест и</p>
<p>стария ми домашен телефонен номер от БТК да влезе в играта.</p>
<p>За целта ще ми е необходимо някакво устройство което да направи връзката.</p>
<p>Това устройство много ми харесва: CISCO SPA3102 2-Port Router with 1 FXO + 1 FXS</p>
<p><a href="http://www.voip-info.org/wiki/view/Linksys-Cisco+3102" target="_blank" rel="noopener">http://www.voip-info.org/wiki/view/Linksys-Cisco+3102</a></p>
<p>То може да свърши тази работа за мен.</p>
<p>Ето малко локална информация за него:</p>
<p><a href="http://hardwarebg.com/forum/showthread.php?p=1780708" target="_blank" rel="noopener">http://hardwarebg.com/forum/showthread.php?p=1780708</a></p>
<p><a href="http://www.comelsoft.com/product.php?mf=cisco&lang=bul" target="_blank" rel="noopener">http://www.comelsoft.com/product.php?mf=cisco&lang=bul</a></p>
<p>Създаване на Phone Book, тоест входящите обаждания да се идентифицират по Caller ID, и да се изписва Име и номер на търсещия, не само номера му.</p>
<p>Последното нещо което трябва да пробва е да получавам факсове, по принцип услугата е активиране по подразбиране от bgopen, но никога да сега не съм я ползвал и незнам точно как работи. Както и ми е интересно какви възможности за изпращане на факсове имам.</p>
<p>Надявам се темата да ви е била полезна.</p>
	</div>

	<footer class="entry-footer"><span class="cat-links">Posted in <a href="https://blog.stefcho.eu/category/technical/" rel="category tag">Technical</a></span><span class="tags-links">Tagged <a href="https://blog.stefcho.eu/tag/asterisk/" rel="tag">Asterisk</a>, <a href="https://blog.stefcho.eu/tag/asus/" rel="tag">ASUS</a>, <a href="https://blog.stefcho.eu/tag/dd-wrt/" rel="tag">DD-WRT</a>, <a href="https://blog.stefcho.eu/tag/linksys/" rel="tag">Linksys</a>, <a href="https://blog.stefcho.eu/tag/technical/" rel="tag">Technical</a>, <a href="https://blog.stefcho.eu/tag/voip/" rel="tag">VoIP</a></span><span class="comments-link"><a href="https://blog.stefcho.eu/soho-pbx-with-dd-wrt-and-asterisk-1-4/#comments">3 Comments</a></span>	</footer></article></main></div>
			</div>
			<div class="columns small-12 medium-4">
				
<aside id="secondary" class="widget-area" role="complementary"><section id="tag_cloud-3" class="widget widget_tag_cloud"><h2 class="widget-title">Tags</h2><div class="tagcloud"><a href="https://blog.stefcho.eu/tag/adds/" class="tag-cloud-link tag-link-73 tag-link-position-1" style="font-size: 10.082644628099pt;" aria-label="ADDS (2 items)">ADDS</a>
<a href="https://blog.stefcho.eu/tag/aes-ni/" class="tag-cloud-link tag-link-114 tag-link-position-2" style="font-size: 10.082644628099pt;" aria-label="AES-NI (2 items)">AES-NI</a>
<a href="https://blog.stefcho.eu/tag/asterisk/" class="tag-cloud-link tag-link-55 tag-link-position-3" style="font-size: 10.082644628099pt;" aria-label="Asterisk (2 items)">Asterisk</a>
<a href="https://blog.stefcho.eu/tag/asus/" class="tag-cloud-link tag-link-60 tag-link-position-4" style="font-size: 11.471074380165pt;" aria-label="ASUS (3 items)">ASUS</a>
<a href="https://blog.stefcho.eu/tag/azure/" class="tag-cloud-link tag-link-94 tag-link-position-5" style="font-size: 11.471074380165pt;" aria-label="Azure (3 items)">Azure</a>
<a href="https://blog.stefcho.eu/tag/captive-portal/" class="tag-cloud-link tag-link-83 tag-link-position-6" style="font-size: 11.471074380165pt;" aria-label="Captive Portal (3 items)">Captive Portal</a>
<a href="https://blog.stefcho.eu/tag/cell-phone/" class="tag-cloud-link tag-link-64 tag-link-position-7" style="font-size: 8pt;" aria-label="Cell Phone (1 item)">Cell Phone</a>
<a href="https://blog.stefcho.eu/tag/centos/" class="tag-cloud-link tag-link-86 tag-link-position-8" style="font-size: 8pt;" aria-label="CentOS (1 item)">CentOS</a>
<a href="https://blog.stefcho.eu/tag/creative/" class="tag-cloud-link tag-link-66 tag-link-position-9" style="font-size: 10.082644628099pt;" aria-label="Creative (2 items)">Creative</a>
<a href="https://blog.stefcho.eu/tag/dd-wrt/" class="tag-cloud-link tag-link-57 tag-link-position-10" style="font-size: 14.363636363636pt;" aria-label="DD-WRT (6 items)">DD-WRT</a>
<a href="https://blog.stefcho.eu/tag/dns/" class="tag-cloud-link tag-link-92 tag-link-position-11" style="font-size: 8pt;" aria-label="DNS (1 item)">DNS</a>
<a href="https://blog.stefcho.eu/tag/hyper-v/" class="tag-cloud-link tag-link-67 tag-link-position-12" style="font-size: 12.628099173554pt;" aria-label="Hyper-V (4 items)">Hyper-V</a>
<a href="https://blog.stefcho.eu/tag/ldap/" class="tag-cloud-link tag-link-74 tag-link-position-13" style="font-size: 10.082644628099pt;" aria-label="LDAP (2 items)">LDAP</a>
<a href="https://blog.stefcho.eu/tag/learning/" class="tag-cloud-link tag-link-102 tag-link-position-14" style="font-size: 10.082644628099pt;" aria-label="Learning (2 items)">Learning</a>
<a href="https://blog.stefcho.eu/tag/linksys/" class="tag-cloud-link tag-link-56 tag-link-position-15" style="font-size: 8pt;" aria-label="Linksys (1 item)">Linksys</a>
<a href="https://blog.stefcho.eu/tag/microsoft/" class="tag-cloud-link tag-link-63 tag-link-position-16" style="font-size: 11.471074380165pt;" aria-label="Microsoft (3 items)">Microsoft</a>
<a href="https://blog.stefcho.eu/tag/mikrotik-routerboard-rb250g/" class="tag-cloud-link tag-link-79 tag-link-position-17" style="font-size: 8pt;" aria-label="Mikrotik RouterBoard RB250G (1 item)">Mikrotik RouterBoard RB250G</a>
<a href="https://blog.stefcho.eu/tag/network/" class="tag-cloud-link tag-link-65 tag-link-position-18" style="font-size: 19.107438016529pt;" aria-label="Network (17 items)">Network</a>
<a href="https://blog.stefcho.eu/tag/openldap/" class="tag-cloud-link tag-link-87 tag-link-position-19" style="font-size: 8pt;" aria-label="OpenLDAP (1 item)">OpenLDAP</a>
<a href="https://blog.stefcho.eu/tag/openvpn/" class="tag-cloud-link tag-link-72 tag-link-position-20" style="font-size: 16.561983471074pt;" aria-label="OpenVPN (10 items)">OpenVPN</a>
<a href="https://blog.stefcho.eu/tag/openwrt/" class="tag-cloud-link tag-link-71 tag-link-position-21" style="font-size: 8pt;" aria-label="OpenWrt (1 item)">OpenWrt</a>
<a href="https://blog.stefcho.eu/tag/pfcenter/" class="tag-cloud-link tag-link-85 tag-link-position-22" style="font-size: 8pt;" aria-label="pfCenter (1 item)">pfCenter</a>
<a href="https://blog.stefcho.eu/tag/pfsemse/" class="tag-cloud-link tag-link-95 tag-link-position-23" style="font-size: 8pt;" aria-label="pfSemse (1 item)">pfSemse</a>
<a href="https://blog.stefcho.eu/tag/pfsense/" class="tag-cloud-link tag-link-61 tag-link-position-24" style="font-size: 22pt;" aria-label="pfSense (31 items)">pfSense</a>
<a href="https://blog.stefcho.eu/tag/pfsense-2-0-rc1/" class="tag-cloud-link tag-link-81 tag-link-position-25" style="font-size: 13.553719008264pt;" aria-label="pfSense 2.0 RC1 (5 items)">pfSense 2.0 RC1</a>
<a href="https://blog.stefcho.eu/tag/pfsense-2-0-rc3/" class="tag-cloud-link tag-link-84 tag-link-position-26" style="font-size: 14.363636363636pt;" aria-label="pfSense 2.0 RC3 (6 items)">pfSense 2.0 RC3</a>
<a href="https://blog.stefcho.eu/tag/pfsense-2-2/" class="tag-cloud-link tag-link-90 tag-link-position-27" style="font-size: 11.471074380165pt;" aria-label="pfSense 2.2 (3 items)">pfSense 2.2</a>
<a href="https://blog.stefcho.eu/tag/pfsense-2-4-3/" class="tag-cloud-link tag-link-98 tag-link-position-28" style="font-size: 8pt;" aria-label="pfSense 2.4.3 (1 item)">pfSense 2.4.3</a>
<a href="https://blog.stefcho.eu/tag/pki/" class="tag-cloud-link tag-link-77 tag-link-position-29" style="font-size: 10.082644628099pt;" aria-label="PKI (2 items)">PKI</a>
<a href="https://blog.stefcho.eu/tag/radius/" class="tag-cloud-link tag-link-75 tag-link-position-30" style="font-size: 10.082644628099pt;" aria-label="RADIUS (2 items)">RADIUS</a>
<a href="https://blog.stefcho.eu/tag/routing/" class="tag-cloud-link tag-link-80 tag-link-position-31" style="font-size: 8pt;" aria-label="Routing (1 item)">Routing</a>
<a href="https://blog.stefcho.eu/tag/site-to-site/" class="tag-cloud-link tag-link-76 tag-link-position-32" style="font-size: 11.471074380165pt;" aria-label="Site To Site (3 items)">Site To Site</a>
<a href="https://blog.stefcho.eu/tag/technical/" class="tag-cloud-link tag-link-97 tag-link-position-33" style="font-size: 14.942148760331pt;" aria-label="Technical (7 items)">Technical</a>
<a href="https://blog.stefcho.eu/tag/ubuntu/" class="tag-cloud-link tag-link-99 tag-link-position-34" style="font-size: 8pt;" aria-label="Ubuntu (1 item)">Ubuntu</a>
<a href="https://blog.stefcho.eu/tag/uncategorized/" class="tag-cloud-link tag-link-96 tag-link-position-35" style="font-size: 8pt;" aria-label="Uncategorized (1 item)">Uncategorized</a>
<a href="https://blog.stefcho.eu/tag/vlan/" class="tag-cloud-link tag-link-78 tag-link-position-36" style="font-size: 8pt;" aria-label="VLAN (1 item)">VLAN</a>
<a href="https://blog.stefcho.eu/tag/vmware/" class="tag-cloud-link tag-link-62 tag-link-position-37" style="font-size: 14.942148760331pt;" aria-label="VMWare (7 items)">VMWare</a>
<a href="https://blog.stefcho.eu/tag/voip/" class="tag-cloud-link tag-link-59 tag-link-position-38" style="font-size: 10.082644628099pt;" aria-label="VoIP (2 items)">VoIP</a>
<a href="https://blog.stefcho.eu/tag/vyatta/" class="tag-cloud-link tag-link-70 tag-link-position-39" style="font-size: 8pt;" aria-label="Vyatta (1 item)">Vyatta</a>
<a href="https://blog.stefcho.eu/tag/web-sites/" class="tag-cloud-link tag-link-93 tag-link-position-40" style="font-size: 8pt;" aria-label="Web Sites (1 item)">Web Sites</a>
<a href="https://blog.stefcho.eu/tag/windows-server-8/" class="tag-cloud-link tag-link-88 tag-link-position-41" style="font-size: 8pt;" aria-label="Windows Server 8 (1 item)">Windows Server 8</a>
<a href="https://blog.stefcho.eu/tag/windows-server-2008-r2/" class="tag-cloud-link tag-link-68 tag-link-position-42" style="font-size: 12.628099173554pt;" aria-label="Windows Server 2008 R2 (4 items)">Windows Server 2008 R2</a>
<a href="https://blog.stefcho.eu/tag/windows-server-2012-r2/" class="tag-cloud-link tag-link-91 tag-link-position-43" style="font-size: 8pt;" aria-label="Windows Server 2012 R2 (1 item)">Windows Server 2012 R2</a>
<a href="https://blog.stefcho.eu/tag/wireless/" class="tag-cloud-link tag-link-82 tag-link-position-44" style="font-size: 8pt;" aria-label="Wireless (1 item)">Wireless</a>
<a href="https://blog.stefcho.eu/tag/workstation-8/" class="tag-cloud-link tag-link-89 tag-link-position-45" style="font-size: 8pt;" aria-label="Workstation 8 (1 item)">Workstation 8</a></div>
</section><section id="archives-3" class="widget widget_archive"><h2 class="widget-title">Archives</h2>		<ul><li><a href="https://blog.stefcho.eu/2019/03/">March 2019</a></li>
	<li><a href="https://blog.stefcho.eu/2019/02/">February 2019</a></li>
	<li><a href="https://blog.stefcho.eu/2018/10/">October 2018</a></li>
	<li><a href="https://blog.stefcho.eu/2018/08/">August 2018</a></li>
	<li><a href="https://blog.stefcho.eu/2016/03/">March 2016</a></li>
	<li><a href="https://blog.stefcho.eu/2015/04/">April 2015</a></li>
	<li><a href="https://blog.stefcho.eu/2015/03/">March 2015</a></li>
	<li><a href="https://blog.stefcho.eu/2015/01/">January 2015</a></li>
	<li><a href="https://blog.stefcho.eu/2012/02/">February 2012</a></li>
	<li><a href="https://blog.stefcho.eu/2011/10/">October 2011</a></li>
	<li><a href="https://blog.stefcho.eu/2011/09/">September 2011</a></li>
	<li><a href="https://blog.stefcho.eu/2011/08/">August 2011</a></li>
	<li><a href="https://blog.stefcho.eu/2011/07/">July 2011</a></li>
	<li><a href="https://blog.stefcho.eu/2011/06/">June 2011</a></li>
	<li><a href="https://blog.stefcho.eu/2011/05/">May 2011</a></li>
	<li><a href="https://blog.stefcho.eu/2011/04/">April 2011</a></li>
	<li><a href="https://blog.stefcho.eu/2011/03/">March 2011</a></li>
	<li><a href="https://blog.stefcho.eu/2011/02/">February 2011</a></li>
	<li><a href="https://blog.stefcho.eu/2010/07/">July 2010</a></li>
		</ul></section><section id="custom_html-3" class="widget_text widget widget_custom_html"><div class="textwidget custom-html-widget"><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><ins class="adsbygoogle" style="display:inline-block;width:160px;height:600px" data-ad-client="ca-pub-3838187216577892" data-ad-slot="5149186217"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script></div></section></aside></div>
		</div>
	</section></div>

	<footer id="colophon" class="site-footer section-fullwidth"><div class="row">
			<div class="columns small-12">
				<div class="site-info">
					<a href="https://wordpress.org/">Proudly powered by WordPress</a>
					<span class="sep"> | </span>
					Theme: micro, developed by <a href="http://devrix.com">DevriX</a>.				</div>
			</div>
		</div>
	</footer></div>

<script type="text/javascript" src="https://blog.stefcho.eu/wp-content/themes/micro/assets/scripts/scripts.min.js"></script><script type="text/javascript">
/* <![CDATA[ */
var wpgdprcData = {"ajaxURL":"https:\/\/blog.stefcho.eu\/wp-admin\/admin-ajax.php","ajaxSecurity":"247c927df7","consentVersion":"1","consentStatus":"0","isMultisite":"","path":"\/","blogId":""};
/* ]]> */
</script><script type="text/javascript" src="https://blog.stefcho.eu/wp-content/plugins/wp-gdpr-compliance/assets/js/front.js"></script></body></html>
