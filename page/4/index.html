<!DOCTYPE html>
<html lang="en-US"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1"><title>Stefcho's Tech Blog - Page 4 of 7 - Software Development, Cloud, DevOps and PfSense</title><meta name="description" content="Software Development, Cloud, DevOps and PfSense"><meta property="og:locale" content="en_US"><meta property="og:type" content="website"><meta property="og:title" content="Stefcho's Tech Blog - Page 4 of 7 - Software Development, Cloud, DevOps and PfSense"><meta property="og:description" content="Software Development, Cloud, DevOps and PfSense"><meta property="og:url" content="https://blog.stefcho.eu/"><meta property="og:site_name" content="Stefcho's Tech Blog"><meta name="msvalidate.01" content="820A9AB94DD773C49A23A3B5ABC83853"><script type="application/ld+json" class="yoast-schema-graph yoast-schema-graph--main">{
    "@context": "https://schema.org",
    "@graph": [
        {
            "@type": "Organization",
            "@id": "https://blog.stefcho.eu/#organization",
            "name": "",
            "url": "https://blog.stefcho.eu/",
            "sameAs": []
        },
        {
            "@type": "WebSite",
            "@id": "https://blog.stefcho.eu/#website",
            "url": "https://blog.stefcho.eu/",
            "name": "Stefcho's Tech Blog",
            "publisher": {
                "@id": "https://blog.stefcho.eu/#organization"
            },
            "potentialAction": {
                "@type": "SearchAction",
                "target": "https://blog.stefcho.eu/?s={search_term_string}",
                "query-input": "required name=search_term_string"
            }
        },
        {
            "@type": "WebPage",
            "@id": "https://blog.stefcho.eu/page/4/#webpage",
            "url": "https://blog.stefcho.eu/page/4/",
            "inLanguage": "en-US",
            "name": "Stefcho's Tech Blog - Page 4 of 7 - Software Development, Cloud, DevOps and PfSense",
            "isPartOf": {
                "@id": "https://blog.stefcho.eu/#website"
            },
            "about": {
                "@id": "https://blog.stefcho.eu/#organization"
            },
            "description": "Software Development, Cloud, DevOps and PfSense"
        }
    ]
}</script><link rel="dns-prefetch" href="//fonts.googleapis.com"><link rel="dns-prefetch" href="//s.w.org"><script type="text/javascript" data-cfasync="false">
	var mi_version         = '7.6.0';
	var mi_track_user      = true;
	var mi_no_track_reason = '';
	
	var disableStr = 'ga-disable-UA-11255880-2';

	/* Function to detect opted out users */
	function __gaTrackerIsOptedOut() {
		return document.cookie.indexOf(disableStr + '=true') > -1;
	}

	/* Disable tracking if the opt-out cookie exists. */
	if ( __gaTrackerIsOptedOut() ) {
		window[disableStr] = true;
	}

	/* Opt-out function */
	function __gaTrackerOptout() {
	  document.cookie = disableStr + '=true; expires=Thu, 31 Dec 2099 23:59:59 UTC; path=/';
	  window[disableStr] = true;
	}
	
	if ( mi_track_user ) {
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
			(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
			m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','//www.google-analytics.com/analytics.js','__gaTracker');

		__gaTracker('create', 'UA-11255880-2', 'auto');
		__gaTracker('set', 'forceSSL', true);
		__gaTracker('require', 'displayfeatures');
		__gaTracker('send','pageview');
	} else {
		console.log( "" );
		(function() {
			/* https://developers.google.com/analytics/devguides/collection/analyticsjs/ */
			var noopfn = function() {
				return null;
			};
			var noopnullfn = function() {
				return null;
			};
			var Tracker = function() {
				return null;
			};
			var p = Tracker.prototype;
			p.get = noopfn;
			p.set = noopfn;
			p.send = noopfn;
			var __gaTracker = function() {
				var len = arguments.length;
				if ( len === 0 ) {
					return;
				}
				var f = arguments[len-1];
				if ( typeof f !== 'object' || f === null || typeof f.hitCallback !== 'function' ) {
					console.log( 'Not running function __gaTracker(' + arguments[0] + " ....) because you are not being tracked. " + mi_no_track_reason );
					return;
				}
				try {
					f.hitCallback();
				} catch (ex) {

				}
			};
			__gaTracker.create = function() {
				return new Tracker();
			};
			__gaTracker.getByName = noopnullfn;
			__gaTracker.getAll = function() {
				return [];
			};
			__gaTracker.remove = noopfn;
			window['__gaTracker'] = __gaTracker;
					})();
		}
</script><link rel="stylesheet" id="wp-block-library-css" href="https://blog.stefcho.eu/wp-includes/css/dist/block-library/style.min.css" type="text/css" media="all"><link rel="stylesheet" id="micro-style-css" href="https://blog.stefcho.eu/wp-content/themes/micro/assets/css/master.css" type="text/css" media="all"><link rel="stylesheet" id="primary-font-css" href="https://fonts.googleapis.com/css?family=Roboto+Mono%3A400%2C500&subset=latin%2Ccyrillic%2Cgreek%2Cvietnamese&ver=5.2" type="text/css" media="all"><link rel="stylesheet" id="wpgdprc.css-css" href="https://blog.stefcho.eu/wp-content/plugins/wp-gdpr-compliance/assets/css/front.css" type="text/css" media="all"><style id="wpgdprc.css-inline-css" type="text/css">

            div.wpgdprc .wpgdprc-switch .wpgdprc-switch-inner:before { content: 'Yes'; }
            div.wpgdprc .wpgdprc-switch .wpgdprc-switch-inner:after { content: 'No'; }
        
</style><script type="text/javascript">
/* <![CDATA[ */
var monsterinsights_frontend = {"js_events_tracking":"true","download_extensions":"doc,exe,js,pdf,ppt,tgz,zip,xls","inbound_paths":"[]","home_url":"https:\/\/PLACEHOLDER.wpsho","hash_tracking":"false"};
/* ]]> */
</script><script type="text/javascript" src="https://blog.stefcho.eu/wp-content/plugins/google-analytics-for-wordpress/assets/js/frontend.min.js"></script><script type="text/javascript" src="https://blog.stefcho.eu/wp-includes/js/jquery/jquery.js"></script><script type="text/javascript" src="https://blog.stefcho.eu/wp-includes/js/jquery/jquery-migrate.min.js"></script><style data-context="foundation-flickity-css">/*! Flickity v2.0.2
http://flickity.metafizzy.co
---------------------------------------------- */.flickity-enabled{position:relative}.flickity-enabled:focus{outline:0}.flickity-viewport{overflow:hidden;position:relative;height:100%}.flickity-slider{position:absolute;width:100%;height:100%}.flickity-enabled.is-draggable{-webkit-tap-highlight-color:transparent;tap-highlight-color:transparent;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.flickity-enabled.is-draggable .flickity-viewport{cursor:move;cursor:-webkit-grab;cursor:grab}.flickity-enabled.is-draggable .flickity-viewport.is-pointer-down{cursor:-webkit-grabbing;cursor:grabbing}.flickity-prev-next-button{position:absolute;top:50%;width:44px;height:44px;border:none;border-radius:50%;background:#fff;background:hsla(0,0%,100%,.75);cursor:pointer;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.flickity-prev-next-button:hover{background:#fff}.flickity-prev-next-button:focus{outline:0;box-shadow:0 0 0 5px #09f}.flickity-prev-next-button:active{opacity:.6}.flickity-prev-next-button.previous{left:10px}.flickity-prev-next-button.next{right:10px}.flickity-rtl .flickity-prev-next-button.previous{left:auto;right:10px}.flickity-rtl .flickity-prev-next-button.next{right:auto;left:10px}.flickity-prev-next-button:disabled{opacity:.3;cursor:auto}.flickity-prev-next-button svg{position:absolute;left:20%;top:20%;width:60%;height:60%}.flickity-prev-next-button .arrow{fill:#333}.flickity-page-dots{position:absolute;width:100%;bottom:-25px;padding:0;margin:0;list-style:none;text-align:center;line-height:1}.flickity-rtl .flickity-page-dots{direction:rtl}.flickity-page-dots .dot{display:inline-block;width:10px;height:10px;margin:0 8px;background:#333;border-radius:50%;opacity:.25;cursor:pointer}.flickity-page-dots .dot.is-selected{opacity:1}</style><style data-context="foundation-slideout-css">.slideout-menu{position:fixed;left:0;top:0;bottom:0;right:auto;z-index:0;width:256px;overflow-y:auto;-webkit-overflow-scrolling:touch;display:none}.slideout-menu.pushit-right{left:auto;right:0}.slideout-panel{position:relative;z-index:1;will-change:transform}.slideout-open,.slideout-open .slideout-panel,.slideout-open body{overflow:hidden}.slideout-open .slideout-menu{display:block}.pushit{display:none}</style><style type="text/css">
		/* Normal background color and text */
		body, code, kbd, tt, var, pre, input, textarea, select {
			color:#00aa13;
			background-color:#060c08;
		}

		/* Inverted background color and text */
		a:hover,
		.entry .entry-title,
		.comment-form-comment label,
		.form-submit input[type="submit"],
		.widget_calendar caption,
		.comments-area .comments-title,
		.main-navigation.is-extended .sub-menu a:hover,
		.menu-toggle {
			color:#060c08;
			background-color:#00aa13;
		}

		/* Overwrite for links */
		a,
		.main-navigation .menu-item a,
		.main-navigation .sub-menu a:hover,
		button, input  {
			color:#00aa13;
		}

		/* Borders */
		input, button, textarea, select
		.site-footer,
		.homepage-welcome {
			border-color:#00aa13;
		}

		.entry .entry-title a,
		.entry .entry-title a:hover {
			color: #060c08;
		}
	</style><link rel="icon" href="https://blog.stefcho.eu/wp-content/uploads/2018/10/cropped-0-32x32.jpg" sizes="32x32"><link rel="icon" href="https://blog.stefcho.eu/wp-content/uploads/2018/10/cropped-0-192x192.jpg" sizes="192x192"><link rel="apple-touch-icon-precomposed" href="https://blog.stefcho.eu/wp-content/uploads/2018/10/cropped-0-180x180.jpg"><meta name="msapplication-TileImage" content="https://blog.stefcho.eu/wp-content/uploads/2018/10/cropped-0-270x270.jpg"><style>.ios7.web-app-mode.has-fixed header{ background-color: rgba(3,122,221,.88);}</style><style type="text/css" id="wp-custom-css">
			  .entry .entry-content {
    margin: 50px 0; }		</style></head><body class="home blog paged paged-4 hfeed">
<div id="page" class="site">
	<a class="skip-link screen-reader-text" href="#content">Skip to content</a>

	<header id="masthead" class="site-header"><div class="header-image">
			<a href="https://blog.stefcho.eu/" rel="home">
				<img src="/wp-content/uploads/2018/10/0.jpg" height="350" width="1400" alt=""></a>
		</div>
		
		<div class="row">
			<div class="columns small-12">
				<div class="site-branding">
											<h1 class="site-title"><a href="https://blog.stefcho.eu/" rel="home">Stefcho's Tech Blog</a></h1>
											<p class="site-description">Software Development, Cloud, DevOps and PfSense</p>
									</div>

				<nav id="site-navigation" class="main-navigation"><button class="menu-toggle" aria-controls="primary-menu" aria-expanded="false">
						<span class="screen-reader-text">Menu</span>
					</button>
					<div class="menu-primary-container">
						<div id="primary-menu" class="menu"></div>
					</div>
				</nav></div>
		</div>
	</header><div id="content" class="site-content">

	<section class="section-fullwidth section-main"><div class="row">
			<div class="columns small-12 medium-8">
				<div id="primary" class="content-area">
					<main id="main" class="site-main"><article id="post-854" class="entry post-854 post type-post status-publish format-standard hentry category-technical tag-captive-portal tag-network tag-pfsense tag-pfsense-2-0-rc1 tag-radius"><header class="entry-header"><h2 class="entry-title"><a href="https://blog.stefcho.eu/pfsense-2-0-rc1-captive-portal-with-radius-authentication-and-vouchers/" rel="bookmark">pfSense 2.0 RC1 – Captive Portal with RADIUS Authentication and Vouchers</a></h2>		<div class="entry-meta">
			<span class="posted-on">Posted on <time class="entry-date published" datetime="2011-07-03T12:22:10+02:00">03/07/2011</time> - <time class="updated" datetime="2019-02-18T14:52:27+02:00">18/02/2019</time></span><span class="byline"> by <span class="author vcard"><a class="url fn n" href="https://blog.stefcho.eu/author/darko/">Stefan</a></span></span>		</div>
			</header><div class="entry-content">
		<p><strong>Introduction</strong></p>
<p>After we have setup Captive Portal and customized the pages in the previous posts. Now let’s wrap it up with the other two authentication methods. In this article we are going to configure RADIUS authentication for users, and create Vouchers for our Guests.</p>
<p><strong>Scenario</strong></p>
<p>In the previous post <a href="http://stefcho.azurewebsites.net/?p=754" target="_blank">pfSense 2.0 RC1 – Configure Captive Portal for Guests</a>, we used Local User Manager for authentication. But managing users in multiple systems can be dull task. For that reason we could provide our Users with a way to use their Active Directory user accounts to authenticate against the Captive Portal.</p>
<p>For our Guest We can create one Guest user account in Active Directory, but a better solution would be to provide them with one time use Voucher, that can be dispose of at the end of day.</p>
<p><strong>Setup</strong></p>
<p>The only change from our previous setup is the use of one Windows Server 2008 R2, with Active Directory Domain Services and Network Policy Server roles.</p>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2011/07/Network-Diagram.png"><img class="aligncenter size-full wp-image-856" title="Network Diagram" src="https://blog.stefcho.eu/wp-content/uploads/2011/07/Network-Diagram.png" alt="" width="623" height="346" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/07/Network-Diagram.png 623w,https://blog.stefcho.eu/wp-content/uploads/2011/07/Network-Diagram-300x166.png 300w" sizes="(max-width: 623px) 100vw, 623px"></a></p>
<p><strong>Configuration</strong></p>
<p><strong> </strong></p>
<p><strong>Network Policy Server (NPS) aka RADIUS Server, Configuration</strong></p>
<p>We can reuse the setup of NPS from <a href="http://stefcho.azurewebsites.net/?p=545" target="_blank">OpenVPN with RADIUS authentication on pfSense 2.0 RC1</a>, up until the pfSense configuration. So I would not duplicate the steps here.</p>
<p>On the pfSense side:</p>
<p>Now go to the Services > Captive Portal</p>
<p>On the Captive Portal leaf, scroll down to the Authentication Section.</p>
<p>As Authentication choose RADIUS Autentication</p>
<p>Primary RADIUS server, IP address – 10.10.9.99</p>
<p>Enter Shared Secret</p>
<p>Optionally if you wish tick the send RADIUS accounting packets check box.</p>
<p>And under RADIUS options, RADIUS NAS IP Attribute, select the LAN interface. I presume that behind this interface is your RADIUS server.</p>
<p>Save the configuration.</p>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2011/07/pfSense-2.0-RC1-Captive-Portal-RADIUS-Authentication-and-Vouchers-04.png"><img class="aligncenter size-full wp-image-860" title="pfSense 2.0 RC1 - Captive Portal RADIUS Authentication and Vouchers - 04" src="https://blog.stefcho.eu/wp-content/uploads/2011/07/pfSense-2.0-RC1-Captive-Portal-RADIUS-Authentication-and-Vouchers-04.png" alt="" width="910" height="768" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/07/pfSense-2.0-RC1-Captive-Portal-RADIUS-Authentication-and-Vouchers-04.png 910w,https://blog.stefcho.eu/wp-content/uploads/2011/07/pfSense-2.0-RC1-Captive-Portal-RADIUS-Authentication-and-Vouchers-04-300x253.png 300w" sizes="(max-width: 910px) 100vw, 910px"></a><a href="https://blog.stefcho.eu/wp-content/uploads/2011/07/pfSense-2.0-RC1-Captive-Portal-RADIUS-Authentication-and-Vouchers-05.png"><img class="aligncenter size-full wp-image-861" title="pfSense 2.0 RC1 - Captive Portal RADIUS Authentication and Vouchers - 05" src="https://blog.stefcho.eu/wp-content/uploads/2011/07/pfSense-2.0-RC1-Captive-Portal-RADIUS-Authentication-and-Vouchers-05.png" alt="" width="910" height="768" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/07/pfSense-2.0-RC1-Captive-Portal-RADIUS-Authentication-and-Vouchers-05.png 910w,https://blog.stefcho.eu/wp-content/uploads/2011/07/pfSense-2.0-RC1-Captive-Portal-RADIUS-Authentication-and-Vouchers-05-300x253.png 300w" sizes="(max-width: 910px) 100vw, 910px"></a></p>
<p><strong>Vouchers Configuration</strong></p>
<p>The first time you <strong>Enable</strong> the Vouchers, a pair of RSA keys are generated for you automatically.</p>
<p><a href="../wp-content/uploads/2011/07/pfSense-2.0-RC1-Captive-Portal-RADIUS-Authentication-and-Vouchers-01.png"><img class="aligncenter" title="pfSense 2.0 RC1 - Captive Portal RADIUS Authentication and Vouchers - 01" src="../wp-content/uploads/2011/07/pfSense-2.0-RC1-Captive-Portal-RADIUS-Authentication-and-Vouchers-01.png" alt="" width="708" height="169"></a></p>
<p>The pre generated RAS keys are 32 bits.  For now we will use the default. But if you want to create 64 bit keys, you can check our the article Captive Portal Vouchers.</p>
<p>For the Save Interval, the default value is 5 minutes, but I do not want the state of the vouchers to be kept in my configuration file, so I’ll change it to 0. Leave the rest of the fields to default values. Save the configuration.</p>
<p><a href="../wp-content/uploads/2011/07/pfSense-2.0-RC1-Captive-Portal-RADIUS-Authentication-and-Vouchers-02.png"><img class="aligncenter" title="pfSense 2.0 RC1 - Captive Portal RADIUS Authentication and Vouchers - 02" src="../wp-content/uploads/2011/07/pfSense-2.0-RC1-Captive-Portal-RADIUS-Authentication-and-Vouchers-02.png" alt="" width="908" height="768"></a></p>
<p> </p>
<p><a href="../wp-content/uploads/2011/07/pfSense-2.0-RC1-Captive-Portal-RADIUS-Authentication-and-Vouchers-03.png"><img class="aligncenter" title="pfSense 2.0 RC1 - Captive Portal RADIUS Authentication and Vouchers - 03" src="../wp-content/uploads/2011/07/pfSense-2.0-RC1-Captive-Portal-RADIUS-Authentication-and-Vouchers-03.png" alt="" width="910" height="768"></a></p>
<p>No let’s generate some vouchers, in the Voucher Rolls section, click on the “+” sign.</p>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2011/07/pfSense-2.0-RC1-Captive-Portal-RADIUS-Authentication-and-Vouchers-06.png"><img class="aligncenter size-full wp-image-862" title="pfSense 2.0 RC1 - Captive Portal RADIUS Authentication and Vouchers - 06" src="https://blog.stefcho.eu/wp-content/uploads/2011/07/pfSense-2.0-RC1-Captive-Portal-RADIUS-Authentication-and-Vouchers-06.png" alt="" width="787" height="103" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/07/pfSense-2.0-RC1-Captive-Portal-RADIUS-Authentication-and-Vouchers-06.png 787w,https://blog.stefcho.eu/wp-content/uploads/2011/07/pfSense-2.0-RC1-Captive-Portal-RADIUS-Authentication-and-Vouchers-06-300x39.png 300w" sizes="(max-width: 787px) 100vw, 787px"></a></p>
<p>On the new page, enter</p>
<p>Roll# – 16, Minutes per Ticker – 460 (8 hours), Count – 10 this is the number of vouchers generated. You can put some comment for reference. Save it.</p>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2011/07/pfSense-2.0-RC1-Captive-Portal-RADIUS-Authentication-and-Vouchers-07.png"><img class="aligncenter size-full wp-image-863" title="pfSense 2.0 RC1 - Captive Portal RADIUS Authentication and Vouchers - 07" src="https://blog.stefcho.eu/wp-content/uploads/2011/07/pfSense-2.0-RC1-Captive-Portal-RADIUS-Authentication-and-Vouchers-07.png" alt="" width="913" height="619" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/07/pfSense-2.0-RC1-Captive-Portal-RADIUS-Authentication-and-Vouchers-07.png 913w,https://blog.stefcho.eu/wp-content/uploads/2011/07/pfSense-2.0-RC1-Captive-Portal-RADIUS-Authentication-and-Vouchers-07-300x203.png 300w" sizes="(max-width: 913px) 100vw, 913px"></a></p>
<p>Upon return to the Vouchers leaf, click on the circle with “i” in it to export the list of vouchers.</p>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2011/07/pfSense-2.0-RC1-Captive-Portal-RADIUS-Authentication-and-Vouchers-08.png"><img class="aligncenter size-full wp-image-864" title="pfSense 2.0 RC1 - Captive Portal RADIUS Authentication and Vouchers - 08" src="https://blog.stefcho.eu/wp-content/uploads/2011/07/pfSense-2.0-RC1-Captive-Portal-RADIUS-Authentication-and-Vouchers-08.png" alt="" width="910" height="284" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/07/pfSense-2.0-RC1-Captive-Portal-RADIUS-Authentication-and-Vouchers-08.png 910w,https://blog.stefcho.eu/wp-content/uploads/2011/07/pfSense-2.0-RC1-Captive-Portal-RADIUS-Authentication-and-Vouchers-08-300x93.png 300w" sizes="(max-width: 910px) 100vw, 910px"></a></p>
<p>The result should look similar to this:</p>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2011/07/pfSense-2.0-RC1-Captive-Portal-RADIUS-Authentication-and-Vouchers-09.png"><img class="aligncenter size-full wp-image-865" title="pfSense 2.0 RC1 - Captive Portal RADIUS Authentication and Vouchers - 09" src="https://blog.stefcho.eu/wp-content/uploads/2011/07/pfSense-2.0-RC1-Captive-Portal-RADIUS-Authentication-and-Vouchers-09.png" alt="" width="604" height="323" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/07/pfSense-2.0-RC1-Captive-Portal-RADIUS-Authentication-and-Vouchers-09.png 604w,https://blog.stefcho.eu/wp-content/uploads/2011/07/pfSense-2.0-RC1-Captive-Portal-RADIUS-Authentication-and-Vouchers-09-300x160.png 300w" sizes="(max-width: 604px) 100vw, 604px"></a></p>
<p><strong>Testing</strong></p>
<p>Open a browser on a computer connected to the Guest interface of pfSense, enter a web address, and you should be presented with the Captive Portal page.</p>
<p>For RADIUS test , enter a user name and password, from the Active Directory, and you should successfuly log in.</p>
<p>For test of the Voucher system, copy one of the rows from the csv file, and paste it in the Voucher field.</p>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2011/07/Client-2011-07-03-13-06-33.png"><img class="aligncenter size-full wp-image-869" title="CpfSense 2.0 RC1 - Captive Portal RADIUS Authentication and Vouchers - 13" src="https://blog.stefcho.eu/wp-content/uploads/2011/07/Client-2011-07-03-13-06-33.png" alt="" width="548" height="676" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/07/Client-2011-07-03-13-06-33.png 548w,https://blog.stefcho.eu/wp-content/uploads/2011/07/Client-2011-07-03-13-06-33-243x300.png 243w" sizes="(max-width: 548px) 100vw, 548px"></a></p>
<p>The web address that you typed should load, and you will have access for the next 8 hours.</p>
<p>On the web GUI, you could check that the user is successfuly connected.</p>
<p><strong><a href="https://blog.stefcho.eu/wp-content/uploads/2011/07/pfSense-2.0-RC1-Captive-Portal-RADIUS-Authentication-and-Vouchers-10.png"><img class="aligncenter size-full wp-image-866" title="pfSense 2.0 RC1 - Captive Portal RADIUS Authentication and Vouchers - 10" src="https://blog.stefcho.eu/wp-content/uploads/2011/07/pfSense-2.0-RC1-Captive-Portal-RADIUS-Authentication-and-Vouchers-10.png" alt="" width="918" height="261" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/07/pfSense-2.0-RC1-Captive-Portal-RADIUS-Authentication-and-Vouchers-10.png 918w,https://blog.stefcho.eu/wp-content/uploads/2011/07/pfSense-2.0-RC1-Captive-Portal-RADIUS-Authentication-and-Vouchers-10-300x85.png 300w" sizes="(max-width: 918px) 100vw, 918px"></a><a href="https://blog.stefcho.eu/wp-content/uploads/2011/07/pfSense-2.0-RC1-Captive-Portal-RADIUS-Authentication-and-Vouchers-10.png"><strong> </strong></a><strong> </strong></strong><a href="https://blog.stefcho.eu/wp-content/uploads/2011/07/pfSense-2.0-RC1-Captive-Portal-RADIUS-Authentication-and-Vouchers-10.png"><strong> </strong></a><strong><a href="https://blog.stefcho.eu/wp-content/uploads/2011/07/pfSense-2.0-RC1-Captive-Portal-RADIUS-Authentication-and-Vouchers-11.png"><img class="aligncenter size-full wp-image-867" title="pfSense 2.0 RC1 - Captive Portal RADIUS Authentication and Vouchers - 11" src="https://blog.stefcho.eu/wp-content/uploads/2011/07/pfSense-2.0-RC1-Captive-Portal-RADIUS-Authentication-and-Vouchers-11.png" alt="" width="905" height="212" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/07/pfSense-2.0-RC1-Captive-Portal-RADIUS-Authentication-and-Vouchers-11.png 905w,https://blog.stefcho.eu/wp-content/uploads/2011/07/pfSense-2.0-RC1-Captive-Portal-RADIUS-Authentication-and-Vouchers-11-300x70.png 300w" sizes="(max-width: 905px) 100vw, 905px"></a></strong></p>
<p><strong><br></strong></p>
<p><strong>References</strong></p>
<p><a href="http://doc.pfsense.org/index.php/Category:Captive_Portal" target="_blank">http://doc.pfsense.org/index.php/Category:Captive_Portal</a></p>
<p>Aggregated all topics related to Captive Portal in pfSense Documentation</p>
<p><a href="http://doc.pfsense.org/index.php/Captive_Portal_Vouchers" target="_blank">http://doc.pfsense.org/index.php/Captive_Portal_Vouchers</a></p>
<p>Specific article for the Vouchers</p>
<p><a href="http://doc.m0n0.ch/handbook/captiveportal.html" target="_blank">http://doc.m0n0.ch/handbook/captiveportal.html</a></p>
<p>m0n0wall documentation of the Captive Portal, can be used for cross references.</p>
<p><strong>Conclusion</strong></p>
<p>During the last three posts we look at the basic configuration of Captive Portal in pfSense 2.0 RC1. Also we customized the Portal pages, and used different authentication methods available. Using this feature of pfSense you can safely provide Internet access to your users and guests. Of course there are many other options that we have not covered, but they are left for future posts.</p>
<p>Thank you for reading, and I hope it was helpful.</p>
	</div>

	<footer class="entry-footer"><span class="cat-links">Posted in <a href="https://blog.stefcho.eu/category/technical/" rel="category tag">Technical</a></span><span class="tags-links">Tagged <a href="https://blog.stefcho.eu/tag/captive-portal/" rel="tag">Captive Portal</a>, <a href="https://blog.stefcho.eu/tag/network/" rel="tag">Network</a>, <a href="https://blog.stefcho.eu/tag/pfsense/" rel="tag">pfSense</a>, <a href="https://blog.stefcho.eu/tag/pfsense-2-0-rc1/" rel="tag">pfSense 2.0 RC1</a>, <a href="https://blog.stefcho.eu/tag/radius/" rel="tag">RADIUS</a></span><span class="comments-link"><a href="https://blog.stefcho.eu/pfsense-2-0-rc1-captive-portal-with-radius-authentication-and-vouchers/#comments">3 Comments</a></span>	</footer></article><article id="post-814" class="entry post-814 post type-post status-publish format-standard hentry category-technical tag-captive-portal tag-network tag-pfsense tag-pfsense-2-0-rc1"><header class="entry-header"><h2 class="entry-title"><a href="https://blog.stefcho.eu/pfsense-2-0-rc1-customize-captive-portal-pages-and-implement-https/" rel="bookmark">pfSense 2.0 RC1 – Customize Captive Portal Pages and implement HTTPS</a></h2>		<div class="entry-meta">
			<span class="posted-on">Posted on <time class="entry-date published" datetime="2011-06-26T12:18:49+02:00">26/06/2011</time> - <time class="updated" datetime="2019-02-18T14:51:47+02:00">18/02/2019</time></span><span class="byline"> by <span class="author vcard"><a class="url fn n" href="https://blog.stefcho.eu/author/darko/">Stefan</a></span></span>		</div>
			</header><div class="entry-content">
		<p><strong>Introduction</strong></p>
<p>In the previous post <a href="http://stefcho.azurewebsites.net/?p=754" target="_blank">pfSense 2.0 RC1 Configure Captive Portal for Guests with Local User Management</a> we configured a basic Captive Portal. Now I want to customize a little the web pages that are presented to the guests. Users will send credentials, and it is better to use HTTPS, that’s why will will configure it too.</p>
<p><strong>Scenario</strong></p>
<p>I want to customize the pages put custom colors and logo. Moreover the default page does not have a voucher field available, and I want this too. Granting access to guests, must follow some rules, so Acceptable Use Policy that have to be acknowledged is suitable for such a page</p>
<p>You can see the default pages below</p>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Customize-Captive-Portal-Pages-and-implement-HTTPS-Default-Page-01.png"><img class="aligncenter size-full wp-image-815" title="pfSense 2.0 RC1 - Customize Captive Portal Pages and implement HTTPS - Default Page 01" src="https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Customize-Captive-Portal-Pages-and-implement-HTTPS-Default-Page-01.png" alt="" width="797" height="457" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Customize-Captive-Portal-Pages-and-implement-HTTPS-Default-Page-01.png 797w,https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Customize-Captive-Portal-Pages-and-implement-HTTPS-Default-Page-01-300x172.png 300w" sizes="(max-width: 797px) 100vw, 797px"></a></p>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Customize-Captive-Portal-Pages-and-implement-HTTPS-Default-Page-02.png"><img class="aligncenter size-full wp-image-816" title="pfSense 2.0 RC1 - Customize Captive Portal Pages and implement HTTPS - Default Page 02" src="https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Customize-Captive-Portal-Pages-and-implement-HTTPS-Default-Page-02.png" alt="" width="801" height="482" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Customize-Captive-Portal-Pages-and-implement-HTTPS-Default-Page-02.png 801w,https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Customize-Captive-Portal-Pages-and-implement-HTTPS-Default-Page-02-300x180.png 300w" sizes="(max-width: 801px) 100vw, 801px"></a></p>
<p><strong>Configuration</strong></p>
<p><strong>Certificate for the HTTPS/SSL</strong></p>
<p>Go to System > Cert Manager</p>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Customize-Captive-Portal-Pages-and-implement-HTTPS-Certificates-01.png"><img class="aligncenter size-full wp-image-817" title="pfSense 2.0 RC1 - Customize Captive Portal Pages and implement HTTPS - Certificates 01" src="https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Customize-Captive-Portal-Pages-and-implement-HTTPS-Certificates-01.png" alt="" width="282" height="128"></a></p>
<p>On the CAs leaf, select Create and internal Certificate Authority. Fill in the form to your likings. Make note of the Common name and the Descriptive name.</p>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Customize-Captive-Portal-Pages-and-implement-HTTPS-Certificates-02-CA.png"><img class="aligncenter size-full wp-image-818" title="pfSense 2.0 RC1 - Customize Captive Portal Pages and implement HTTPS - Certificates 02 - CA" src="https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Customize-Captive-Portal-Pages-and-implement-HTTPS-Certificates-02-CA.png" alt="" width="911" height="627" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Customize-Captive-Portal-Pages-and-implement-HTTPS-Certificates-02-CA.png 911w,https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Customize-Captive-Portal-Pages-and-implement-HTTPS-Certificates-02-CA-300x206.png 300w" sizes="(max-width: 911px) 100vw, 911px"></a></p>
<p>Go to the Certificates leaf, and Create an internal Certificate, fill in the form. The Common Name for the certificate must match to firewall name. In my case it is pfSense.localdomain. Also note the Descriptive name of the certificate.</p>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Customize-Captive-Portal-Pages-and-implement-HTTPS-Certificates-02-Cert.png"><img class="aligncenter size-full wp-image-819" title="pfSense 2.0 RC1 - Customize Captive Portal Pages and implement HTTPS - Certificates 02 - Cert" src="https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Customize-Captive-Portal-Pages-and-implement-HTTPS-Certificates-02-Cert.png" alt="" width="910" height="647" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Customize-Captive-Portal-Pages-and-implement-HTTPS-Certificates-02-Cert.png 910w,https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Customize-Captive-Portal-Pages-and-implement-HTTPS-Certificates-02-Cert-300x213.png 300w" sizes="(max-width: 910px) 100vw, 910px"></a></p>
<p><strong>Export the Certificates</strong></p>
<p>On the CAs leaf click on the downward pointing triangle with rollover info export ca.</p>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Customize-Captive-Portal-Pages-and-implement-HTTPS-Certificates-03-Export.png"><img class="aligncenter size-full wp-image-820" title="pfSense 2.0 RC1 - Customize Captive Portal Pages and implement HTTPS - Certificates 03 - Export" src="https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Customize-Captive-Portal-Pages-and-implement-HTTPS-Certificates-03-Export.png" alt="" width="920" height="742" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Customize-Captive-Portal-Pages-and-implement-HTTPS-Certificates-03-Export.png 920w,https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Customize-Captive-Portal-Pages-and-implement-HTTPS-Certificates-03-Export-300x241.png 300w" sizes="(max-width: 920px) 100vw, 920px"></a></p>
<p>On the Certificate leaf, click on both downward pointing triangles for the Captivate Portal Cert.</p>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Customize-Captive-Portal-Pages-and-implement-HTTPS-Certificates-04-Export.png"><img class="aligncenter size-full wp-image-821" title="pfSense 2.0 RC1 - Customize Captive Portal Pages and implement HTTPS - Certificates 04 - Export" src="https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Customize-Captive-Portal-Pages-and-implement-HTTPS-Certificates-04-Export.png" alt="" width="923" height="739" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Customize-Captive-Portal-Pages-and-implement-HTTPS-Certificates-04-Export.png 923w,https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Customize-Captive-Portal-Pages-and-implement-HTTPS-Certificates-04-Export-300x240.png 300w" sizes="(max-width: 923px) 100vw, 923px"></a></p>
<p>You will end up with three file with similar names to this</p>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Customize-Captive-Portal-Pages-and-implement-HTTPS-Certificates-05-Export.png"><img class="aligncenter size-full wp-image-822" title="pfSense 2.0 RC1 - Customize Captive Portal Pages and implement HTTPS - Certificates 05 - Export" src="https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Customize-Captive-Portal-Pages-and-implement-HTTPS-Certificates-05-Export.png" alt="" width="741" height="201" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Customize-Captive-Portal-Pages-and-implement-HTTPS-Certificates-05-Export.png 741w,https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Customize-Captive-Portal-Pages-and-implement-HTTPS-Certificates-05-Export-300x81.png 300w" sizes="(max-width: 741px) 100vw, 741px"></a></p>
<p><strong>DNS Record</strong></p>
<p>Go to Services > DNS Forwarder</p>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Customize-Captive-Portal-Pages-and-implement-HTTPS-DNS-01.png"><img class="aligncenter size-full wp-image-823" title="pfSense 2.0 RC1 - Customize Captive Portal Pages and implement HTTPS - DNS 01" src="https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Customize-Captive-Portal-Pages-and-implement-HTTPS-DNS-01.png" alt="" width="487" height="164" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Customize-Captive-Portal-Pages-and-implement-HTTPS-DNS-01.png 487w,https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Customize-Captive-Portal-Pages-and-implement-HTTPS-DNS-01-300x101.png 300w" sizes="(max-width: 487px) 100vw, 487px"></a></p>
<p>Add new record that will override the results from the forwarders</p>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Customize-Captive-Portal-Pages-and-implement-HTTPS-DNS-02.png"><img class="aligncenter size-full wp-image-824" title="pfSense 2.0 RC1 - Customize Captive Portal Pages and implement HTTPS - DNS 02" src="https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Customize-Captive-Portal-Pages-and-implement-HTTPS-DNS-02.png" alt="" width="912" height="694" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Customize-Captive-Portal-Pages-and-implement-HTTPS-DNS-02.png 912w,https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Customize-Captive-Portal-Pages-and-implement-HTTPS-DNS-02-300x228.png 300w" sizes="(max-width: 912px) 100vw, 912px"></a></p>
<p>Enter Host, Domain, IP Address and Description. In my case the host is pfSense, the domain is localdomain, the IP address is the IP used by pfSense for the Guest network and I’ve entered some useful description.</p>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Customize-Captive-Portal-Pages-and-implement-HTTPS-DNS-03.png"><img class="aligncenter size-full wp-image-825" title="pfSense 2.0 RC1 - Customize Captive Portal Pages and implement HTTPS - DNS 03" src="https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Customize-Captive-Portal-Pages-and-implement-HTTPS-DNS-03.png" alt="" width="639" height="471" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Customize-Captive-Portal-Pages-and-implement-HTTPS-DNS-03.png 639w,https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Customize-Captive-Portal-Pages-and-implement-HTTPS-DNS-03-300x221.png 300w" sizes="(max-width: 639px) 100vw, 639px"></a></p>
<p><strong>Put the Certificate data in the fields</strong></p>
<p>Now open the certificates in your favourite text editor. I’ve used Notepad++, and copy and paste the content in the Services > Captive Portal pages.</p>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Customize-Captive-Portal-Pages-and-implement-HTTPS-Certificates-06-Captivate-Portal.png"><img class="aligncenter size-full wp-image-826" title="pfSense 2.0 RC1 - Customize Captive Portal Pages and implement HTTPS - Certificates 06 - Captivate Portal" src="https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Customize-Captive-Portal-Pages-and-implement-HTTPS-Certificates-06-Captivate-Portal.png" alt="" width="485" height="102" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Customize-Captive-Portal-Pages-and-implement-HTTPS-Certificates-06-Captivate-Portal.png 485w,https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Customize-Captive-Portal-Pages-and-implement-HTTPS-Certificates-06-Captivate-Portal-300x63.png 300w" sizes="(max-width: 485px) 100vw, 485px"></a></p>
<p>Paste Captive+Portal+Cert.crt in HTTPS certificate section</p>
<p>Paste Captive+Portal+Cert.key in HTTPS private key section</p>
<p>Paste Captive+Portal+CA.cert  in HTTPS intermediate certificate section</p>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Customize-Captive-Portal-Pages-and-implement-HTTPS-Certificates-06-Captivate-Portal-Paste-Certs.png"><img class="aligncenter size-full wp-image-827" title="pfSense 2.0 RC1 - Customize Captive Portal Pages and implement HTTPS - Certificates 06 - Captivate Portal - Paste Certs" src="https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Customize-Captive-Portal-Pages-and-implement-HTTPS-Certificates-06-Captivate-Portal-Paste-Certs.png" alt="" width="908" height="696" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Customize-Captive-Portal-Pages-and-implement-HTTPS-Certificates-06-Captivate-Portal-Paste-Certs.png 908w,https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Customize-Captive-Portal-Pages-and-implement-HTTPS-Certificates-06-Captivate-Portal-Paste-Certs-300x229.png 300w" sizes="(max-width: 908px) 100vw, 908px"></a></p>
<p>Save your configuration.</p>
<p><strong>Upload the logo</strong></p>
<p>Go to the File manager leaf of the Captive portal. Click on the + sign. And choose your logo image.</p>
<p>Then click on the Upload button.</p>
<p>Take a note of the name of the image, if it is different from the one used in your pages update them before uploading.</p>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Customize-Captive-Portal-Pages-and-implement-HTTPS-Captivate-Portal-Logo.png"><img class="aligncenter size-full wp-image-828" title="pfSense 2.0 RC1 - Customize Captive Portal Pages and implement HTTPS - Captivate Portal - Logo" src="https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Customize-Captive-Portal-Pages-and-implement-HTTPS-Captivate-Portal-Logo.png" alt="" width="918" height="436" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Customize-Captive-Portal-Pages-and-implement-HTTPS-Captivate-Portal-Logo.png 918w,https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Customize-Captive-Portal-Pages-and-implement-HTTPS-Captivate-Portal-Logo-300x142.png 300w" sizes="(max-width: 918px) 100vw, 918px"></a></p>
<p><strong> </strong></p>
<p><strong>Upload the pages</strong></p>
<p>Go back to the Captive portal leaf, and scroll down to the Portal page contents section.</p>
<p>Click on Choose File button and select your page file. Do the same for the Authentication error page contents page with the index_error.html page. Save your configuration.<a href="https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Customize-Captive-Portal-Pages-and-implement-HTTPS-Captivate-Portal-Pages-upload.png"><img class="aligncenter size-full wp-image-831" title="pfSense 2.0 RC1 - Customize Captive Portal Pages and implement HTTPS - Captivate Portal - Pages upload" src="https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Customize-Captive-Portal-Pages-and-implement-HTTPS-Captivate-Portal-Pages-upload.png" alt="" width="916" height="575" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Customize-Captive-Portal-Pages-and-implement-HTTPS-Captivate-Portal-Pages-upload.png 916w,https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Customize-Captive-Portal-Pages-and-implement-HTTPS-Captivate-Portal-Pages-upload-300x188.png 300w" sizes="(max-width: 916px) 100vw, 916px"></a></p>
<p><strong> </strong></p>
<p><strong>Explanation</strong></p>
<p>I’ve used the build in Certificate Manager, because it works for me. The alternative is to use OpenSSL as explained in the pfSense forums. This is closely related to the DNS record.</p>
<p>By customizing the pages we can brand them and in the same time create more enterprise look and feel. Opening the voucher field is first step to my next post. There the main topic will be configuration of vouchers and RADIUS authentication.</p>
<p>About the pages code:</p>
<p>Index.html</p>
<p><style type=”text/css”> makes the background black.</p>
<p><img src=”captiveportal-logo.png” alt=”logo”/> adds the Image</p>
<p><td align=”right”>Voucher:</td><td  align=”left”><input name=”auth_voucher” type=”text” style=”border:  1px dashed;”> add the Vaucher field</p>
<p><TEXTAREA id=”aup” name=”aup” rows=”15″ cols=”50″> adds the Acceptable Use Policy, I’ve borrowed this from <a href="http://www.smallnetbuilder.com/wireless/wireless-howto/24295-monowallcaptiveportal?showall=&start=6" target="_blank">How To: Using m0n0wall to create a Wireless Captive Portal – Step 4: Create the Captive Portal Page</a>.</p>
<p>You can see the original page here: <a href="http://www.smallnetbuilder.com/images_old/myimages/howto/captiveportal/portal.htm" target="_blank">http://www.smallnetbuilder.com/images_old/myimages/howto/captiveportal/portal.htm</a></p>
<p><script type=”text/javascript”> – force the guest to accept the use policy. I’ve borrowed this code from <a href="http://lab.artlung.com/validate-checkbox/" target="_blank">Only submit if at least one checkbox is checked</a> example, and with a little help from a friend integrated in to this form.</p>
<p> </p>
<blockquote><p><html><br>
<style type=”text/css”><br>
body {<br>
background-color: #000;<br>
}<br>
body,td,th {<br>
color: #090;<br>
}<br>
</style><br>
<body><br>
<form method=”post” action=”$PORTAL_ACTION$” onsubmit=”return CheckBoxesValidations() ;”><br>
<input name=”redirurl” type=”hidden” value=”$PORTAL_REDIRURL$”><br>
<center><br>
<center><br>
<img src=”captiveportal-logo.png” alt=”logo”/><br>
</center><br>
<table cellpadding=”6″ cellspacing=”0″ width=”550″ height=”380″ style=”border:1px solid #000000″><br>
<tr height=”10″ bgcolor=”#990000″><br>
<td bgcolor=”#663366″ style=”border-bottom:1px solid #000000″><br>
<font color=’white’><br>
<b><br>
Stefcho’s captive portal<br>
</b><br>
</font><br>
</td><br>
</tr><br>
<tr><br>
<td><br>
<div id=”mainlevel”><br>
<center><br>
<table width=”100%” border=”0″ cellpadding=”5″ cellspacing=”0″><br>
<tr><br>
<td><br>
<center><br>
<div id=”mainarea”><br>
<center><br>
<table width=”100%” border=”0″ cellpadding=”5″ cellspacing=”5″><br>
<tr><br>
<td><br>
<div id=”maindivarea”><br>
<center><br>
<div id=’statusbox’><br>
<font color=’red’ face=’arial’ size=’+1′><br>
<b></p>
<p></b><br>
</font><br>
</div><br>
<br/><br>
<div id=’loginbox’><br>
<table><br>
<tr><td colspan=”2″><center>Welcome to the Stefcho’s Wireless Network Captive Portal!</td></tr><br>
<tr><td colspan=”2″><center>Enter User Credentials, or Voucher Code to gain access.</td></tr><br>
<tr><td> </td></tr><br>
<tr><td align=”right”>Username:</td><td align=”left”><input name=”auth_user” type=”text” style=”border: 1px dashed;”></td></tr><br>
<tr><td align=”right”>Password:</td><td align=”left”><input name=”auth_pass” type=”password” style=”border: 1px dashed;”></td></tr><br>
<tr><td> </td></tr><br>
<tr><td align=”right”>Voucher:</td><td align=”left”><input name=”auth_voucher” type=”text” style=”border: 1px dashed;”></td></tr><br>
<tr><td></td><td><tr><td></td><td><br>
<tr><td></td><td><tr><td></td><td><br>
<P align=”center”><TEXTAREA id=”aup” name=”aup” rows=”15″ cols=”50″> Acceptable Use Policy (AUP).<br>
</TEXTAREA><br>
</td></tr><br>
</tr><br>
</table><br>
<input id=”iagree” type=”checkbox” name=”CHKBOX1″ value=”1″>Accept</p><br>
<input name=”accept” type=”submit” value=”Continue”><br>
</div><br>
</center><br>
</div><br>
</td><br>
</tr><br>
</table><br>
</center><br>
</div><br>
</center><br>
</td><br>
</tr><br>
</table><br>
</center><br>
</div><br>
</td><br>
</tr><br>
</table><br>
</center><br>
</form><br>
<script type=”text/javascript”><br>
function CheckBoxesValidations()<br>
{<br>
if(document.getElementById(‘iagree’).checked == false)<br>
{<br>
alert(“Please read and accept the User agreement to proceed!”);<br>
return false;<br>
}<br>
else<br>
return true;<br>
}<br>
</script><br>
</body><br>
</html></p></blockquote>
<p> </p>
<p>Index_error.html – The only change here is the addition of “Invalid credentials specified.”. I did not add the “$PORTAL_MESSAGE$”, because it is for RADIUS only.</p>
<p><em>The contents of the HTML/PHP file that you upload here are displayed when an authentication error occurs. You may include “$PORTAL_MESSAGE$”, which will be replaced by the error or reply messages from the RADIUS server, if any.</em></p>
<blockquote><p><tr><br>
<td><br>
<div id=”mainlevel”><br>
<center><br>
<table width=”100%” border=”0″ cellpadding=”5″ cellspacing=”0″><br>
<tr><br>
<td><br>
<center><br>
<div id=”mainarea”><br>
<center><br>
<table width=”100%” border=”0″ cellpadding=”5″ cellspacing=”5″><br>
<tr><br>
<td><br>
<div id=”maindivarea”><br>
<center><br>
<div id=’statusbox’><br>
<font color=’red’ face=’arial’ size=’+1′><br>
<b><br>
Invalid credentials specified.<br>
</b><br>
</font><br>
</div><br>
<br/></p></blockquote>
<p> </p>
<p>You can download my pages from here:</p>
<h2><a href="https://blog.stefcho.eu/wp-content/uploads/2011/06/index1.html">index</a></h2>
<h2><a href="https://blog.stefcho.eu/wp-content/uploads/2011/06/index_error1.html">index_error</a></h2>
<p><strong>Testing</strong></p>
<p>Connect to the guest network and try to open a web page. You will see a warning about your certificate, go over it. Now you are supposed to see your new custom page. Enter your username and password, look at the Acceptable Use Policy and Click on the Accept check box. Then on the Continue button. If you don’t tick the Accept check box a warning message windows will appear, that will inform you that you must accept the policy first.</p>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Customize-Captive-Portal-Pages-and-implement-HTTPS-Custome-Page-011.png"><img class="aligncenter size-full wp-image-849" title="pfSense 2.0 RC1 - Customize Captive Portal Pages and implement HTTPS - Custome Page 01" src="https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Customize-Captive-Portal-Pages-and-implement-HTTPS-Custome-Page-011.png" alt="" width="1007" height="738" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Customize-Captive-Portal-Pages-and-implement-HTTPS-Custome-Page-011.png 1007w,https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Customize-Captive-Portal-Pages-and-implement-HTTPS-Custome-Page-011-300x219.png 300w" sizes="(max-width: 1007px) 100vw, 1007px"></a></p>
<p>In case that you intentionally or not mistype your user name and/or password, you will see in red Invalid credentials specified. Now you can try to enter then again.</p>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Customize-Captive-Portal-Pages-and-implement-HTTPS-Custome-Page-02.png"><img class="aligncenter size-full wp-image-850" title="pfSense 2.0 RC1 - Customize Captive Portal Pages and implement HTTPS - Custome Page 02" src="https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Customize-Captive-Portal-Pages-and-implement-HTTPS-Custome-Page-02.png" alt="" width="1008" height="739" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Customize-Captive-Portal-Pages-and-implement-HTTPS-Custome-Page-02.png 1008w,https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Customize-Captive-Portal-Pages-and-implement-HTTPS-Custome-Page-02-300x219.png 300w" sizes="(max-width: 1008px) 100vw, 1008px"></a></p>
<p>After successful log in you will have internet access, and on the Status > Captive portal page you will be able to see the currently logged on users.</p>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Customize-Captive-Portal-Pages-and-implement-HTTPS-Captivate-Portal-Logged-on-Client-Status1.png"><img class="aligncenter size-full wp-image-833" title="pfSense 2.0 RC1 - Customize Captive Portal Pages and implement HTTPS - Captivate Portal - Logged on Client Status" src="https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Customize-Captive-Portal-Pages-and-implement-HTTPS-Captivate-Portal-Logged-on-Client-Status1.png" alt="" width="911" height="681" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Customize-Captive-Portal-Pages-and-implement-HTTPS-Captivate-Portal-Logged-on-Client-Status1.png 911w,https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Customize-Captive-Portal-Pages-and-implement-HTTPS-Captivate-Portal-Logged-on-Client-Status1-300x224.png 300w,https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Customize-Captive-Portal-Pages-and-implement-HTTPS-Captivate-Portal-Logged-on-Client-Status1-200x150.png 200w" sizes="(max-width: 911px) 100vw, 911px"></a></p>
<p><strong>Issues</strong></p>
<p>DNS record surprise me because I have not used it up until now.</p>
<p><strong>References</strong></p>
<p>Here are some materials that could help you further develop the Captive Portal Pages:</p>
<p><a href="http://doc.pfsense.org/index.php/Category:Captive_Portal" target="_blank">http://doc.pfsense.org/index.php/Category:Captive_Portal</a></p>
<p><a href="http://gronver.dk/?p=37" target="_blank">Free, cool, and easy Captive Portal (Guest portal)</a></p>
<p><a href="http://www.smallnetbuilder.com/wireless/wireless-howto/24295-monowallcaptiveportal?showall=&start=6" target="_blank">How To: Using m0n0wall to create a Wireless Captive Portal – Step 4: Create the Captive Portal Page </a></p>
<p><a href="http://nettechonline.net/index.php?option=com_content&view=article&id=85:pfsense-captive-portal-edit&catid=57:pfsense-captive-portal&Itemid=72" target="_blank">pfSense: Captive Portal Logo Edit</a></p>
<p><a href="http://itrez.blogspot.com/2011/03/pfsense-20-captive-portal.html" target="_blank">Как в pfsense 2.0 сделать Captive portal доступным из разных сетей</a></p>
<p><a href="http://bruteforcer.ru/index.php/2010/09/27/ustanovka-i-nastrojka-wi-fi-hot-spot-sistemy-na-primere-programmnogo-routera-pfsense-2-0-chast-1/" target="_blank">Установка и настройка Wi-FI HOT-SPOT системы на примере программного роутера PfSense 2.0.(Часть 1)</a></p>
<p> </p>
<p>A good base for the Acceptable Use Policy:</p>
<p><a href="http://www.itservices.manchester.ac.uk/roaming/regulationsforuse/acceptableusepolicy/" target="_blank">Acceptable Use Policy for the Wireless Network</a></p>
<p><a href="http://www.ci.austin.tx.us/library/wireless.htm" target="_blank">Acceptable Use Policy for Wireless Access</a></p>
<p><a href="http://www.spotonnetworks.com/acceptable-use.php" target="_blank">Acceptable Use Policy</a></p>
<p><strong> </strong></p>
<p><strong>Conclusion</strong></p>
<p>Now we have better looking pages displayed to our guest, and well communicated Acceptable Use Policy of the Guest Network. The credentials of our users are transferred using SSL cannel and are not in plain text.</p>
<p> </p>
	</div>

	<footer class="entry-footer"><span class="cat-links">Posted in <a href="https://blog.stefcho.eu/category/technical/" rel="category tag">Technical</a></span><span class="tags-links">Tagged <a href="https://blog.stefcho.eu/tag/captive-portal/" rel="tag">Captive Portal</a>, <a href="https://blog.stefcho.eu/tag/network/" rel="tag">Network</a>, <a href="https://blog.stefcho.eu/tag/pfsense/" rel="tag">pfSense</a>, <a href="https://blog.stefcho.eu/tag/pfsense-2-0-rc1/" rel="tag">pfSense 2.0 RC1</a></span><span class="comments-link"><a href="https://blog.stefcho.eu/pfsense-2-0-rc1-customize-captive-portal-pages-and-implement-https/#comments">13 Comments</a></span>	</footer></article><article id="post-795" class="entry post-795 post type-post status-publish format-standard hentry category-technical tag-network tag-pfsense tag-pfsense-2-0-rc3"><header class="entry-header"><h2 class="entry-title"><a href="https://blog.stefcho.eu/pfsense-2-0-rc3-released/" rel="bookmark">pfSense 2.0 RC3 released!</a></h2>		<div class="entry-meta">
			<span class="posted-on">Posted on <time class="entry-date published" datetime="2011-06-22T22:04:04+02:00">22/06/2011</time> - <time class="updated" datetime="2018-10-28T22:16:49+02:00">28/10/2018</time></span><span class="byline"> by <span class="author vcard"><a class="url fn n" href="https://blog.stefcho.eu/author/darko/">Stefan</a></span></span>		</div>
			</header><div class="entry-content">
		<p>Good news, today RC3 was released, is supposed to be the last RC before RTM which is very promising.</p>
<p>If the news are right we are waiting for RTM in a month, I hope that this is a realistic estimation for the time needed.</p>
<p>You can read the original news here</p>
<h1><strong><a href="http://blog.pfsense.org/?p=589" target="_blank">2.0-RC3 now available!</a></strong></h1>
<p>Downloads are available, I’m in process of upgrading my lab from RC1 to RC3. For that purpose I will user clean install and restore a configuration backup. Upgrading is not of my preference, but will eventually try it later on.</p>
<p> </p>
	</div>

	<footer class="entry-footer"><span class="cat-links">Posted in <a href="https://blog.stefcho.eu/category/technical/" rel="category tag">Technical</a></span><span class="tags-links">Tagged <a href="https://blog.stefcho.eu/tag/network/" rel="tag">Network</a>, <a href="https://blog.stefcho.eu/tag/pfsense/" rel="tag">pfSense</a>, <a href="https://blog.stefcho.eu/tag/pfsense-2-0-rc3/" rel="tag">pfSense 2.0 RC3</a></span>	</footer></article><article id="post-754" class="entry post-754 post type-post status-publish format-standard hentry category-technical tag-captive-portal tag-network tag-pfsense tag-pfsense-2-0-rc1 tag-wireless"><header class="entry-header"><h2 class="entry-title"><a href="https://blog.stefcho.eu/pfsense-2-0-rc1-configure-captive-portal-for-guests-with-local-user-management/" rel="bookmark">pfSense 2.0 RC1 Configure Captive Portal for Guests with Local User Management</a></h2>		<div class="entry-meta">
			<span class="posted-on">Posted on <time class="entry-date published" datetime="2011-06-19T18:38:12+02:00">19/06/2011</time> - <time class="updated" datetime="2019-02-18T14:51:22+02:00">18/02/2019</time></span><span class="byline"> by <span class="author vcard"><a class="url fn n" href="https://blog.stefcho.eu/author/darko/">Stefan</a></span></span>		</div>
			</header><div class="entry-content">
		<p><strong>Introduction</strong></p>
<p>More or less it is expected from a company to provide some form of Wireless Internet Access to guest, clients and partner visiting their premises. Providing them with such could pose a security risk if you use just a simple wireless access point directly connected to your LAN. It is better to isolate them in separate network segment without access to your LAN. For that purpose we will use an Optional Interface and the Captive Portal feature of pfSense 2.0 RC1.</p>
<p><strong>Scenario</strong></p>
<p>You want to provide your guest with Internet Access using single of multiple Wireless Access Point, but you want to prevent them from lurking around your servers and workstations. Even worse they can be infected with some malicious code that could try to take over your network.  You have probably seen what enterprise grade wireless solutions offer as functionality, but the price of these solutions is prohibitive to implement for Small Office Home Office (SoHo) uses.</p>
<p>In this post we will look at the basic configuration of Captive Portal, a feature of pfSense, and how to implement a basic scenario with required authentication of guests, which will be quarantined from our internal network, but will have almost full Internet Access at their disposal.</p>
<p><strong>Setup</strong></p>
<p>We have a simple setup of pfSense 2.0 RC1 with three network interfaces. The WAN gives us access to the Internet, behind the LAN interface resides our servers and workstations, and we will put the guests behind the GUESTS interface. For reference take a look at the network diagram.</p>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Configure-Captive-Portal-for-Guests-Network-Diagram-1.png"><img class="aligncenter size-full wp-image-756" title="pfSense 2.0 RC1 - Configure Captive Portal for Guests - Network Diagram 1" src="https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Configure-Captive-Portal-for-Guests-Network-Diagram-1.png" alt="" width="655" height="333" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Configure-Captive-Portal-for-Guests-Network-Diagram-1.png 655w,https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Configure-Captive-Portal-for-Guests-Network-Diagram-1-300x152.png 300w" sizes="(max-width: 655px) 100vw, 655px"></a></p>
<p> </p>
<p>Some hardware appliance on which pfSense is running might have Wireless Network Interface Cards installed initially, in that case you can use that interface for GUESTS, but currently I do not have such card available for testing. At near future when I do get one, I will test this scenario too.</p>
<p> </p>
<p>If you are unfortunate enough to have only two network interfaces, but you are fortunate to have a VLAN capable switch you can separate the LAN and the GUESTS into separate VLANs.  Take a look at the network diagram below for reference. Yet again this is a separate scenario that I will leave for the future posts.</p>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Configure-Captive-Portal-for-Guests-Network-Diagram-2-VLANs.png"></a><a href="https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Configure-Captive-Portal-for-Guests-Network-Diagram-2-VLANs1.png"><img class="aligncenter size-full wp-image-788" title="pfSense 2.0 RC1 - Configure Captive Portal for Guests - Network Diagram 2 VLANs" src="https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Configure-Captive-Portal-for-Guests-Network-Diagram-2-VLANs1.png" alt="" width="493" height="483" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Configure-Captive-Portal-for-Guests-Network-Diagram-2-VLANs1.png 493w,https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Configure-Captive-Portal-for-Guests-Network-Diagram-2-VLANs1-300x293.png 300w" sizes="(max-width: 493px) 100vw, 493px"></a></p>
<p> </p>
<p><strong>Configuration</strong></p>
<p><strong>Configure the Guests Interface.</strong></p>
<p>If you haven’t configured the third network interface already, let’s configure it now.<a href="https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Configure-Captive-Portal-for-Guests-Interfaces-01.png"><img class="aligncenter size-full wp-image-758" title="pfSense 2.0 RC1 - Configure Captive Portal for Guests -  Interfaces 01" src="https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Configure-Captive-Portal-for-Guests-Interfaces-01.png" alt="" width="326" height="168" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Configure-Captive-Portal-for-Guests-Interfaces-01.png 326w,https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Configure-Captive-Portal-for-Guests-Interfaces-01-300x154.png 300w" sizes="(max-width: 326px) 100vw, 326px"></a></p>
<p>Go to Interface > (assign), and click on the + button, and then click on Save button to save the configuration.</p>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Configure-Captive-Portal-for-Guests-Interfaces-02.png"><img class="aligncenter size-full wp-image-759" title="pfSense 2.0 RC1 - Configure Captive Portal for Guests -  Interfaces 02" src="https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Configure-Captive-Portal-for-Guests-Interfaces-02.png" alt="" width="910" height="374" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Configure-Captive-Portal-for-Guests-Interfaces-02.png 910w,https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Configure-Captive-Portal-for-Guests-Interfaces-02-300x123.png 300w" sizes="(max-width: 910px) 100vw, 910px"></a><a href="https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Configure-Captive-Portal-for-Guests-Interfaces-03.png"><img class="aligncenter size-full wp-image-760" title="pfSense 2.0 RC1 - Configure Captive Portal for Guests -  Interfaces 03" src="https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Configure-Captive-Portal-for-Guests-Interfaces-03.png" alt="" width="923" height="485" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Configure-Captive-Portal-for-Guests-Interfaces-03.png 923w,https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Configure-Captive-Portal-for-Guests-Interfaces-03-300x157.png 300w" sizes="(max-width: 923px) 100vw, 923px"></a></p>
<p>Not go to you newly added interface, the name by default is OPT1.</p>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Configure-Captive-Portal-for-Guests-Interfaces-04.png"><img class="aligncenter size-full wp-image-761" title="pfSense 2.0 RC1 - Configure Captive Portal for Guests -  Interfaces 04" src="https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Configure-Captive-Portal-for-Guests-Interfaces-04.png" alt="" width="914" height="379" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Configure-Captive-Portal-for-Guests-Interfaces-04.png 914w,https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Configure-Captive-Portal-for-Guests-Interfaces-04-300x124.png 300w" sizes="(max-width: 914px) 100vw, 914px"></a></p>
<p>Tick the Enable Interface and click Save.</p>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Configure-Captive-Portal-for-Guests-Interfaces-05.png"><img class="aligncenter size-full wp-image-762" title="pfSense 2.0 RC1 - Configure Captive Portal for Guests -  Interfaces 05" src="https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Configure-Captive-Portal-for-Guests-Interfaces-05.png" alt="" width="914" height="317" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Configure-Captive-Portal-for-Guests-Interfaces-05.png 914w,https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Configure-Captive-Portal-for-Guests-Interfaces-05-300x104.png 300w" sizes="(max-width: 914px) 100vw, 914px"></a></p>
<p>Now you can enter a Description for this interface, in my example I used Guests.</p>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Configure-Captive-Portal-for-Guests-Interfaces-06.png"><img class="aligncenter size-full wp-image-763" title="pfSense 2.0 RC1 - Configure Captive Portal for Guests -  Interfaces 06" src="https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Configure-Captive-Portal-for-Guests-Interfaces-06.png" alt="" width="915" height="741" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Configure-Captive-Portal-for-Guests-Interfaces-06.png 915w,https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Configure-Captive-Portal-for-Guests-Interfaces-06-300x242.png 300w" sizes="(max-width: 915px) 100vw, 915px"></a><a href="https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Configure-Captive-Portal-for-Guests-Interfaces-07.png"></a></p>
<p>Select Static as Type.</p>
<p>In the Static IP configuration section,  enter IP Address for the interface and a subnet mask. In my case these  are 192.168.0.1/24.</p>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Configure-Captive-Portal-for-Guests-Interfaces-07.png"><img class="aligncenter size-full wp-image-764" title="pfSense 2.0 RC1 - Configure Captive Portal for Guests -  Interfaces 07" src="https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Configure-Captive-Portal-for-Guests-Interfaces-07.png" alt="" width="912" height="703" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Configure-Captive-Portal-for-Guests-Interfaces-07.png 912w,https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Configure-Captive-Portal-for-Guests-Interfaces-07-300x231.png 300w" sizes="(max-width: 912px) 100vw, 912px"></a><a href="https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Configure-Captive-Portal-for-Guests-Interfaces-08.png"></a></p>
<p>Then click on the Save button, and Apply changes.</p>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Configure-Captive-Portal-for-Guests-Interfaces-08.png"><img class="aligncenter size-full wp-image-765" title="pfSense 2.0 RC1 - Configure Captive Portal for Guests -  Interfaces 08" src="https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Configure-Captive-Portal-for-Guests-Interfaces-08.png" alt="" width="916" height="742" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Configure-Captive-Portal-for-Guests-Interfaces-08.png 916w,https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Configure-Captive-Portal-for-Guests-Interfaces-08-300x243.png 300w" sizes="(max-width: 916px) 100vw, 916px"></a></p>
<p> </p>
<p><strong>Setup a DHCP Server for this Interface</strong></p>
<p>Go to Services > DHCP Server,</p>
<p> </p>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Configure-Captive-Portal-for-Guests-DHCP-01.png"><img class="aligncenter size-full wp-image-767" title="pfSense 2.0 RC1 - Configure Captive Portal for Guests -  DHCP 01" src="https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Configure-Captive-Portal-for-Guests-DHCP-01.png" alt="" width="501" height="376" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Configure-Captive-Portal-for-Guests-DHCP-01.png 501w,https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Configure-Captive-Portal-for-Guests-DHCP-01-300x225.png 300w,https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Configure-Captive-Portal-for-Guests-DHCP-01-200x150.png 200w" sizes="(max-width: 501px) 100vw, 501px"></a></p>
<p>on the Guests leaf, tick the Enable DHCP server on Guests Interface.</p>
<p>Enter a Range aka Pool of IP addresses available for our guests, in my case 192.168.0.10-20.</p>
<p>Enter 192.168.0.1 as value for DNS Server and a Gateway, then Save the configuration.</p>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Configure-Captive-Portal-for-Guests-DHCP-02.png"><img class="aligncenter size-full wp-image-768" title="pfSense 2.0 RC1 - Configure Captive Portal for Guests -  DHCP 02" src="https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Configure-Captive-Portal-for-Guests-DHCP-02.png" alt="" width="914" height="743" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Configure-Captive-Portal-for-Guests-DHCP-02.png 914w,https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Configure-Captive-Portal-for-Guests-DHCP-02-300x243.png 300w" sizes="(max-width: 914px) 100vw, 914px"></a></p>
<p><strong>Apply Firewall rules on the Guests Interface</strong></p>
<p>As we stated in the Scenario section, we want to provide our guests only with Internet access, and NO access to our LAN resources, also preventing them from accessing the Web GUI of the pfSense is a good idea.</p>
<p>I used for a base for the required firewall rules this wonderful article here: <a href="http://www.smallnetbuilder.com/wireless/wireless-howto/24295-monowallcaptiveportal?start=8" target="_blank">How To: Using m0n0wall to create a Wireless Captive Portal – Security</a></p>
<p>As you know pfSense is a fork of m0n0wall, so the rules still apply.</p>
<p>So here are my rules:</p>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Configure-Captive-Portal-for-Guests-FireWall-Rules-00.png"><img class="aligncenter size-full wp-image-775" title="pfSense 2.0 RC1 - Configure Captive Portal for Guests -  FireWall Rules 00" src="https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Configure-Captive-Portal-for-Guests-FireWall-Rules-00.png" alt="" width="911" height="563" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Configure-Captive-Portal-for-Guests-FireWall-Rules-00.png 911w,https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Configure-Captive-Portal-for-Guests-FireWall-Rules-00-300x185.png 300w" sizes="(max-width: 911px) 100vw, 911px"></a></p>
<p>The NetBIOS Block rules do exactly that the description states.</p>
<p>Web GUI Block prevent guest from accessing the management interface of the pfSense from the wireless network.</p>
<p>The WAN Address / Subnet Block, prevent the guest from accessing any devices connected directly on our WAN port in case you have something like modem or anything else that could be configured using web or other interface.</p>
<p>The last Guests to Any Other Than LAN network provide our guest with the so much needed Internet Access.</p>
<p>As additional test I’ve made a rule that block all traffic on this interface during no business hours. This is the first time that I used a Schedule for a rule, so accept is as experimental. The idea for this rule is inspired by this blog post: <a href="http://sadsoftware.blogspot.com/2008/09/pfsense-captive-portal-with-firewall.html" target="_blank">pfSense Captive Portal with Firewall Schedules</a></p>
<blockquote><p>If you’re providing Wifi access you certainly don’t want to worry about some jackass out in the parking lot in the middle of the night trying to hack on your portal.</p></blockquote>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Configure-Captive-Portal-for-Guests-FireWall-Rules-99.png"><img class="aligncenter size-full wp-image-776" title="pfSense 2.0 RC1 - Configure Captive Portal for Guests -  FireWall Rules 99" src="https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Configure-Captive-Portal-for-Guests-FireWall-Rules-99.png" alt="" width="918" height="575" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Configure-Captive-Portal-for-Guests-FireWall-Rules-99.png 918w,https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Configure-Captive-Portal-for-Guests-FireWall-Rules-99-300x187.png 300w" sizes="(max-width: 918px) 100vw, 918px"></a></p>
<p><strong>Configure Captive Portal</strong></p>
<p>Go to Services > Captive Portal.</p>
<p>Tick the Enable captive portal, and select our Guests Interface. You can leave to the defaults values for now Maximum concurrent connection, Idle timeout. For Hard timeout you can choose a period depending on the average stay of your guests, for my test purposes a value of 60 minutes is fine.</p>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Configure-Captive-Portal-for-Guests-Captive-Portal-02.png"><img class="aligncenter size-full wp-image-777" title="pfSense 2.0 RC1 - Configure Captive Portal for Guests -  Captive Portal 02" src="https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Configure-Captive-Portal-for-Guests-Captive-Portal-02.png" alt="" width="1024" height="744" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Configure-Captive-Portal-for-Guests-Captive-Portal-02.png 1024w,https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Configure-Captive-Portal-for-Guests-Captive-Portal-02-300x217.png 300w" sizes="(max-width: 1024px) 100vw, 1024px"></a></p>
<p>If you really believe that you guest a conscience enough you can enable the Logout popup window, and give then the possibility to logout by themselves, but for the sake of simplicity I will not enable this feature.</p>
<p>Very nice feature is the Per-user bandwidth restriction, you can limit the amount of bandwidth that each user can consume. This will slow down their access but will provide resources for more concurrent users. It is up to you to decide whether to use this or not. In my setup, I’ve enabled this feature for testing purposes, and the results were satisfactory.</p>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Configure-Captive-Portal-for-Guests-Captive-Portal-00.png"><img class="aligncenter size-full wp-image-778" title="pfSense 2.0 RC1 - Configure Captive Portal for Guests -  Captive Portal 00" src="https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Configure-Captive-Portal-for-Guests-Captive-Portal-00.png" alt="" width="1024" height="741" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Configure-Captive-Portal-for-Guests-Captive-Portal-00.png 1024w,https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Configure-Captive-Portal-for-Guests-Captive-Portal-00-300x217.png 300w" sizes="(max-width: 1024px) 100vw, 1024px"></a></p>
<p>For Authentication, we have three options, No authentication can be used for a page with Acceptable Use Policy for the Wireless Network, which your guest must only acknowledge.</p>
<p>For this example I will use Local User Manager. In a future blog post I will take a look at RADIUS Authentication.</p>
<p><strong> </strong></p>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Configure-Captive-Portal-for-Guests-Captive-Portal-04.png"><img class="aligncenter size-full wp-image-779" title="pfSense 2.0 RC1 - Configure Captive Portal for Guests -  Captive Portal 04" src="https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Configure-Captive-Portal-for-Guests-Captive-Portal-04.png" alt="" width="1024" height="739" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Configure-Captive-Portal-for-Guests-Captive-Portal-04.png 1024w,https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Configure-Captive-Portal-for-Guests-Captive-Portal-04-300x216.png 300w" sizes="(max-width: 1024px) 100vw, 1024px"></a>For now scroll down to the end of the page and click Save.<strong> </strong></p>
<p><strong>User Management</strong></p>
<p>Go to System > User Manager and create new user.</p>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Configure-Captive-Portal-for-Guests-User-Manager-01.png"><img class="aligncenter size-full wp-image-780" title="pfSense 2.0 RC1 - Configure Captive Portal for Guests -  User Manager 01" src="https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Configure-Captive-Portal-for-Guests-User-Manager-01.png" alt="" width="248" height="285"></a></p>
<p>For my example User name is guest, type in a Password, and Full name.</p>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Configure-Captive-Portal-for-Guests-User-Manager-02.png"><img class="aligncenter size-full wp-image-781" title="pfSense 2.0 RC1 - Configure Captive Portal for Guests -  User Manager 02" src="https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Configure-Captive-Portal-for-Guests-User-Manager-02.png" alt="" width="1024" height="741" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Configure-Captive-Portal-for-Guests-User-Manager-02.png 1024w,https://blog.stefcho.eu/wp-content/uploads/2011/06/pfSense-2.0-RC1-Configure-Captive-Portal-for-Guests-User-Manager-02-300x217.png 300w" sizes="(max-width: 1024px) 100vw, 1024px"></a></p>
<p><strong>Explanation</strong></p>
<p>The purpose of the Captive Portal is to force guest users to visit a page before they are provided with Internet Access, whether you will simply require them to accept a use policy, or to authenticate in some manner it is up to you and your needs.</p>
<p><strong>Testing</strong></p>
<p>Now I suppose that you have connected one or more Wireless Access Points to the Guests Interface of the pfSense, and configured a SSID for guests. After that you have connected to this Wireless Network. Now when you open a browser and type in some website address, you will be redirected to the Captive Portal page and be required to enter user name and password, use the guest account.  After successful authentication you will be redirected back to the original web site address that you have entered.</p>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2011/06/Client-2011-06-18-15-16-09.png"><img class="aligncenter size-full wp-image-792" title="Client-2011-06-18-15-16-09" src="https://blog.stefcho.eu/wp-content/uploads/2011/06/Client-2011-06-18-15-16-09.png" alt="" width="810" height="481" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/06/Client-2011-06-18-15-16-09.png 810w,https://blog.stefcho.eu/wp-content/uploads/2011/06/Client-2011-06-18-15-16-09-300x178.png 300w" sizes="(max-width: 810px) 100vw, 810px"></a></p>
<p><strong>Conclusion</strong><br>
Now you can connect one or more Wireless Access Point to the Guest interface of pfSense and distributed the guest user name and password to clients coming over. Whether you will limit the services on to normal business hours, or limit the bandwidth for each user I leave up to you.<br>
In the following post I will look at the possibilities to customize the Captive Portal pages, and implementation of Vouchers and RADIUS authentication.</p>
	</div>

	<footer class="entry-footer"><span class="cat-links">Posted in <a href="https://blog.stefcho.eu/category/technical/" rel="category tag">Technical</a></span><span class="tags-links">Tagged <a href="https://blog.stefcho.eu/tag/captive-portal/" rel="tag">Captive Portal</a>, <a href="https://blog.stefcho.eu/tag/network/" rel="tag">Network</a>, <a href="https://blog.stefcho.eu/tag/pfsense/" rel="tag">pfSense</a>, <a href="https://blog.stefcho.eu/tag/pfsense-2-0-rc1/" rel="tag">pfSense 2.0 RC1</a>, <a href="https://blog.stefcho.eu/tag/wireless/" rel="tag">Wireless</a></span><span class="comments-link"><a href="https://blog.stefcho.eu/pfsense-2-0-rc1-configure-captive-portal-for-guests-with-local-user-management/#comments">20 Comments</a></span>	</footer></article><article id="post-733" class="entry post-733 post type-post status-publish format-standard hentry category-technical tag-network tag-openvpn tag-pfsense tag-routing"><header class="entry-header"><h2 class="entry-title"><a href="https://blog.stefcho.eu/routing-road-warriors-clients-through-a-site-to-site-vpn-with-pfsense-2-0-rc1-and-openvpn/" rel="bookmark">Routing Road Warrior’s clients through a Site-To-Site VPN with pfSense 2.0 RC1 and OpenVPN</a></h2>		<div class="entry-meta">
			<span class="posted-on">Posted on <time class="entry-date published" datetime="2011-06-04T16:39:06+02:00">04/06/2011</time> - <time class="updated" datetime="2019-02-18T14:50:56+02:00">18/02/2019</time></span><span class="byline"> by <span class="author vcard"><a class="url fn n" href="https://blog.stefcho.eu/author/darko/">Stefan</a></span></span>		</div>
			</header><div class="entry-content">
		<p>After we looked at the different options for Road Warrior and Site to Site configuration for OpenVPN on pfSense 2.0 RC1, now it is time to combine them in one solution.</p>
<h1>Scenario</h1>
<p>You have one or more Site to Site VPNs already and at least one Road Warrior setup for your users. Initially you are happy that you users can consume services from the site that hosts the Road Warrior, but then you want to give them access through the same connection to other sites connected to your main one.</p>
<h1>Setup</h1>
<p>Take a look at the network diagram.</p>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2011/06/OpenVPN-site-to-site-and-Road-Warrior-routing.png"><img class="aligncenter size-full wp-image-734" title="OpenVPN site to site and Road Warrior, routing" src="https://blog.stefcho.eu/wp-content/uploads/2011/06/OpenVPN-site-to-site-and-Road-Warrior-routing.png" alt="" width="769" height="412" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/06/OpenVPN-site-to-site-and-Road-Warrior-routing.png 769w,https://blog.stefcho.eu/wp-content/uploads/2011/06/OpenVPN-site-to-site-and-Road-Warrior-routing-300x160.png 300w" sizes="(max-width: 769px) 100vw, 769px"></a></p>
<p>pfSense01 serves the main site, and provides access to the remote users, but also has a site to site configuration with pfSense02.</p>
<p>If you are on the LAN (10.10.9.0/24) side behind pfSense01, you will be able to access machines through the Site to Site connection and communicate with machines on the other end, for example 10.10.10.99.</p>
<p>But if you are the VPN Client, you will be able to only access machines in the 10.10.9.0/24 network.</p>
<p>Our aim is to provide the VPN Client access to network behind pfSense02 (10.10.10.0/24) in addition to the 10.10.9.0/24 one.</p>
<h1>Configuration</h1>
<p>If you have already configured Road Warrior and Site To Site configuration skip to the Advanced Configuration section below.</p>
<h2>Road Warrior</h2>
<p>For reference how to configure it, you can look at my other posts, and choose depending on your needs:</p>
<p><a href="http://stefcho.azurewebsites.net/?p=492" target="_blank">pfSense 2.0 RC1 configuration of OpenVPN Server for Rad Warrior with TLS and User Authentication</a></p>
<p><a href="http://stefcho.azurewebsites.net/?p=528" target="_blank">OpenVPN with LDAP authentication on pfSense 2.0 RC1</a></p>
<p><a href="http://stefcho.azurewebsites.net/?p=545" target="_blank">OpenVPN with RADIUS authentication on pfSense 2.0 RC1</a></p>
<p> </p>
<h2>Site To Site</h2>
<p>In case that you don’t have a site to site configuration ready, you can check out one of this posts:</p>
<p><a href="http://stefcho.azurewebsites.net/?p=576" target="_blank">Building Site to Site Connection with OpenVPN on pfSense 2.0 RC1 with Shared Key</a></p>
<p><a href="http://stefcho.azurewebsites.net/?p=611" target="_blank">Building Site to Site Connection with OpenVPN on pfSense 2.0 RC1 with PKI</a></p>
<p> </p>
<h1>Advanced Configuration</h1>
<p>On pfSense 01,navigate to VPN > OpenVPN</p>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2011/06/Road-Warrior-Config-01.png"><img class="aligncenter size-full wp-image-736" title="Road-Warrior-Config-01" src="https://blog.stefcho.eu/wp-content/uploads/2011/06/Road-Warrior-Config-01.png" alt="" width="580" height="173" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/06/Road-Warrior-Config-01.png 580w,https://blog.stefcho.eu/wp-content/uploads/2011/06/Road-Warrior-Config-01-300x89.png 300w" sizes="(max-width: 580px) 100vw, 580px"></a></p>
<p>on the Server leaf, in the Road Warrior configuration scroll down to the bottom section titled Advanced Configuration</p>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2011/06/Road-Warrior-Config-02.png"><img class="aligncenter size-full wp-image-737" title="Road-Warrior-Config-02" src="https://blog.stefcho.eu/wp-content/uploads/2011/06/Road-Warrior-Config-02.png" alt="" width="915" height="328" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/06/Road-Warrior-Config-02.png 915w,https://blog.stefcho.eu/wp-content/uploads/2011/06/Road-Warrior-Config-02-300x107.png 300w" sizes="(max-width: 915px) 100vw, 915px"></a></p>
<p>and enter this line:</p>
<blockquote><p>push “route 10.10.10.0 255.255.255.0”;</p></blockquote>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2011/06/Road-Warrior-Config-03.png"><img class="aligncenter size-full wp-image-738" title="Road-Warrior-Config-03" src="https://blog.stefcho.eu/wp-content/uploads/2011/06/Road-Warrior-Config-03.png" alt="" width="912" height="574" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/06/Road-Warrior-Config-03.png 912w,https://blog.stefcho.eu/wp-content/uploads/2011/06/Road-Warrior-Config-03-300x188.png 300w" sizes="(max-width: 912px) 100vw, 912px"></a></p>
<p> </p>
<p>On pfSense 02, again navigate to VPN > OpenVPN, on the Client leaf, and open the Site To Site configuration</p>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2011/06/Site-To-Site-Config-02.png"><img class="aligncenter size-full wp-image-739" title="Site-To-Site-Config-02" src="https://blog.stefcho.eu/wp-content/uploads/2011/06/Site-To-Site-Config-02.png" alt="" width="914" height="378" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/06/Site-To-Site-Config-02.png 914w,https://blog.stefcho.eu/wp-content/uploads/2011/06/Site-To-Site-Config-02-300x124.png 300w" sizes="(max-width: 914px) 100vw, 914px"></a></p>
<p>Scroll down to the bottom section titled Advanced Configuration, and enter this line:</p>
<blockquote><p>route 10.123.45.0 255.255.255.0;</p></blockquote>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2011/06/Site-To-Site-Config-03.png"><img class="aligncenter size-full wp-image-740" title="Site-To-Site-Config-03" src="https://blog.stefcho.eu/wp-content/uploads/2011/06/Site-To-Site-Config-03.png" alt="" width="913" height="573" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/06/Site-To-Site-Config-03.png 913w,https://blog.stefcho.eu/wp-content/uploads/2011/06/Site-To-Site-Config-03-300x188.png 300w" sizes="(max-width: 913px) 100vw, 913px"></a></p>
<h1>Explanation</h1>
<p>As jimp explained in the thread mentioned below,</p>
<p>The <strong>push “route 10.10.10.0 255.255.255.0”;</strong> on the Road Warrior configuration tells the client that they can reach machines on the second site via the OpenVPN connection. While establishing connation OpenVPN Client adds an additional route to the second site.</p>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2011/06/OpenVPN-Client-Route-Print-Result.png"><img class="aligncenter size-full wp-image-741" title="OpenVPN-Client-Route-Print-Result" src="https://blog.stefcho.eu/wp-content/uploads/2011/06/OpenVPN-Client-Route-Print-Result.png" alt="" width="672" height="330" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/06/OpenVPN-Client-Route-Print-Result.png 672w,https://blog.stefcho.eu/wp-content/uploads/2011/06/OpenVPN-Client-Route-Print-Result-300x147.png 300w" sizes="(max-width: 672px) 100vw, 672px"></a></p>
<p>The <strong>route 10.123.45.0 255.255.255.0;</strong> will instruct the second site how to answer on requests from the OpenVPN Client.</p>
<h1>Testing</h1>
<p>After you save the configuration changes, connect to the Road Warrior, and test you connectivity to machine on both sites.</p>
<h1>References</h1>
<p>While I was configuring similar setup, the routing part was new to me and I found it difficult to grasp at the time, but thanks to jimp’s help on the matter everything is crystal clear.<br>
You can check out the thread in the pfSense forum here:<br><a href="http://forum.pfsense.org/index.php/topic,26036.msg135394.html#msg135394" target="_blank">Topic: Routing Road Warrior to Site-To-Site, pfSense as OpenVPN client configuration</a></p>
	</div>

	<footer class="entry-footer"><span class="cat-links">Posted in <a href="https://blog.stefcho.eu/category/technical/" rel="category tag">Technical</a></span><span class="tags-links">Tagged <a href="https://blog.stefcho.eu/tag/network/" rel="tag">Network</a>, <a href="https://blog.stefcho.eu/tag/openvpn/" rel="tag">OpenVPN</a>, <a href="https://blog.stefcho.eu/tag/pfsense/" rel="tag">pfSense</a>, <a href="https://blog.stefcho.eu/tag/routing/" rel="tag">Routing</a></span><span class="comments-link"><a href="https://blog.stefcho.eu/routing-road-warriors-clients-through-a-site-to-site-vpn-with-pfsense-2-0-rc1-and-openvpn/#comments">7 Comments</a></span>	</footer></article><article id="post-695" class="entry post-695 post type-post status-publish format-standard hentry category-technical tag-mikrotik-routerboard-rb250g tag-network tag-pfsense tag-vlan"><header class="entry-header"><h2 class="entry-title"><a href="https://blog.stefcho.eu/pfsense-on-a-stick-802-1q-trunking-with-pfsense-2-0-rc1-and-mikrotik-routerboard-rb250g-smart-gigabit-switch-with-five-ports-and-swos-v1-5/" rel="bookmark">pfSense-On-A-Stick – 802.1Q Trunking With pfSense 2.0 RC1 and Mikrotik RouterBoard RB250G Smart Gigabit Switch with five ports and SwOS v1.5</a></h2>		<div class="entry-meta">
			<span class="posted-on">Posted on <time class="entry-date published" datetime="2011-05-25T21:28:03+02:00">25/05/2011</time> - <time class="updated" datetime="2019-02-18T14:50:02+02:00">18/02/2019</time></span><span class="byline"> by <span class="author vcard"><a class="url fn n" href="https://blog.stefcho.eu/author/darko/">Stefan</a></span></span>		</div>
			</header><div class="entry-content">
		<p> </p>
<p>I’ve just got a Mikrotik RouterBoard RB250G. While searching for useful information about its capabilities found very interesting article in the MikroTik Wiki: <a href="http://wiki.mikrotik.com/wiki/SwOS/Router-On-A-Stick" target="_blank">SwOS/Router-On-A-Stick</a> <a href="http://wiki.mikrotik.com/wiki/SwOS/Router-On-A-Stick"></a></p>
<p>This article gave me the idea to use pfSense as a router and trunk a few VLANs.</p>
<p><strong>Scenario</strong></p>
<p>My aim is to reproduce the configuration from the above mentioned post with three VLANs, trunked on a single LAN interface (aka Parent interface) to the pfSense. To make it more usable, every VLAN will be on separate port on the switch (aka Access Port) and have its own instance of DHCP running on the pfSense. In this way, when a client connect to some of the ports he/she will automatically receive configuration contextual to VLAN on this port.</p>
<p>For the installation and basic configuration of pfSense on VMware take a look my previous post<a title="Permanent Link to Install pfSense 2.0 RC1 on VMWare Workstation 7" rel="bookmark permalink" href="http://stefcho.azurewebsites.net/?p=431" target="_blank"> Install pfSense 2.0 RC1 on VMWare Workstation 7</a></p>
<p>The difference here is that the LAN virtual NIC is bridged to the second physical NIC of my workstation and from there directly connected to the RB250G switch.</p>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2011/05/Network-Diagram.png"><img class="aligncenter size-full wp-image-730" title="Network Diagram" src="https://blog.stefcho.eu/wp-content/uploads/2011/05/Network-Diagram.png" alt="" width="492" height="541" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/05/Network-Diagram.png 492w,https://blog.stefcho.eu/wp-content/uploads/2011/05/Network-Diagram-272x300.png 272w" sizes="(max-width: 492px) 100vw, 492px"></a></p>
<p>We start with installed pfSense 2.0 RC1, configure WAN port bridged to my first physical NIC, and LAN port connected to my second physical NIC. For the sake of convenience and because of the problems that I faced initially with the communication on my second NIC, I decide to manage the router through the WAN interface, because its configuration will not change during testing. More on the topic VMware Workstation Virtual Machine and VLANs support, you can find at the bottom of this post.</p>
<p>There are two ways to configure VLANs in pfSense as long as I’m aware. One is through the console and the other is using the Web GUI. Here I will use the latter.</p>
<p><strong>WAN Rules</strong></p>
<p>First let’s configure Rules on the WAN port to allow access to the Web GUI.</p>
<p>Got to Firewall > Rules, on the WAN leaf, add new rule.</p>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2011/05/pfSense-WAN-Rules-01.png"><img class="aligncenter size-full wp-image-696" title="pfSense-WAN-Rules-01" src="https://blog.stefcho.eu/wp-content/uploads/2011/05/pfSense-WAN-Rules-01.png" alt="" width="919" height="564" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/05/pfSense-WAN-Rules-01.png 919w,https://blog.stefcho.eu/wp-content/uploads/2011/05/pfSense-WAN-Rules-01-300x184.png 300w" sizes="(max-width: 919px) 100vw, 919px"></a></p>
<p>The Interface is WAN, Protocol is TCP. Destination port range is HTTPS, enter and description.</p>
<p>This will allow access to the pfSense WebGUI on the WAN IP Address.</p>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2011/05/pfSense-WAN-Rules-02.png"><img class="aligncenter size-full wp-image-697" title="pfSense-WAN-Rules-02" src="https://blog.stefcho.eu/wp-content/uploads/2011/05/pfSense-WAN-Rules-02.png" alt="" width="913" height="884" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/05/pfSense-WAN-Rules-02.png 913w,https://blog.stefcho.eu/wp-content/uploads/2011/05/pfSense-WAN-Rules-02-300x290.png 300w" sizes="(max-width: 913px) 100vw, 913px"></a></p>
<p><strong>Creation of VLANs and Interfaces</strong></p>
<p>Go to Interfaces> (assign).</p>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2011/05/Craetion-of-VLANs-01.png"><img class="aligncenter size-full wp-image-705" title="Craetion-of-VLANs-01" src="https://blog.stefcho.eu/wp-content/uploads/2011/05/Craetion-of-VLANs-01.png" alt="" width="359" height="135" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/05/Craetion-of-VLANs-01.png 359w,https://blog.stefcho.eu/wp-content/uploads/2011/05/Craetion-of-VLANs-01-300x112.png 300w" sizes="(max-width: 359px) 100vw, 359px"></a></p>
<p>Make sure that you second Network port is not assigned to any Interface, if it is removed it. In my case this is em1. This machine has two interface em0 for the WAN, and em1 for the LAN.</p>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2011/05/Craetion-of-VLANs-02.png"><img class="aligncenter size-full wp-image-706" title="Craetion-of-VLANs-02" src="https://blog.stefcho.eu/wp-content/uploads/2011/05/Craetion-of-VLANs-02.png" alt="" width="920" height="365" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/05/Craetion-of-VLANs-02.png 920w,https://blog.stefcho.eu/wp-content/uploads/2011/05/Craetion-of-VLANs-02-300x119.png 300w" sizes="(max-width: 920px) 100vw, 920px"></a></p>
<p>Go to the VLANs leaf, click on the add button.</p>
<p>On the new page make sure that Parent interface is em1. Enter VLAN tag number different from 1.</p>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2011/05/Craetion-of-VLANs-04.png"><img class="aligncenter size-full wp-image-708" title="Craetion-of-VLANs-04" src="https://blog.stefcho.eu/wp-content/uploads/2011/05/Craetion-of-VLANs-04.png" alt="" width="915" height="310" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/05/Craetion-of-VLANs-04.png 915w,https://blog.stefcho.eu/wp-content/uploads/2011/05/Craetion-of-VLANs-04-300x101.png 300w" sizes="(max-width: 915px) 100vw, 915px"></a></p>
<p>I’ve made three VLANs – 100, 200, 300.</p>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2011/05/Craetion-of-VLANs-03.png"><img class="aligncenter size-full wp-image-707" title="Craetion-of-VLANs-03" src="https://blog.stefcho.eu/wp-content/uploads/2011/05/Craetion-of-VLANs-03.png" alt="" width="912" height="357" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/05/Craetion-of-VLANs-03.png 912w,https://blog.stefcho.eu/wp-content/uploads/2011/05/Craetion-of-VLANs-03-300x117.png 300w" sizes="(max-width: 912px) 100vw, 912px"></a></p>
<p>Now we need to assign these as Interfaces, go to Interface assignments and then add them one by one, select the proper Network port which are the VLANs that we have just created, and do not assign em1 to any Interface directly.</p>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2011/05/Craetion-of-VLANs-02.png"><img class="aligncenter size-full wp-image-706" title="Craetion-of-VLANs-02" src="https://blog.stefcho.eu/wp-content/uploads/2011/05/Craetion-of-VLANs-02.png" alt="" width="920" height="365" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/05/Craetion-of-VLANs-02.png 920w,https://blog.stefcho.eu/wp-content/uploads/2011/05/Craetion-of-VLANs-02-300x119.png 300w" sizes="(max-width: 920px) 100vw, 920px"></a></p>
<p>Now select LAN interface from the drop down menu under Interfaces. Tick Enable Interface, as type select Static. Under Static IP configuration, enter IP address and subnet mask.</p>
<p>In my case it is 10.10.10.1/24.</p>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2011/05/Craetion-of-VLANs-05-Interfaces-Config.png"><img class="aligncenter size-full wp-image-709" title="Craetion-of-VLANs-05-Interfaces-Config" src="https://blog.stefcho.eu/wp-content/uploads/2011/05/Craetion-of-VLANs-05-Interfaces-Config.png" alt="" width="917" height="843" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/05/Craetion-of-VLANs-05-Interfaces-Config.png 917w,https://blog.stefcho.eu/wp-content/uploads/2011/05/Craetion-of-VLANs-05-Interfaces-Config-300x275.png 300w" sizes="(max-width: 917px) 100vw, 917px"></a></p>
<p> </p>
<p>Repeat this procedure for all the VLAN interfaces. For reference these are the IP addresses that I have used:</p>
<p>LAN – 10.10.10.1/24</p>
<p>OPT1 – 10.10.9.1/24</p>
<p>OPT2 – 10.10.8.1/24</p>
<p> </p>
<p><strong>Interfaces Rules </strong></p>
<p>For the sake of simplicity every interface will be allowed communication to everywhere.</p>
<p>Go to Firewall > Rules, on the LAN leaf.</p>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2011/05/VLANS-Allow-All-Rule-01.png"><img class="aligncenter size-full wp-image-711" title="VLANS-Allow-All-Rule-01" src="https://blog.stefcho.eu/wp-content/uploads/2011/05/VLANS-Allow-All-Rule-01.png" alt="" width="928" height="628" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/05/VLANS-Allow-All-Rule-01.png 928w,https://blog.stefcho.eu/wp-content/uploads/2011/05/VLANS-Allow-All-Rule-01-300x203.png 300w" sizes="(max-width: 928px) 100vw, 928px"></a></p>
<p>Add new Rule</p>
<p>Action is Pass, Interface is LAN, Protocol in Any, Source is Any, Destination is Any, enter some Description too.</p>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2011/05/VLANS-Allow-All-Rule-02.png"><img class="aligncenter size-full wp-image-712" title="VLANS-Allow-All-Rule-02" src="https://blog.stefcho.eu/wp-content/uploads/2011/05/VLANS-Allow-All-Rule-02.png" alt="" width="925" height="739" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/05/VLANS-Allow-All-Rule-02.png 925w,https://blog.stefcho.eu/wp-content/uploads/2011/05/VLANS-Allow-All-Rule-02-300x239.png 300w" sizes="(max-width: 925px) 100vw, 925px"></a></p>
<p>Repeat this step on OPT1 and OPT2 leafs too.</p>
<p> </p>
<p><strong>DHCP Server Configuration</strong></p>
<p>Go to Services > DHCP Server page.</p>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2011/05/DHCP-Config-01.png"><img class="aligncenter size-full wp-image-713" title="DHCP-Config-01" src="https://blog.stefcho.eu/wp-content/uploads/2011/05/DHCP-Config-01.png" alt="" width="502" height="345" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/05/DHCP-Config-01.png 502w,https://blog.stefcho.eu/wp-content/uploads/2011/05/DHCP-Config-01-300x206.png 300w" sizes="(max-width: 502px) 100vw, 502px"></a></p>
<p>On the LAN leaf, tick Enable DHCP server on LAN interface.</p>
<p>Enter Range from the subnet of the interface, in my case 10.10.10.10 – 10.10.10.15</p>
<p>Click the Save button.</p>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2011/05/DHCP-Config-02.png"><img class="aligncenter size-full wp-image-714" title="DHCP-Config-02" src="https://blog.stefcho.eu/wp-content/uploads/2011/05/DHCP-Config-02.png" alt="" width="917" height="890" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/05/DHCP-Config-02.png 917w,https://blog.stefcho.eu/wp-content/uploads/2011/05/DHCP-Config-02-300x291.png 300w" sizes="(max-width: 917px) 100vw, 917px"></a></p>
<p>Repeat the procedure for the OPT1 and OPT2 leafs. In my case the ranges were.</p>
<p>LAN – 10.10.10.10 – 10.10.10.15</p>
<p>OPT1 – 10.10.9.10 – 10.10.9.15</p>
<p>OPT2 – 10.10.8.10 – 10.10.8.15</p>
<p> </p>
<p><strong>Mikrotik RouterBoard RB250G Smart Gigabit Switch with five ports and SwOS v1.5</strong></p>
<p>Before configuring VLANs on the switch, make sure that your firmware version is 1.2 or higher, by the time of writing this version 1.5 of the firmware is available. Otherwise you may run into problems that are related to applied functionality of the device.</p>
<p><strong> </strong></p>
<p><strong>Switch VLANs Configuration</strong></p>
<p>On the Switch, go to the VLANs leaf, add the same VLANs from the router. As for ports member always add Port1 and choose one of the other ports. This is the tricky part, my pfSense router is connected to Port1, which makes it Trunk port and must be a member of all VLANs.</p>
<p>In my example</p>
<p>Port 5 is member of VLAN 100</p>
<p>Port 4 is member of VLAN 200</p>
<p>Port 3 is member of VLAN 300</p>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2011/05/Switch-VLANs-Config-02.png"><img class="aligncenter size-full wp-image-715" title="Switch-VLANs-Config-02" src="https://blog.stefcho.eu/wp-content/uploads/2011/05/Switch-VLANs-Config-02.png" alt="" width="773" height="269" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/05/Switch-VLANs-Config-02.png 773w,https://blog.stefcho.eu/wp-content/uploads/2011/05/Switch-VLANs-Config-02-300x104.png 300w" sizes="(max-width: 773px) 100vw, 773px"></a></p>
<p>On the VLAN leaf.</p>
<p>For Port 1, our Trunk Port – VLAN Mode is Enabled, default VLAN ID is 1 and VLAN Header is Add If Missing.</p>
<p>For the other Access Ports the configuration is as follows: VLAN Mode is Strict, Default VLAN ID is configured by your design, from the VLANs configured on the router. You can leave Force VLAN ID unpicked, VLAN Header is Always Strip.</p>
<p><strong> </strong></p>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2011/05/Switch-VLANs-Config-01.png"><img class="aligncenter size-full wp-image-716" title="Switch-VLANs-Config-01" src="https://blog.stefcho.eu/wp-content/uploads/2011/05/Switch-VLANs-Config-01.png" alt="" width="778" height="361" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/05/Switch-VLANs-Config-01.png 778w,https://blog.stefcho.eu/wp-content/uploads/2011/05/Switch-VLANs-Config-01-300x139.png 300w" sizes="(max-width: 778px) 100vw, 778px"></a></p>
<p><strong>Testing</strong></p>
<p>Now if you plug the test laptop to one of the Ports 3,4,5. And the NIC is configured to receive configuration from a DHCP server, you will get IP address from the subnet of the configured VLAN range. Because of the Allow All traffic rule you will have Internet, and access to host on the other VLANs.</p>
<p> </p>
<p><strong>Issues</strong></p>
<p>Some issues that I faced along the way.</p>
<p><strong> </strong></p>
<p><strong>VMware Workstation Virtual Machine and VLANs support</strong></p>
<p>My idea was to configure quickly one VM with pfSense, and use the bridged interface for connection to the switch. Everything works fine up until I configured VLANs. Then suddenly the communication between the route and switch stops. After a little network sniffing what surprised me, was that the packets were not tagged with VLANs. After extensive googling on the topic, I did not found definitive reason for this strange behaviour. One part of the information was related to the physical NIC support of VLANs. The other portion of the topics were about the VMware VM and the type of the virtual NIC configured on the virtual machine. Unfortunately my EVGA X58 motherboard is equipped with two on-board Realtek NICS, but fortunately enough they support VLAN and event Priority. When I check the configuration of the bridged NIC <strong>Priority & VLAN </strong>were <strong>Enabled</strong>.</p>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2011/05/NIC-02.png"><img class="aligncenter size-full wp-image-718" title="NIC-02" src="https://blog.stefcho.eu/wp-content/uploads/2011/05/NIC-02.png" alt="" width="417" height="466" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/05/NIC-02.png 417w,https://blog.stefcho.eu/wp-content/uploads/2011/05/NIC-02-268x300.png 268w" sizes="(max-width: 417px) 100vw, 417px"></a></p>
<p>The troubleshooting took me long hours, but finally I’ve got a great idea. What if I turn off the Priority & VLAN support on the physical NIC? And indeed, packets start showing with the 802.1Q Tags. My suspicion is that the physical NIC strips off the VLAN tag, and this is the cause of the disruption in communication between my router and switch.</p>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2011/05/WireShark-Capture.png"></a><a href="https://blog.stefcho.eu/wp-content/uploads/2011/05/WireShark-Capture1.png"><img class="aligncenter size-full wp-image-720" title="WireShark Capture" src="https://blog.stefcho.eu/wp-content/uploads/2011/05/WireShark-Capture1.png" alt="" width="957" height="601" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/05/WireShark-Capture1.png 957w,https://blog.stefcho.eu/wp-content/uploads/2011/05/WireShark-Capture1-300x188.png 300w" sizes="(max-width: 957px) 100vw, 957px"></a></p>
<p><strong>Mikrotik RouterBoard RB250G</strong></p>
<p>If you ping the switch the pings are around 17-9 ms, which is huge taking in to account the device is directly connected.</p>
<p>For more information look here:</p>
<h2><a href="http://forum.mikrotik.com/viewtopic.php?f=17&t=45360&sid=55976ca9471e381ea424613150f9eba8">Pings TO the switch dropped, high ping…</a></h2>
<p> </p>
<p><strong>References:</strong></p>
<ul><li>To get a feeling of the switch Web GUI, take a look here, all interface pages are shown and all options are explained : <a href="http://wiki.mikrotik.com/wiki/SwOS">http://wiki.mikrotik.com/wiki/SwOS</a></li>
<li>This wiki article gave me some ideas for VLANs configuration: <a href="http://wiki.mikrotik.com/wiki/Manual:Interface/VLAN">http://wiki.mikrotik.com/wiki/Manual:Interface/VLAN</a></li>
<li>I like this thread in the forum, probably in future will try to separate Voice and Data in to separate VLANs as discussed: Topic: Setting UP VLAN in pfSense 2.0?  <a href="http://forum.pfsense.org/index.php?topic=34739.0">http://forum.pfsense.org/index.php?topic=34739.0</a></li>
<li>If you are seeking for a Smart Switch take a look at that thread: <a href="http://forum.pfsense.org/index.php/topic,36749.msg189441.html" target="_blank">Smart Switch – Recommendations</a></li>
</ul><p>MikroTik Forum useful links:</p>
<p>The Section about Mikrotik RouterBoard RB250G:</p>
<h2><a href="http://forum.mikrotik.com/viewforum.php?f=17&sid=a56fea589ae8eb3fb1f78b0db629fc72">SwOS</a></h2>
<div id="pageheader">
<p>Some interesting threads:</p>
</div>
<h2><a href="http://forum.mikrotik.com/viewtopic.php?f=17&t=45721">please do not tag default vlan in “add if missing” mode</a></h2>
<h2><a href="http://forum.mikrotik.com/viewtopic.php?f=17&t=51066">VLAN Tagging on SwOS</a></h2>
<h2><a href="http://forum.mikrotik.com/viewtopic.php?f=17&t=46150">VLAN Trunk</a></h2>
<h2><a href="http://forum.mikrotik.com/viewtopic.php?f=17&t=44840">Vlan Trunk / Access port configuration</a></h2>
<h2><a href="http://forum.mikrotik.com/viewtopic.php?f=17&t=44534&sid=faa5992612130e9516b4c4215b06cbf9">QnQ</a></h2>
	</div>

	<footer class="entry-footer"><span class="cat-links">Posted in <a href="https://blog.stefcho.eu/category/technical/" rel="category tag">Technical</a></span><span class="tags-links">Tagged <a href="https://blog.stefcho.eu/tag/mikrotik-routerboard-rb250g/" rel="tag">Mikrotik RouterBoard RB250G</a>, <a href="https://blog.stefcho.eu/tag/network/" rel="tag">Network</a>, <a href="https://blog.stefcho.eu/tag/pfsense/" rel="tag">pfSense</a>, <a href="https://blog.stefcho.eu/tag/vlan/" rel="tag">VLAN</a></span><span class="comments-link"><a href="https://blog.stefcho.eu/pfsense-on-a-stick-802-1q-trunking-with-pfsense-2-0-rc1-and-mikrotik-routerboard-rb250g-smart-gigabit-switch-with-five-ports-and-swos-v1-5/#comments">4 Comments</a></span>	</footer></article><article id="post-658" class="entry post-658 post type-post status-publish format-standard hentry category-technical tag-network tag-openvpn tag-pfsense tag-pki tag-site-to-site tag-technical"><header class="entry-header"><h2 class="entry-title"><a href="https://blog.stefcho.eu/packt-publishing-openvpn-2-cookbook-review/" rel="bookmark">Packt Publishing OpenVPN 2 Cookbook Review</a></h2>		<div class="entry-meta">
			<span class="posted-on">Posted on <time class="entry-date published" datetime="2011-05-22T14:02:20+02:00">22/05/2011</time> - <time class="updated" datetime="2018-10-28T22:16:52+02:00">28/10/2018</time></span><span class="byline"> by <span class="author vcard"><a class="url fn n" href="https://blog.stefcho.eu/author/darko/">Stefan</a></span></span>		</div>
			</header><div class="entry-content">
		<h1 style="text-align: center;"><a title="Packt Publishing OpenVPN 2 Cookbook" href="http://www.packtpub.com/openvpn-2-cookbook/book" target="_blank">OpenVPN 2 Cookbook</a></h1>
<p style="text-align: center;">100 simple and incredibly effective recipes for harnessing the power of the OpenVPN 2 network<br>
By Jan Just Keijser</p>
<p style="text-align: center;"><a title="OpenVPN 2 Cookbook" href="http://www.packtpub.com/openvpn-2-cookbook/book" target="_blank"><img class="aligncenter size-full wp-image-660" title="0103OS_OpenVPN 2 Cookbook_FrontCover" src="https://blog.stefcho.eu/wp-content/uploads/2011/05/0103OS_OpenVPN-2-Cookbook_FrontCover.jpg" alt="OpenVPN 2 Cookbook" width="494" height="617" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/05/0103OS_OpenVPN-2-Cookbook_FrontCover.jpg 494w,https://blog.stefcho.eu/wp-content/uploads/2011/05/0103OS_OpenVPN-2-Cookbook_FrontCover-240x300.jpg 240w" sizes="(max-width: 494px) 100vw, 494px"></a></p>
<p><strong>Introduction</strong></p>
<p>I was approached by <a title="www.PacktPub.com" href="http://www.PacktPub.com" target="_blank">Packt Publishing</a> representative, asking if I would be willing to make a review of this book. This was interesting because at that moment I was reading <a title="pfSense 2 Cookbook" href="http://www.packtpub.com/pfsense-2-cookbook/book" target="_blank">pfSense 2.0 Cookbook</a> from the same publishing company. I was generously provided with the book, and here we are a month later.</p>
<p>The OpenVPN 2 Cookbook main subject is the use of OpenVPN in different scenarios. Its aim is to help you along the way of implementing an OpenVPN solution. For more detail description take a look at the <a href="http://www.packtpub.com/openvpn-2-cookbook/book#in_detail" target="_blank">detailed description Here</a>.</p>
<p>My experience with OpenVPN is based on three years of different deployments. You can find more details at the bottom of this post.</p>
<p><strong>What’s the book about?</strong></p>
<p>The book is an in depth examination of OpenVPN and how to use is in your every work. If you are in a hurry you can find a quick fix in the huge amount of recipes, or read it from cover to cover and get extensive knowledge of OpenVPN, its capabilities and different usage scenarios.</p>
<p>The book states that prior knowledge and experience of system administration, TCP/IP is required, also in OpenVPN installation. The examples in the book are made mostly on Linux based systems, so prior knowledge in the field is required too.  If you are fresh to field, probably first step is to take a look at <strong><a title="Learning Openvpn 2.0.9" href="https://www.packtpub.com/learning-openvpn-2-0-9/book" target="_blank">Beginning OpenVPN 2.0.9</a></strong> and then continue with this book.</p>
<p>As the cover states: Quick answers to common problems.</p>
<p>The book is structured in twelve chapters, and each chapter consists of about eight to ten sub topics that are called recipes. These recipes are like short How Tos for a particular case. The valuable thing is that throughout the chapter the recipes build on each other, starting from very basic configuration to more advanced ones. To get an impression you can take a look at the <strong><a title="Openvpn 2 Cookbook Table of Contents" href="http://www.packtpub.com/toc/openvpn-2-cookbook-table-contents" target="_blank">Table of Contents</a>.</strong></p>
<p>Every recipe has a <strong>How it works</strong> sections. They are extremely useful to understand what and how is happening behind the scenes. And that’s not all, after this section additional value is provided in the <strong>There’s more</strong> sections, where additional explanations and further developments are delivered.</p>
<p><strong>Does it achieve its promises?</strong></p>
<p>The first topic that really gets me going was <strong>3-way routing</strong> in the first chapter. I was planning to implement this for small number of fixed endpoints which are less than four. For more you have to read further in the book.</p>
<p>The next this that surprise me pleasantly was the PKI, Certificates and OpenSSL chapter. It helped me better understand OpenSSL and give me better idea how to manage certificates. This topic continues in the next chapters about Two-factor Authentication. I was very surprised to see that even hardware tokens can be used to authenticate users.</p>
<p>In The Scripting and Plugins, there is a very important secret about scripts execution, which was not known to me, and definitely will help me in future.</p>
<p>The Troubleshooting sections can save you precious blood, sweat and tears especially with problems related to Routing. Those are the two chapters I appreciate the most because they provide you with analytical way to diagnose and eliminate problems in deployments. You can have a peek in the sample chapter here: <a title="OpenVPN 2 Cookbook Sample Chapter" href="http://www.packtpub.com/sites/default/files/0103chapter7Samplechapter.pdf?utm_source=packtpub&utm_medium=free&utm_campaign=pdf" target="_blank"><strong>Troubleshooting OpenVPN: Configurations</strong></a></p>
<p>Logically after you have fixed all the problems a Performance Tuning is your next step.</p>
<p>The following two chapters are related to OS integrations and advanced configuration. They help me better understand how to better integrate OpenVPN with the unique environment of the client.</p>
<p>The last chapter is all about the new features in 2.2 version of OpenVPN. It is quite useful to have a well arranged section with new features that you might have not known existed up until now.</p>
<p><strong>Conclusion</strong></p>
<p>I really like reading this book, and the systematic knowledge that it provides. Whether you are a full time System Administrator or just a part time occupied with the IT in your company, or just wants to establish a secure connection to your home this book will definitely give you the needed advices how to get there.</p>
<p><strong>Biography</strong></p>
<p>My experience with OpenVPN is based on three years’ of deployments.  My first deployment was on OpenWRT where I had to use predominantly command line to configure it and Secure copy (SCP) for certificate transfer, then on DD-WRT where most of the work is done through the Web GUI, with exemption for more advanced configuration that have to be placed in start-up scripts. After that on I used Windows based systems as clients and servers, and lately as you can see from my blog I’m working with pfSense.</p>
	</div>

	<footer class="entry-footer"><span class="cat-links">Posted in <a href="https://blog.stefcho.eu/category/technical/" rel="category tag">Technical</a></span><span class="tags-links">Tagged <a href="https://blog.stefcho.eu/tag/network/" rel="tag">Network</a>, <a href="https://blog.stefcho.eu/tag/openvpn/" rel="tag">OpenVPN</a>, <a href="https://blog.stefcho.eu/tag/pfsense/" rel="tag">pfSense</a>, <a href="https://blog.stefcho.eu/tag/pki/" rel="tag">PKI</a>, <a href="https://blog.stefcho.eu/tag/site-to-site/" rel="tag">Site To Site</a>, <a href="https://blog.stefcho.eu/tag/technical/" rel="tag">Technical</a></span><span class="comments-link"><a href="https://blog.stefcho.eu/packt-publishing-openvpn-2-cookbook-review/#comments">1 Comment</a></span>	</footer></article><article id="post-646" class="entry post-646 post type-post status-publish format-standard hentry category-technical tag-pfsense tag-vmware"><header class="entry-header"><h2 class="entry-title"><a href="https://blog.stefcho.eu/pfsense-2-0-rc1-on-vmware-workstation-7-1-4-ram-size/" rel="bookmark">pfSense 2.0 RC1 on VMware Workstation 7.1.4 – RAM size</a></h2>		<div class="entry-meta">
			<span class="posted-on">Posted on <time class="entry-date published" datetime="2011-05-15T12:31:50+02:00">15/05/2011</time> - <time class="updated" datetime="2019-02-18T14:49:10+02:00">18/02/2019</time></span><span class="byline"> by <span class="author vcard"><a class="url fn n" href="https://blog.stefcho.eu/author/darko/">Stefan</a></span></span>		</div>
			</header><div class="entry-content">
		<p>In this post, I’ve recorded a quick video about how to configure a VM for pfSense 2.0 RC1. In this clip the VM RAM size was 256. For testing purposes I usually ought to use 128 the minimum amount.</p>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2011/05/128-ram-result-in.png"><img class="aligncenter size-full wp-image-649" title="128-ram-result-in" src="https://blog.stefcho.eu/wp-content/uploads/2011/05/128-ram-result-in.png" alt="" width="687" height="593" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/05/128-ram-result-in.png 687w,https://blog.stefcho.eu/wp-content/uploads/2011/05/128-ram-result-in-300x258.png 300w" sizes="(max-width: 687px) 100vw, 687px"></a><a href="https://blog.stefcho.eu/wp-content/uploads/2011/05/128-RAM-on-pfSense1.png"></a></p>
<p>During the first boot of the system, the following Warning message pops up. There is no enough memory.</p>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2011/05/128-RAM-on-pfSense1.png"><img class="aligncenter size-full wp-image-648" title="128 RAM on pfSense" src="https://blog.stefcho.eu/wp-content/uploads/2011/05/128-RAM-on-pfSense1.png" alt="" width="720" height="400" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/05/128-RAM-on-pfSense1.png 720w,https://blog.stefcho.eu/wp-content/uploads/2011/05/128-RAM-on-pfSense1-300x166.png 300w" sizes="(max-width: 720px) 100vw, 720px"></a></p>
<p>So my recommendation is to set this parameter to minimum 156 MB for RAM.</p>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2011/05/148-RAM-on-VM.png"></a><a href="https://blog.stefcho.eu/wp-content/uploads/2011/05/156-RAM-on-VM.png"><img class="aligncenter size-full wp-image-653" title="156-RAM-on-VM" src="https://blog.stefcho.eu/wp-content/uploads/2011/05/156-RAM-on-VM.png" alt="" width="676" height="585" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/05/156-RAM-on-VM.png 676w,https://blog.stefcho.eu/wp-content/uploads/2011/05/156-RAM-on-VM-300x259.png 300w" sizes="(max-width: 676px) 100vw, 676px"></a></p>
<p>Doing so Will provide the system with 130 MB RAM.</p>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2011/05/156-RAM-on-pfSense.png"><img class="aligncenter size-full wp-image-652" title="156 RAM on pfSense" src="https://blog.stefcho.eu/wp-content/uploads/2011/05/156-RAM-on-pfSense.png" alt="" width="1024" height="768" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/05/156-RAM-on-pfSense.png 1024w,https://blog.stefcho.eu/wp-content/uploads/2011/05/156-RAM-on-pfSense-300x225.png 300w,https://blog.stefcho.eu/wp-content/uploads/2011/05/156-RAM-on-pfSense-200x150.png 200w" sizes="(max-width: 1024px) 100vw, 1024px"></a>Hope this help.</p>
	</div>

	<footer class="entry-footer"><span class="cat-links">Posted in <a href="https://blog.stefcho.eu/category/technical/" rel="category tag">Technical</a></span><span class="tags-links">Tagged <a href="https://blog.stefcho.eu/tag/pfsense/" rel="tag">pfSense</a>, <a href="https://blog.stefcho.eu/tag/vmware/" rel="tag">VMWare</a></span><span class="comments-link"><a href="https://blog.stefcho.eu/pfsense-2-0-rc1-on-vmware-workstation-7-1-4-ram-size/#comments">2 Comments</a></span>	</footer></article><article id="post-611" class="entry post-611 post type-post status-publish format-standard hentry category-technical tag-network tag-openvpn tag-pfsense tag-pki tag-site-to-site"><header class="entry-header"><h2 class="entry-title"><a href="https://blog.stefcho.eu/building-site-to-site-connection-with-openvpn-on-pfsense-2-0-rc1-with-pki/" rel="bookmark">Building Site to Site Connection with OpenVPN on pfSense 2.0 RC1 with PKI</a></h2>		<div class="entry-meta">
			<span class="posted-on">Posted on <time class="entry-date published" datetime="2011-05-11T22:16:54+02:00">11/05/2011</time> - <time class="updated" datetime="2019-02-18T14:48:43+02:00">18/02/2019</time></span><span class="byline"> by <span class="author vcard"><a class="url fn n" href="https://blog.stefcho.eu/author/darko/">Stefan</a></span></span>		</div>
			</header><div class="entry-content">
		<p>In the last post we’ve setup a Site To Site with Shared Key, now instead we will use internal Certificate Authority. Honestly speaking if I did not follow this guide, there was no routing between the two sites.<br><a href="http://doc.pfsense.org/index.php/OpenVPN_Site-to-Site_PKI_%28SSL%29" target="_blank">OpenVPN Site-to-Site PKI (SSL)</a></p>
<p>For reference here is the network diagram:</p>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2011/05/OpenVPN-Site-to-Site-on-pfSense-2.01.png"><img class="aligncenter size-full wp-image-612" title="OpenVPN Site to Site on pfSense 2.0" src="https://blog.stefcho.eu/wp-content/uploads/2011/05/OpenVPN-Site-to-Site-on-pfSense-2.01.png" alt="" width="746" height="139" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/05/OpenVPN-Site-to-Site-on-pfSense-2.01.png 746w,https://blog.stefcho.eu/wp-content/uploads/2011/05/OpenVPN-Site-to-Site-on-pfSense-2.01-300x55.png 300w" sizes="(max-width: 746px) 100vw, 746px"></a></p>
<p>pfsense01 will be out OpenVPN server, and pfsense02 will be our OpenVPN client. Client and Server are just host on the two LANs behind routers.</p>
<p>On pfsense01 go to System > Cert Manager, On CAs leaf create new Certificate Authority.</p>
<p>Enter Descriptive Name, choose as a method Create an internal Certificate Authority, leave Key length and Lifetime to defaults.</p>
<p>Fill in the rest of the fields.<a href="https://blog.stefcho.eu/wp-content/uploads/2011/05/pfsense01-01-Create-CA-.png"><img class="aligncenter size-full wp-image-614" title="pfsense01 - 01 Create CA" src="https://blog.stefcho.eu/wp-content/uploads/2011/05/pfsense01-01-Create-CA-.png" alt="" width="910" height="632" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/05/pfsense01-01-Create-CA-.png 910w,https://blog.stefcho.eu/wp-content/uploads/2011/05/pfsense01-01-Create-CA--300x208.png 300w" sizes="(max-width: 910px) 100vw, 910px"></a></p>
<p>Then go to Certificates leaf, add new and create the server certificate.</p>
<p>Enter descriptive name, I’ve used the router host name, as a method choose Create an internal Certificate.</p>
<p>Verify that for Certificate authority the CA that we have created in the previous step is selected. Leave the rest of the fields to default, with exception of Common Name, here enter the host name of the server, in my case it was pfsense01.</p>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2011/05/pfsense01-02-Create-Server-Cert-.png"><img class="aligncenter size-full wp-image-615" title="pfsense01 - 02 Create Server Cert" src="https://blog.stefcho.eu/wp-content/uploads/2011/05/pfsense01-02-Create-Server-Cert-.png" alt="" width="904" height="653" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/05/pfsense01-02-Create-Server-Cert-.png 904w,https://blog.stefcho.eu/wp-content/uploads/2011/05/pfsense01-02-Create-Server-Cert--300x216.png 300w" sizes="(max-width: 904px) 100vw, 904px"></a></p>
<p>Now go to System > User manager, create new user. For the sake of simplicity for username I’ve used the host name of the second router, pfsense02. Enter Password, for Full name I’ve used again the router name. Then tick the Click to create a user certificate.</p>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2011/05/pfsense01-03-Add-user-.png"><img class="aligncenter size-full wp-image-616" title="pfsense01 - 03 Add user" src="https://blog.stefcho.eu/wp-content/uploads/2011/05/pfsense01-03-Add-user-.png" alt="" width="1024" height="741" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/05/pfsense01-03-Add-user-.png 1024w,https://blog.stefcho.eu/wp-content/uploads/2011/05/pfsense01-03-Add-user--300x217.png 300w" sizes="(max-width: 1024px) 100vw, 1024px"></a></p>
<p>For descriptive name use the host name of the router, this is the Common Name of the certificate and it is important to match.</p>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2011/05/pfsense01-04-Add-user-.png"><img class="aligncenter size-full wp-image-617" title="pfsense01 - 04 Add user" src="https://blog.stefcho.eu/wp-content/uploads/2011/05/pfsense01-04-Add-user-.png" alt="" width="921" height="607" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/05/pfsense01-04-Add-user-.png 921w,https://blog.stefcho.eu/wp-content/uploads/2011/05/pfsense01-04-Add-user--300x197.png 300w" sizes="(max-width: 921px) 100vw, 921px"></a></p>
<p>Instead of creating new user, you can create new Certificate directly.</p>
<p>Go to Cert Manager, on the Certificate leaf add new. Again as Descriptive name and Common Name use the host name of the second router, in my case pfsense02.</p>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2011/05/pfsense01-04.1-Add-user-.png"><img class="aligncenter size-full wp-image-630" title="pfsense01 - 04.1 Add user" src="https://blog.stefcho.eu/wp-content/uploads/2011/05/pfsense01-04.1-Add-user-.png" alt="" width="922" height="663" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/05/pfsense01-04.1-Add-user-.png 922w,https://blog.stefcho.eu/wp-content/uploads/2011/05/pfsense01-04.1-Add-user--300x215.png 300w" sizes="(max-width: 922px) 100vw, 922px"></a></p>
<p>Go to VPN > OpenVPN on the Server leaf, add new.</p>
<p>As Server Mode select Peer to Peer (SSL/TLS). As protocol UDP, Device Mode is TUN, Interface is WAN, leave the port to default 1194. Enter Description, Tick Enable authentication of TLS packets and Automatic generation a shared TLS authentication key.</p>
<p>As Peer Certificate Authority select the CA that we have created in the beginning. I did not have a Peer Certification Revocation List so leave it to None. Select the Server Certificate that we have created. For DH Parameters Length you can leave it to the default 1024 bits. Choose Encryption algorithm in my case BF-CBC (128-bit), take note of the algorithm we have to use the same on the client too.<a href="https://blog.stefcho.eu/wp-content/uploads/2011/05/pfsense01-05-Setup-OpenVPN-Server-.png"><img class="aligncenter size-full wp-image-618" title="pfsense01 - 05 Setup OpenVPN Server" src="https://blog.stefcho.eu/wp-content/uploads/2011/05/pfsense01-05-Setup-OpenVPN-Server-.png" alt="" width="1024" height="742" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/05/pfsense01-05-Setup-OpenVPN-Server-.png 1024w,https://blog.stefcho.eu/wp-content/uploads/2011/05/pfsense01-05-Setup-OpenVPN-Server--300x217.png 300w" sizes="(max-width: 1024px) 100vw, 1024px"></a></p>
<p>As Tunnel Network choose one different from your LANs, in my case the default 10.0.8.0/24. Enter the Local Network, in my case 10.10.9.0/24. Enter the Remote Network in my case 10.10.10.0/24. Leave the rest to defaults.</p>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2011/05/pfsense01-06-Setup-OpenVPN-Server-.png"><img class="aligncenter size-full wp-image-619" title="pfsense01 - 06 Setup OpenVPN Server" src="https://blog.stefcho.eu/wp-content/uploads/2011/05/pfsense01-06-Setup-OpenVPN-Server-.png" alt="" width="1024" height="742" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/05/pfsense01-06-Setup-OpenVPN-Server-.png 1024w,https://blog.stefcho.eu/wp-content/uploads/2011/05/pfsense01-06-Setup-OpenVPN-Server--300x217.png 300w" sizes="(max-width: 1024px) 100vw, 1024px"></a></p>
<p>Go to VPN > OpenVPN in Client Specific Overrides, and add new entry for the client.</p>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2011/05/pfsense01-11-Configure-Client-Specific-Override.png"><img class="aligncenter size-full wp-image-620" title="pfsense01 - 11 Configure Client Specific Override" src="https://blog.stefcho.eu/wp-content/uploads/2011/05/pfsense01-11-Configure-Client-Specific-Override.png" alt="" width="916" height="320" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/05/pfsense01-11-Configure-Client-Specific-Override.png 916w,https://blog.stefcho.eu/wp-content/uploads/2011/05/pfsense01-11-Configure-Client-Specific-Override-300x104.png 300w" sizes="(max-width: 916px) 100vw, 916px"></a></p>
<p>For Common name enter the host name of the second router that we have used as common name in the certificate, in my case pfsense02. Enter some description, and the Tunnel Network, in my case 10.0.8.0/24. Leave the rest to default.<a href="https://blog.stefcho.eu/wp-content/uploads/2011/05/pfsense01-12-Configure-Client-Specific-Override.png"><img class="aligncenter size-full wp-image-621" title="pfsense01 - 12 Configure Client Specific Override" src="https://blog.stefcho.eu/wp-content/uploads/2011/05/pfsense01-12-Configure-Client-Specific-Override.png" alt="" width="1024" height="742" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/05/pfsense01-12-Configure-Client-Specific-Override.png 1024w,https://blog.stefcho.eu/wp-content/uploads/2011/05/pfsense01-12-Configure-Client-Specific-Override-300x217.png 300w" sizes="(max-width: 1024px) 100vw, 1024px"></a></p>
<p>In the Advanced form, enter</p>
<blockquote><p>iroute 10.10.10.0 255.255.255.0</p></blockquote>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2011/05/pfsense01-13-Configure-Client-Specific-Override.png"><img class="aligncenter size-full wp-image-622" title="pfsense01 - 13 Configure Client Specific Override" src="https://blog.stefcho.eu/wp-content/uploads/2011/05/pfsense01-13-Configure-Client-Specific-Override.png" alt="" width="909" height="580" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/05/pfsense01-13-Configure-Client-Specific-Override.png 909w,https://blog.stefcho.eu/wp-content/uploads/2011/05/pfsense01-13-Configure-Client-Specific-Override-300x191.png 300w" sizes="(max-width: 909px) 100vw, 909px"></a>Without this step there will be no routing between the two LANs.</p>
<p>Got to Firewall >Rules and on the OpenVPN leaf, add new rule.<a href="https://blog.stefcho.eu/wp-content/uploads/2011/05/pfsense01-08-Add-Rule-to-Allow-Traffic.png"><img class="aligncenter size-full wp-image-623" title="pfsense01 - 08 Add Rule to Allow Traffic" src="https://blog.stefcho.eu/wp-content/uploads/2011/05/pfsense01-08-Add-Rule-to-Allow-Traffic.png" alt="" width="913" height="480" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/05/pfsense01-08-Add-Rule-to-Allow-Traffic.png 913w,https://blog.stefcho.eu/wp-content/uploads/2011/05/pfsense01-08-Add-Rule-to-Allow-Traffic-300x157.png 300w" sizes="(max-width: 913px) 100vw, 913px"></a><a href="https://blog.stefcho.eu/wp-content/uploads/2011/05/pfsense01-09-Add-Rule-to-Allow-Traffic.png"></a></p>
<p>Here for testing purposes I’ve made allow all rule. Select any as Protocol, leave the rest to default and enter description.<a href="https://blog.stefcho.eu/wp-content/uploads/2011/05/pfsense01-09-Add-Rule-to-Allow-Traffic.png"><img class="aligncenter size-full wp-image-624" title="pfsense01 - 09 Add Rule to Allow Traffic" src="https://blog.stefcho.eu/wp-content/uploads/2011/05/pfsense01-09-Add-Rule-to-Allow-Traffic.png" alt="" width="1024" height="741" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/05/pfsense01-09-Add-Rule-to-Allow-Traffic.png 1024w,https://blog.stefcho.eu/wp-content/uploads/2011/05/pfsense01-09-Add-Rule-to-Allow-Traffic-300x217.png 300w" sizes="(max-width: 1024px) 100vw, 1024px"></a></p>
<p>For the client to be able to connect, let’s open the OpenVPN Server port.</p>
<p>In Firewall > Rules on the WAN leaf, add new rule. Select UDP as Protocol.</p>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2011/05/pfsense01-09-Add-Rule-to-Open-VPN-Port-Port.png"><img class="aligncenter size-full wp-image-627" title="pfsense01 - 09 Add Rule to Open VPN Port Port" src="https://blog.stefcho.eu/wp-content/uploads/2011/05/pfsense01-09-Add-Rule-to-Open-VPN-Port-Port.png" alt="" width="1024" height="741" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/05/pfsense01-09-Add-Rule-to-Open-VPN-Port-Port.png 1024w,https://blog.stefcho.eu/wp-content/uploads/2011/05/pfsense01-09-Add-Rule-to-Open-VPN-Port-Port-300x217.png 300w" sizes="(max-width: 1024px) 100vw, 1024px"></a></p>
<p>As Destination port Range in our case select OpenVPN.<a href="https://blog.stefcho.eu/wp-content/uploads/2011/05/pfsense01-10-Add-Rule-to-Open-VPN-Port-Port.png"><img class="aligncenter size-full wp-image-625" title="pfsense01 - 10 Add Rule to Open VPN Port Port" src="https://blog.stefcho.eu/wp-content/uploads/2011/05/pfsense01-10-Add-Rule-to-Open-VPN-Port-Port.png" alt="" width="912" height="625" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/05/pfsense01-10-Add-Rule-to-Open-VPN-Port-Port.png 912w,https://blog.stefcho.eu/wp-content/uploads/2011/05/pfsense01-10-Add-Rule-to-Open-VPN-Port-Port-300x205.png 300w" sizes="(max-width: 912px) 100vw, 912px"></a></p>
<p>Now it is time to export certificate for use on the second router.</p>
<p>Go back to System > Cert manager export public and private CA certs, click on the first downward pointing triangle. As a guide, when you hoover over it the text label is Export CA.</p>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2011/05/pfsense01-07-Export-CA-Cert-.png"><img class="aligncenter size-full wp-image-628" title="pfsense01 - 07 Export CA Cert" src="https://blog.stefcho.eu/wp-content/uploads/2011/05/pfsense01-07-Export-CA-Cert-.png" alt="" width="920" height="340" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/05/pfsense01-07-Export-CA-Cert-.png 920w,https://blog.stefcho.eu/wp-content/uploads/2011/05/pfsense01-07-Export-CA-Cert--300x110.png 300w" sizes="(max-width: 920px) 100vw, 920px"></a></p>
<p>Then go to User Manager, enter the configuration of our user pfsense02, in the User Certificates section click on both downward pointing triangles to download both cert and key.</p>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2011/05/pfsense01-08-Export-User-Cert.png"><img class="aligncenter size-full wp-image-629" title="pfsense01 - 08 Export User Cert" src="https://blog.stefcho.eu/wp-content/uploads/2011/05/pfsense01-08-Export-User-Cert.png" alt="" width="913" height="532" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/05/pfsense01-08-Export-User-Cert.png 913w,https://blog.stefcho.eu/wp-content/uploads/2011/05/pfsense01-08-Export-User-Cert-300x174.png 300w" sizes="(max-width: 913px) 100vw, 913px"></a></p>
<p> </p>
<p>Now on pfSense02, go to System > Cert Manager on CAs leaf, add new one.</p>
<p>And as Method select Import an existing Certificate Authority. Enter as Descriptive name the name of the certificate from the first server, in my case pfsense01.</p>
<p>You have to have opened the certificate with notepad, or another text editor. Then simply copy / paste the content of the file.</p>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2011/05/pfsense02-01.1-Import-CA-Cert.png"><img class="aligncenter size-full wp-image-633" title="pfsense02 - 01.1 Import CA Cert" src="https://blog.stefcho.eu/wp-content/uploads/2011/05/pfsense02-01.1-Import-CA-Cert.png" alt="" width="921" height="692" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/05/pfsense02-01.1-Import-CA-Cert.png 921w,https://blog.stefcho.eu/wp-content/uploads/2011/05/pfsense02-01.1-Import-CA-Cert-300x225.png 300w,https://blog.stefcho.eu/wp-content/uploads/2011/05/pfsense02-01.1-Import-CA-Cert-200x150.png 200w" sizes="(max-width: 921px) 100vw, 921px"></a></p>
<p>Now on the Certificate leaf do the same but paste and the content of the  *.key in Private key data. Again enter Descriptive name as the one from the first router.</p>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2011/05/pfsense02-02-Import-User-Cert.png"><img class="aligncenter size-full wp-image-632" title="pfsense02 - 02 Import User Cert" src="https://blog.stefcho.eu/wp-content/uploads/2011/05/pfsense02-02-Import-User-Cert.png" alt="" width="910" height="635" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/05/pfsense02-02-Import-User-Cert.png 910w,https://blog.stefcho.eu/wp-content/uploads/2011/05/pfsense02-02-Import-User-Cert-300x209.png 300w" sizes="(max-width: 910px) 100vw, 910px"></a></p>
<p>Go to VPN > OpenVPN in Client leaf and add new</p>
<p>As Server Mode select Peer to Peer (SSL/TLS), Protocol is UDP, Device mode is TUN, and Interface is WAN. For Server host or address enter the WAN IP of pfsense01, in my case 10.10.2.2 and enter the port. Put some Description.<a href="https://blog.stefcho.eu/wp-content/uploads/2011/05/pfsense02-03-Setup-OpenVPN-Client.png"><img class="aligncenter size-full wp-image-634" title="pfsense02 - 03 Setup OpenVPN Client" src="https://blog.stefcho.eu/wp-content/uploads/2011/05/pfsense02-03-Setup-OpenVPN-Client.png" alt="" width="1024" height="741" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/05/pfsense02-03-Setup-OpenVPN-Client.png 1024w,https://blog.stefcho.eu/wp-content/uploads/2011/05/pfsense02-03-Setup-OpenVPN-Client-300x217.png 300w" sizes="(max-width: 1024px) 100vw, 1024px"></a></p>
<p>Open the Server configuration (VPN > OpenVPN > Server leaf) on pfsense01, copy the TLS Authentication.<a href="https://blog.stefcho.eu/wp-content/uploads/2011/05/pfsense02-04-Copy-PreShared-Key-From-pfsense01.png"><img class="aligncenter size-full wp-image-635" title="pfsense02 - 04 Copy PreShared Key From pfsense01" src="https://blog.stefcho.eu/wp-content/uploads/2011/05/pfsense02-04-Copy-PreShared-Key-From-pfsense01.png" alt="" width="1024" height="740" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/05/pfsense02-04-Copy-PreShared-Key-From-pfsense01.png 1024w,https://blog.stefcho.eu/wp-content/uploads/2011/05/pfsense02-04-Copy-PreShared-Key-From-pfsense01-300x216.png 300w" sizes="(max-width: 1024px) 100vw, 1024px"></a><a href="https://blog.stefcho.eu/wp-content/uploads/2011/05/pfsense02-05-Paste-PreShared-Key-From-pfsense01.png"></a></p>
<p>Paste it in the TLS Authentication form on our client configuration on pfsense02. Unpick Automatically generate a shared TLS authentication key and leave Enable authentication of TLS packets. <a href="https://blog.stefcho.eu/wp-content/uploads/2011/05/pfsense02-05-Paste-PreShared-Key-From-pfsense01.png"><img class="aligncenter size-full wp-image-636" title="pfsense02 - 05 Paste PreShared Key From pfsense01" src="https://blog.stefcho.eu/wp-content/uploads/2011/05/pfsense02-05-Paste-PreShared-Key-From-pfsense01.png" alt="" width="1024" height="743" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/05/pfsense02-05-Paste-PreShared-Key-From-pfsense01.png 1024w,https://blog.stefcho.eu/wp-content/uploads/2011/05/pfsense02-05-Paste-PreShared-Key-From-pfsense01-300x217.png 300w" sizes="(max-width: 1024px) 100vw, 1024px"></a><a href="https://blog.stefcho.eu/wp-content/uploads/2011/05/pfsense02-06-Setup-OpenVPN-Client.png"></a></p>
<p>Use the same Tunnel Network as on the server, in my case 10.0.8.0/24. Enter Remote Network, this is the network behind pfsense01, for this case 10.10.9.0/24.</p>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2011/05/pfsense02-06-Setup-OpenVPN-Client.png"><img class="aligncenter size-full wp-image-637" title="pfsense02 - 06 Setup OpenVPN Client" src="https://blog.stefcho.eu/wp-content/uploads/2011/05/pfsense02-06-Setup-OpenVPN-Client.png" alt="" width="913" height="643" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/05/pfsense02-06-Setup-OpenVPN-Client.png 913w,https://blog.stefcho.eu/wp-content/uploads/2011/05/pfsense02-06-Setup-OpenVPN-Client-300x211.png 300w" sizes="(max-width: 913px) 100vw, 913px"></a></p>
<p>Add Allow All rule in Firewall > Rules on the OpenVPN leaf.</p>
<p>Now go to Status > OpenVPN and you should see that the connection is established.<a href="https://blog.stefcho.eu/wp-content/uploads/2011/05/pfsense02-07-Verify-Connectivity-on-Client.png"><img class="aligncenter size-full wp-image-638" title="pfsense02 - 07 Verify Connectivity on Client" src="https://blog.stefcho.eu/wp-content/uploads/2011/05/pfsense02-07-Verify-Connectivity-on-Client.png" alt="" width="1024" height="258" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/05/pfsense02-07-Verify-Connectivity-on-Client.png 1024w,https://blog.stefcho.eu/wp-content/uploads/2011/05/pfsense02-07-Verify-Connectivity-on-Client-300x75.png 300w" sizes="(max-width: 1024px) 100vw, 1024px"></a><a href="https://blog.stefcho.eu/wp-content/uploads/2011/05/pfsense02-07-Verify-Connectivity-on-Server.png"></a></p>
<p>From the Server prospective, again on Status > OpenVPN.</p>
<p><a href="https://blog.stefcho.eu/wp-content/uploads/2011/05/pfsense02-07-Verify-Connectivity-on-Server.png"><img class="aligncenter size-full wp-image-639" title="pfsense02 - 07 Verify Connectivity on Server" src="https://blog.stefcho.eu/wp-content/uploads/2011/05/pfsense02-07-Verify-Connectivity-on-Server.png" alt="" width="1024" height="257" srcset="https://blog.stefcho.eu/wp-content/uploads/2011/05/pfsense02-07-Verify-Connectivity-on-Server.png 1024w,https://blog.stefcho.eu/wp-content/uploads/2011/05/pfsense02-07-Verify-Connectivity-on-Server-300x75.png 300w" sizes="(max-width: 1024px) 100vw, 1024px"></a></p>
<p>Now you should be able to access hosts from the other network successfully.</p>
<p> </p>
	</div>

	<footer class="entry-footer"><span class="cat-links">Posted in <a href="https://blog.stefcho.eu/category/technical/" rel="category tag">Technical</a></span><span class="tags-links">Tagged <a href="https://blog.stefcho.eu/tag/network/" rel="tag">Network</a>, <a href="https://blog.stefcho.eu/tag/openvpn/" rel="tag">OpenVPN</a>, <a href="https://blog.stefcho.eu/tag/pfsense/" rel="tag">pfSense</a>, <a href="https://blog.stefcho.eu/tag/pki/" rel="tag">PKI</a>, <a href="https://blog.stefcho.eu/tag/site-to-site/" rel="tag">Site To Site</a></span><span class="comments-link"><a href="https://blog.stefcho.eu/building-site-to-site-connection-with-openvpn-on-pfsense-2-0-rc1-with-pki/#comments">10 Comments</a></span>	</footer></article><nav class="navigation posts-navigation" role="navigation"><h2 class="screen-reader-text">Posts navigation</h2>
		<div class="nav-links"><div class="nav-previous"><a href="https://blog.stefcho.eu/page/5/">Older posts</a></div><div class="nav-next"><a href="https://blog.stefcho.eu/page/3/">Newer posts</a></div></div>
	</nav></main></div>
			</div>
			<div class="columns small-12 medium-4">
				
<aside id="secondary" class="widget-area" role="complementary"><section id="tag_cloud-3" class="widget widget_tag_cloud"><h2 class="widget-title">Tags</h2><div class="tagcloud"><a href="https://blog.stefcho.eu/tag/adds/" class="tag-cloud-link tag-link-73 tag-link-position-1" style="font-size: 10.082644628099pt;" aria-label="ADDS (2 items)">ADDS</a>
<a href="https://blog.stefcho.eu/tag/aes-ni/" class="tag-cloud-link tag-link-114 tag-link-position-2" style="font-size: 10.082644628099pt;" aria-label="AES-NI (2 items)">AES-NI</a>
<a href="https://blog.stefcho.eu/tag/asterisk/" class="tag-cloud-link tag-link-55 tag-link-position-3" style="font-size: 10.082644628099pt;" aria-label="Asterisk (2 items)">Asterisk</a>
<a href="https://blog.stefcho.eu/tag/asus/" class="tag-cloud-link tag-link-60 tag-link-position-4" style="font-size: 11.471074380165pt;" aria-label="ASUS (3 items)">ASUS</a>
<a href="https://blog.stefcho.eu/tag/azure/" class="tag-cloud-link tag-link-94 tag-link-position-5" style="font-size: 12.628099173554pt;" aria-label="Azure (4 items)">Azure</a>
<a href="https://blog.stefcho.eu/tag/captive-portal/" class="tag-cloud-link tag-link-83 tag-link-position-6" style="font-size: 11.471074380165pt;" aria-label="Captive Portal (3 items)">Captive Portal</a>
<a href="https://blog.stefcho.eu/tag/cell-phone/" class="tag-cloud-link tag-link-64 tag-link-position-7" style="font-size: 8pt;" aria-label="Cell Phone (1 item)">Cell Phone</a>
<a href="https://blog.stefcho.eu/tag/centos/" class="tag-cloud-link tag-link-86 tag-link-position-8" style="font-size: 8pt;" aria-label="CentOS (1 item)">CentOS</a>
<a href="https://blog.stefcho.eu/tag/certification/" class="tag-cloud-link tag-link-105 tag-link-position-9" style="font-size: 10.082644628099pt;" aria-label="Certification (2 items)">Certification</a>
<a href="https://blog.stefcho.eu/tag/creative/" class="tag-cloud-link tag-link-66 tag-link-position-10" style="font-size: 10.082644628099pt;" aria-label="Creative (2 items)">Creative</a>
<a href="https://blog.stefcho.eu/tag/dd-wrt/" class="tag-cloud-link tag-link-57 tag-link-position-11" style="font-size: 14.363636363636pt;" aria-label="DD-WRT (6 items)">DD-WRT</a>
<a href="https://blog.stefcho.eu/tag/dns/" class="tag-cloud-link tag-link-92 tag-link-position-12" style="font-size: 8pt;" aria-label="DNS (1 item)">DNS</a>
<a href="https://blog.stefcho.eu/tag/hyper-v/" class="tag-cloud-link tag-link-67 tag-link-position-13" style="font-size: 12.628099173554pt;" aria-label="Hyper-V (4 items)">Hyper-V</a>
<a href="https://blog.stefcho.eu/tag/ldap/" class="tag-cloud-link tag-link-74 tag-link-position-14" style="font-size: 10.082644628099pt;" aria-label="LDAP (2 items)">LDAP</a>
<a href="https://blog.stefcho.eu/tag/learning/" class="tag-cloud-link tag-link-102 tag-link-position-15" style="font-size: 10.082644628099pt;" aria-label="Learning (2 items)">Learning</a>
<a href="https://blog.stefcho.eu/tag/linksys/" class="tag-cloud-link tag-link-56 tag-link-position-16" style="font-size: 8pt;" aria-label="Linksys (1 item)">Linksys</a>
<a href="https://blog.stefcho.eu/tag/microsoft/" class="tag-cloud-link tag-link-63 tag-link-position-17" style="font-size: 11.471074380165pt;" aria-label="Microsoft (3 items)">Microsoft</a>
<a href="https://blog.stefcho.eu/tag/mikrotik-routerboard-rb250g/" class="tag-cloud-link tag-link-79 tag-link-position-18" style="font-size: 8pt;" aria-label="Mikrotik RouterBoard RB250G (1 item)">Mikrotik RouterBoard RB250G</a>
<a href="https://blog.stefcho.eu/tag/network/" class="tag-cloud-link tag-link-65 tag-link-position-19" style="font-size: 19.107438016529pt;" aria-label="Network (17 items)">Network</a>
<a href="https://blog.stefcho.eu/tag/openldap/" class="tag-cloud-link tag-link-87 tag-link-position-20" style="font-size: 8pt;" aria-label="OpenLDAP (1 item)">OpenLDAP</a>
<a href="https://blog.stefcho.eu/tag/openvpn/" class="tag-cloud-link tag-link-72 tag-link-position-21" style="font-size: 16.561983471074pt;" aria-label="OpenVPN (10 items)">OpenVPN</a>
<a href="https://blog.stefcho.eu/tag/openwrt/" class="tag-cloud-link tag-link-71 tag-link-position-22" style="font-size: 8pt;" aria-label="OpenWrt (1 item)">OpenWrt</a>
<a href="https://blog.stefcho.eu/tag/pfcenter/" class="tag-cloud-link tag-link-85 tag-link-position-23" style="font-size: 8pt;" aria-label="pfCenter (1 item)">pfCenter</a>
<a href="https://blog.stefcho.eu/tag/pfsemse/" class="tag-cloud-link tag-link-95 tag-link-position-24" style="font-size: 8pt;" aria-label="pfSemse (1 item)">pfSemse</a>
<a href="https://blog.stefcho.eu/tag/pfsense/" class="tag-cloud-link tag-link-61 tag-link-position-25" style="font-size: 22pt;" aria-label="pfSense (31 items)">pfSense</a>
<a href="https://blog.stefcho.eu/tag/pfsense-2-0-rc1/" class="tag-cloud-link tag-link-81 tag-link-position-26" style="font-size: 13.553719008264pt;" aria-label="pfSense 2.0 RC1 (5 items)">pfSense 2.0 RC1</a>
<a href="https://blog.stefcho.eu/tag/pfsense-2-0-rc3/" class="tag-cloud-link tag-link-84 tag-link-position-27" style="font-size: 14.363636363636pt;" aria-label="pfSense 2.0 RC3 (6 items)">pfSense 2.0 RC3</a>
<a href="https://blog.stefcho.eu/tag/pfsense-2-2/" class="tag-cloud-link tag-link-90 tag-link-position-28" style="font-size: 11.471074380165pt;" aria-label="pfSense 2.2 (3 items)">pfSense 2.2</a>
<a href="https://blog.stefcho.eu/tag/pfsense-2-4-3/" class="tag-cloud-link tag-link-98 tag-link-position-29" style="font-size: 8pt;" aria-label="pfSense 2.4.3 (1 item)">pfSense 2.4.3</a>
<a href="https://blog.stefcho.eu/tag/pki/" class="tag-cloud-link tag-link-77 tag-link-position-30" style="font-size: 10.082644628099pt;" aria-label="PKI (2 items)">PKI</a>
<a href="https://blog.stefcho.eu/tag/radius/" class="tag-cloud-link tag-link-75 tag-link-position-31" style="font-size: 10.082644628099pt;" aria-label="RADIUS (2 items)">RADIUS</a>
<a href="https://blog.stefcho.eu/tag/routing/" class="tag-cloud-link tag-link-80 tag-link-position-32" style="font-size: 8pt;" aria-label="Routing (1 item)">Routing</a>
<a href="https://blog.stefcho.eu/tag/site-to-site/" class="tag-cloud-link tag-link-76 tag-link-position-33" style="font-size: 11.471074380165pt;" aria-label="Site To Site (3 items)">Site To Site</a>
<a href="https://blog.stefcho.eu/tag/technical/" class="tag-cloud-link tag-link-97 tag-link-position-34" style="font-size: 14.942148760331pt;" aria-label="Technical (7 items)">Technical</a>
<a href="https://blog.stefcho.eu/tag/uncategorized/" class="tag-cloud-link tag-link-96 tag-link-position-35" style="font-size: 8pt;" aria-label="Uncategorized (1 item)">Uncategorized</a>
<a href="https://blog.stefcho.eu/tag/vlan/" class="tag-cloud-link tag-link-78 tag-link-position-36" style="font-size: 8pt;" aria-label="VLAN (1 item)">VLAN</a>
<a href="https://blog.stefcho.eu/tag/vmware/" class="tag-cloud-link tag-link-62 tag-link-position-37" style="font-size: 14.942148760331pt;" aria-label="VMWare (7 items)">VMWare</a>
<a href="https://blog.stefcho.eu/tag/voip/" class="tag-cloud-link tag-link-59 tag-link-position-38" style="font-size: 10.082644628099pt;" aria-label="VoIP (2 items)">VoIP</a>
<a href="https://blog.stefcho.eu/tag/vyatta/" class="tag-cloud-link tag-link-70 tag-link-position-39" style="font-size: 8pt;" aria-label="Vyatta (1 item)">Vyatta</a>
<a href="https://blog.stefcho.eu/tag/web-sites/" class="tag-cloud-link tag-link-93 tag-link-position-40" style="font-size: 8pt;" aria-label="Web Sites (1 item)">Web Sites</a>
<a href="https://blog.stefcho.eu/tag/windows-server-8/" class="tag-cloud-link tag-link-88 tag-link-position-41" style="font-size: 8pt;" aria-label="Windows Server 8 (1 item)">Windows Server 8</a>
<a href="https://blog.stefcho.eu/tag/windows-server-2008-r2/" class="tag-cloud-link tag-link-68 tag-link-position-42" style="font-size: 12.628099173554pt;" aria-label="Windows Server 2008 R2 (4 items)">Windows Server 2008 R2</a>
<a href="https://blog.stefcho.eu/tag/windows-server-2012-r2/" class="tag-cloud-link tag-link-91 tag-link-position-43" style="font-size: 8pt;" aria-label="Windows Server 2012 R2 (1 item)">Windows Server 2012 R2</a>
<a href="https://blog.stefcho.eu/tag/wireless/" class="tag-cloud-link tag-link-82 tag-link-position-44" style="font-size: 8pt;" aria-label="Wireless (1 item)">Wireless</a>
<a href="https://blog.stefcho.eu/tag/workstation-8/" class="tag-cloud-link tag-link-89 tag-link-position-45" style="font-size: 8pt;" aria-label="Workstation 8 (1 item)">Workstation 8</a></div>
</section><section id="archives-3" class="widget widget_archive"><h2 class="widget-title">Archives</h2>		<ul><li><a href="https://blog.stefcho.eu/2019/05/">May 2019</a></li>
	<li><a href="https://blog.stefcho.eu/2019/03/">March 2019</a></li>
	<li><a href="https://blog.stefcho.eu/2019/02/">February 2019</a></li>
	<li><a href="https://blog.stefcho.eu/2018/10/">October 2018</a></li>
	<li><a href="https://blog.stefcho.eu/2018/08/">August 2018</a></li>
	<li><a href="https://blog.stefcho.eu/2016/03/">March 2016</a></li>
	<li><a href="https://blog.stefcho.eu/2015/04/">April 2015</a></li>
	<li><a href="https://blog.stefcho.eu/2015/03/">March 2015</a></li>
	<li><a href="https://blog.stefcho.eu/2015/01/">January 2015</a></li>
	<li><a href="https://blog.stefcho.eu/2012/02/">February 2012</a></li>
	<li><a href="https://blog.stefcho.eu/2011/10/">October 2011</a></li>
	<li><a href="https://blog.stefcho.eu/2011/09/">September 2011</a></li>
	<li><a href="https://blog.stefcho.eu/2011/08/">August 2011</a></li>
	<li><a href="https://blog.stefcho.eu/2011/07/">July 2011</a></li>
	<li><a href="https://blog.stefcho.eu/2011/06/">June 2011</a></li>
	<li><a href="https://blog.stefcho.eu/2011/05/">May 2011</a></li>
	<li><a href="https://blog.stefcho.eu/2011/04/">April 2011</a></li>
	<li><a href="https://blog.stefcho.eu/2011/03/">March 2011</a></li>
	<li><a href="https://blog.stefcho.eu/2011/02/">February 2011</a></li>
	<li><a href="https://blog.stefcho.eu/2010/07/">July 2010</a></li>
		</ul></section><section id="custom_html-3" class="widget_text widget widget_custom_html"><div class="textwidget custom-html-widget"><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><ins class="adsbygoogle" style="display:inline-block;width:160px;height:600px" data-ad-client="ca-pub-3838187216577892" data-ad-slot="5149186217"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script></div></section></aside></div>
		</div>
	</section></div>

	<footer id="colophon" class="site-footer section-fullwidth"><div class="row">
			<div class="columns small-12">
				<div class="site-info">
					<a href="https://wordpress.org/">Proudly powered by WordPress</a>
					<span class="sep"> | </span>
					Theme: micro, developed by <a href="http://devrix.com">DevriX</a>.				</div>
			</div>
		</div>
	</footer></div>

<script type="text/javascript" src="https://blog.stefcho.eu/wp-content/themes/micro/assets/scripts/scripts.min.js"></script><script type="text/javascript">
/* <![CDATA[ */
var wpgdprcData = {"ajaxURL":"https:\/\/blog.stefcho.eu\/wp-admin\/admin-ajax.php","ajaxSecurity":"9e86627f7c","consentVersion":"1","consentStatus":"0","isMultisite":"","path":"\/","blogId":""};
/* ]]> */
</script><script type="text/javascript" src="https://blog.stefcho.eu/wp-content/plugins/wp-gdpr-compliance/assets/js/front.js"></script></body></html>
